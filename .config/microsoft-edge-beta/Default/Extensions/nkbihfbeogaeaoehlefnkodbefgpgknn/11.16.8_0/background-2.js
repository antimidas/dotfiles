LavaPack.loadBundle([[1766,{buffer:2744,"ethereum-cryptography/secp256k1":2995},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MAX_WITHDRAWALS_PER_PAYLOAD=r.RLP_EMPTY_STRING=r.KECCAK256_RLP=r.KECCAK256_RLP_S=r.KECCAK256_RLP_ARRAY=r.KECCAK256_RLP_ARRAY_S=r.KECCAK256_NULL=r.KECCAK256_NULL_S=r.TWO_POW256=r.SECP256K1_ORDER_DIV_2=r.SECP256K1_ORDER=r.MAX_INTEGER_BIGINT=r.MAX_INTEGER=r.MAX_UINT64=void 0;const n=e("buffer"),i=e("ethereum-cryptography/secp256k1");r.MAX_UINT64=BigInt("0xffffffffffffffff"),r.MAX_INTEGER=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),r.MAX_INTEGER_BIGINT=BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),r.SECP256K1_ORDER=i.secp256k1.CURVE.n,r.SECP256K1_ORDER_DIV_2=i.secp256k1.CURVE.n/BigInt(2),r.TWO_POW256=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),r.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",r.KECCAK256_NULL=n.Buffer.from(r.KECCAK256_NULL_S,"hex"),r.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",r.KECCAK256_RLP_ARRAY=n.Buffer.from(r.KECCAK256_RLP_ARRAY_S,"hex"),r.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",r.KECCAK256_RLP=n.Buffer.from(r.KECCAK256_RLP_S,"hex"),r.RLP_EMPTY_STRING=n.Buffer.from([128]),r.MAX_WITHDRAWALS_PER_PAYLOAD=16}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/constants.js"}],[1767,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.compactBytesToNibbles=r.bytesToNibbles=r.nibblesToCompactBytes=r.nibblesToBytes=r.hasTerminator=void 0;r.hasTerminator=e=>e.length>0&&16===e[e.length-1];r.nibblesToBytes=(e,t)=>{for(let r=0,n=0;n<e.length;r+=1,n+=2)t[r]=e[n]<<4|e[n+1]};r.nibblesToCompactBytes=e=>{let t=0;(0,r.hasTerminator)(e)&&(t=1,e=e.subarray(0,e.length-1));const n=new Uint8Array(e.length/2+1);return n[0]=t<<5,1&~e.length||(n[0]|=16,n[0]|=e[0],e=e.subarray(1)),(0,r.nibblesToBytes)(e,n.subarray(1)),n};r.bytesToNibbles=e=>{const t=2*e.length+1,r=new Uint8Array(t);for(let t=0;t<e.length;t++){const n=e[t];r[2*t]=n/16,r[2*t+1]=n%16}return r[t-1]=16,r};r.compactBytesToNibbles=e=>{if(0===e.length)return e;let t=(0,r.bytesToNibbles)(e);t[0]<2&&(t=t.subarray(0,t.length-1));const n=2-(1&t[0]);return t.subarray(n)}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/encoding.js"}],[1768,{"../../../../../../../../../is-buffer/index.js":3374,"./internal":1770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.assertIsString=r.assertIsArray=r.assertIsBuffer=r.assertIsHexString=void 0;const n=e("./internal");r.assertIsHexString=function(e){if(!(0,n.isHexString)(e)){throw new Error(`This method only supports 0x-prefixed hex strings but input was: ${e}`)}};r.assertIsBuffer=function(e){if(!t.isBuffer(e)){throw new Error(`This method only supports Buffer but input was: ${e}`)}};r.assertIsArray=function(e){if(!Array.isArray(e)){throw new Error(`This method only supports number arrays but input was: ${e}`)}};r.assertIsString=function(e){if("string"!=typeof e){throw new Error(`This method only supports strings but input was: ${e}`)}}}).call(this)}).call(this,{isBuffer:e("../../../../../../../../../is-buffer/index.js")})}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/helpers.js"}],[1769,{"./account":1762,"./address":1763,"./asyncEventEmitter":1764,"./bytes":1765,"./constants":1766,"./encoding":1767,"./internal":1770,"./lock":1771,"./provider":1772,"./signature":1773,"./types":1774,"./units":1775,"./withdrawal":1776},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.toAscii=r.stripHexPrefix=r.padToEven=r.isHexString=r.isHexPrefixed=r.getKeys=r.getBinarySize=r.fromUtf8=r.fromAscii=r.arrayContainsArray=void 0,i(e("./constants"),r),i(e("./units"),r),i(e("./account"),r),i(e("./address"),r),i(e("./withdrawal"),r),i(e("./signature"),r),i(e("./bytes"),r),i(e("./types"),r),i(e("./encoding"),r),i(e("./asyncEventEmitter"),r);var s=e("./internal");Object.defineProperty(r,"arrayContainsArray",{enumerable:!0,get:function(){return s.arrayContainsArray}}),Object.defineProperty(r,"fromAscii",{enumerable:!0,get:function(){return s.fromAscii}}),Object.defineProperty(r,"fromUtf8",{enumerable:!0,get:function(){return s.fromUtf8}}),Object.defineProperty(r,"getBinarySize",{enumerable:!0,get:function(){return s.getBinarySize}}),Object.defineProperty(r,"getKeys",{enumerable:!0,get:function(){return s.getKeys}}),Object.defineProperty(r,"isHexPrefixed",{enumerable:!0,get:function(){return s.isHexPrefixed}}),Object.defineProperty(r,"isHexString",{enumerable:!0,get:function(){return s.isHexString}}),Object.defineProperty(r,"padToEven",{enumerable:!0,get:function(){return s.padToEven}}),Object.defineProperty(r,"stripHexPrefix",{enumerable:!0,get:function(){return s.stripHexPrefix}}),Object.defineProperty(r,"toAscii",{enumerable:!0,get:function(){return s.toAscii}}),i(e("./lock"),r),i(e("./provider"),r)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/index.js"}],[177,{"@metamask/utils":2021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){if((0,n.hasProperty)(e,"NftController")&&(0,n.isObject)(e.NftController)){const t=e.NftController;if((0,n.hasProperty)(t,"allNftContracts")&&(0,n.isObject)(t.allNftContracts)){const{allNftContracts:e}=t;Object.keys(e).every((t=>(0,n.isObject)(e[t])))&&Object.keys(e).forEach((t=>{const r=e[t];if((0,n.isObject)(r)&&i(r))for(const e of Object.keys(r))(0,n.isStrictHexString)(e)||delete r[e]}))}if((0,n.hasProperty)(t,"allNfts")&&(0,n.isObject)(t.allNfts)){const{allNfts:e}=t;Object.keys(e).every((t=>(0,n.isObject)(e[t])))&&Object.keys(e).forEach((t=>{const r=e[t];if((0,n.isObject)(r)&&i(r))for(const e of Object.keys(r))(0,n.isStrictHexString)(e)||delete r[e]}))}e.NftController=t}if((0,n.hasProperty)(e,"TokenListController")&&(0,n.isObject)(e.TokenListController)){const t=e.TokenListController;if((0,n.hasProperty)(t,"tokensChainsCache")&&(0,n.isObject)(t.tokensChainsCache)&&i(t.tokensChainsCache))for(const e of Object.keys(t.tokensChainsCache))(0,n.isStrictHexString)(e)||delete t.tokensChainsCache[e]}if((0,n.hasProperty)(e,"TokensController")&&(0,n.isObject)(e.TokensController)){const t=e.TokensController;if((0,n.hasProperty)(t,"allTokens")&&(0,n.isObject)(t.allTokens)&&i(t.allTokens)){const{allTokens:e}=t;for(const r of Object.keys(e))(0,n.isStrictHexString)(r)||delete t.allTokens[r]}if((0,n.hasProperty)(t,"allIgnoredTokens")&&(0,n.isObject)(t.allIgnoredTokens)&&i(t.allIgnoredTokens)){const{allIgnoredTokens:e}=t;for(const r of Object.keys(e))(0,n.isStrictHexString)(r)||delete t.allIgnoredTokens[r]}if((0,n.hasProperty)(t,"allDetectedTokens")&&(0,n.isObject)(t.allDetectedTokens)&&i(t.allDetectedTokens)){const{allDetectedTokens:e}=t;for(const r of Object.keys(e))(0,n.isStrictHexString)(r)||delete t.allDetectedTokens[r]}e.TokensController=t}return e};var n=e("@metamask/utils");function i(e){return Object.keys(e).some((e=>(0,n.isStrictHexString)(e)))}}}},{package:"$root$",file:"app/scripts/migrations/077-supplements/077-supplement-for-088.ts"}],[1770,{buffer:2744},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){function t(e){if("string"!=typeof e)throw new Error("[isHexPrefixed] input must be type 'string', received type "+typeof e);return"0"===e[0]&&"x"===e[1]}Object.defineProperty(r,"__esModule",{value:!0}),r.isHexString=r.getKeys=r.fromAscii=r.fromUtf8=r.toAscii=r.arrayContainsArray=r.getBinarySize=r.padToEven=r.stripHexPrefix=r.isHexPrefixed=void 0,r.isHexPrefixed=t;function n(e){let t=e;if("string"!=typeof t)throw new Error("[padToEven] value must be type 'string', received "+typeof t);return t.length%2&&(t=`0${t}`),t}r.stripHexPrefix=e=>{if("string"!=typeof e)throw new Error("[stripHexPrefix] input must be type 'string', received "+typeof e);return t(e)?e.slice(2):e},r.padToEven=n,r.getBinarySize=function(t){if("string"!=typeof t)throw new Error("[getBinarySize] method requires input type 'string', received "+typeof t);return e.byteLength(t,"utf8")},r.arrayContainsArray=function(e,t,r){if(!0!==Array.isArray(e))throw new Error(`[arrayContainsArray] method requires input 'superset' to be an array, got type '${typeof e}'`);if(!0!==Array.isArray(t))throw new Error(`[arrayContainsArray] method requires input 'subset' to be an array, got type '${typeof t}'`);return t[!0===r?"some":"every"]((t=>e.indexOf(t)>=0))},r.toAscii=function(e){let t="",r=0;const n=e.length;for("0x"===e.substring(0,2)&&(r=2);r<n;r+=2){const n=parseInt(e.substr(r,2),16);t+=String.fromCharCode(n)}return t},r.fromUtf8=function(t){return`0x${n(e.from(t,"utf8").toString("hex")).replace(/^0+|0+$/g,"")}`},r.fromAscii=function(e){let t="";for(let r=0;r<e.length;r++){const n=e.charCodeAt(r).toString(16);t+=n.length<2?`0${n}`:n}return`0x${t}`},r.getKeys=function(e,t,r){if(!Array.isArray(e))throw new Error("[getKeys] method expects input 'params' to be an array, got "+typeof e);if("string"!=typeof t)throw new Error("[getKeys] method expects input 'key' to be type 'string', got "+typeof e);const n=[];for(let i=0;i<e.length;i++){let s=e[i][t];if(!0!==r||s){if("string"!=typeof s)throw new Error("invalid abi - expected type 'string', received "+typeof s)}else s="";n.push(s)}return n},r.isHexString=function(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&!(void 0!==t&&t>0&&e.length!==2+2*t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/internal.js"}],[1771,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Lock=void 0;r.Lock=class{constructor(){this.permits=1,this.promiseResolverQueue=[]}async acquire(){return this.permits>0?(this.permits-=1,Promise.resolve(!0)):new Promise((e=>this.promiseResolverQueue.push(e)))}release(){if(this.permits+=1,this.permits>1&&this.promiseResolverQueue.length>0)console.warn("Lock.permits should never be > 0 when there is someone waiting.");else if(1===this.permits&&this.promiseResolverQueue.length>0){this.permits-=1;const e=this.promiseResolverQueue.shift();e&&e(!0)}}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/lock.js"}],[1772,{"micro-ftch":3630},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getProvider=r.fetchFromProvider=void 0;const n=e("micro-ftch");r.fetchFromProvider=async(e,t)=>(await(0,n.default)(e,{headers:{"content-type":"application/json"},type:"json",data:{method:t.method,params:t.params,jsonrpc:"2.0",id:1}})).result;r.getProvider=e=>{if("string"==typeof e)return e;if(e?.connection?.url!==undefined)return e.connection.url;throw new Error("Must provide valid provider URL or Web3Provider")}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/provider.js"}],[1773,{"./bytes":1765,"./constants":1766,"./helpers":1768,buffer:2744,"ethereum-cryptography/keccak":2978,"ethereum-cryptography/secp256k1":2995},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.hashPersonalMessage=r.isValidSignature=r.fromRpcSig=r.toCompactSig=r.toRpcSig=r.ecrecover=r.ecsign=void 0;const n=e("ethereum-cryptography/keccak"),i=e("ethereum-cryptography/secp256k1"),s=e("./bytes"),o=e("./constants"),a=e("./helpers");function l(e,t){return e===BigInt(0)||e===BigInt(1)?e:t===undefined?e-BigInt(27):e-(t*BigInt(2)+BigInt(35))}function c(e){return e===BigInt(0)||e===BigInt(1)}r.ecsign=function(e,r,n){const s=i.secp256k1.sign(e,r),o=s.toCompactRawBytes();return{r:t.from(o.slice(0,32)),s:t.from(o.slice(32,64)),v:n===undefined?BigInt(s.recovery+27):BigInt(s.recovery+35)+BigInt(n)*BigInt(2)}};r.ecrecover=function(e,r,n,o,a){const u=t.concat([(0,s.setLengthLeft)(n,32),(0,s.setLengthLeft)(o,32)],64),d=l(r,a);if(!c(d))throw new Error("Invalid signature v value");const h=i.secp256k1.Signature.fromCompact(u).addRecoveryBit(Number(d)).recoverPublicKey(e);return t.from(h.toRawBytes(!1).slice(1))};r.toRpcSig=function(e,r,n,i){if(!c(l(e,i)))throw new Error("Invalid signature v value");return(0,s.bufferToHex)(t.concat([(0,s.setLengthLeft)(r,32),(0,s.setLengthLeft)(n,32),(0,s.toBuffer)(e)]))};r.toCompactSig=function(e,r,n,i){if(!c(l(e,i)))throw new Error("Invalid signature v value");let o=n;return(e>BigInt(28)&&e%BigInt(2)===BigInt(1)||e===BigInt(1)||e===BigInt(28))&&(o=t.from(n),o[0]|=128),(0,s.bufferToHex)(t.concat([(0,s.setLengthLeft)(r,32),(0,s.setLengthLeft)(o,32)]))};r.fromRpcSig=function(e){const t=(0,s.toBuffer)(e);let r,n,i;if(t.length>=65)r=t.slice(0,32),n=t.slice(32,64),i=(0,s.bufferToBigInt)(t.slice(64));else{if(64!==t.length)throw new Error("Invalid signature length");r=t.slice(0,32),n=t.slice(32,64),i=BigInt((0,s.bufferToInt)(t.slice(32,33))>>7),n[0]&=127}return i<27&&(i+=BigInt(27)),{v:i,r:r,s:n}};r.isValidSignature=function(e,t,r,n=!0,i){if(32!==t.length||32!==r.length)return!1;if(!c(l(e,i)))return!1;const a=(0,s.bufferToBigInt)(t),u=(0,s.bufferToBigInt)(r);return!(a===BigInt(0)||a>=o.SECP256K1_ORDER||u===BigInt(0)||u>=o.SECP256K1_ORDER)&&!(n&&u>=o.SECP256K1_ORDER_DIV_2)};r.hashPersonalMessage=function(e){(0,a.assertIsBuffer)(e);const r=t.from(`Ethereum Signed Message:\n${e.length}`,"utf-8");return t.from((0,n.keccak256)(t.concat([r,e])))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/signature.js"}],[1774,{"./bytes":1765,"./internal":1770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.toType=r.TypeOutput=void 0;const n=e("./bytes"),i=e("./internal");var s;!function(e){e[e.Number=0]="Number",e[e.BigInt=1]="BigInt",e[e.Buffer=2]="Buffer",e[e.PrefixedHexString=3]="PrefixedHexString"}(s=r.TypeOutput||(r.TypeOutput={})),r.toType=function(e,t){if(null===e)return null;if(e===undefined)return undefined;if("string"==typeof e&&!(0,i.isHexString)(e))throw new Error(`A string must be provided with a 0x-prefix, given: ${e}`);if("number"==typeof e&&!Number.isSafeInteger(e))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");const r=(0,n.toBuffer)(e);switch(t){case s.Buffer:return r;case s.BigInt:return(0,n.bufferToBigInt)(r);case s.Number:{const e=(0,n.bufferToBigInt)(r);if(e>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(e)}case s.PrefixedHexString:return(0,n.bufferToHex)(r);default:throw new Error("unknown outputType")}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/types.js"}],[1775,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.GWEI_TO_WEI=void 0,r.GWEI_TO_WEI=BigInt(1e9)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/units.js"}],[1776,{"./address":1763,"./bytes":1765,"./types":1774,buffer:2744},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.Withdrawal=void 0;const n=e("./address"),i=e("./bytes"),s=e("./types");class o{constructor(e,t,r,n){this.index=e,this.validatorIndex=t,this.address=r,this.amount=n}static fromWithdrawalData(e){const{index:t,validatorIndex:r,address:i,amount:a}=e,l=(0,s.toType)(t,s.TypeOutput.BigInt),c=(0,s.toType)(r,s.TypeOutput.BigInt),u=new n.Address((0,s.toType)(i,s.TypeOutput.Buffer)),d=(0,s.toType)(a,s.TypeOutput.BigInt);return new o(l,c,u,d)}static fromValuesArray(e){if(4!==e.length)throw Error(`Invalid withdrawalArray length expected=4 actual=${e.length}`);const[t,r,n,i]=e;return o.fromWithdrawalData({index:t,validatorIndex:r,address:n,amount:i})}static toBufferArray(e){const{index:r,validatorIndex:i,address:o,amount:a}=e,l=(0,s.toType)(r,s.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,s.toType)(r,s.TypeOutput.Buffer),c=(0,s.toType)(i,s.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,s.toType)(i,s.TypeOutput.Buffer);let u;u=o instanceof n.Address?o.buf:(0,s.toType)(o,s.TypeOutput.Buffer);return[l,c,u,(0,s.toType)(a,s.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,s.toType)(a,s.TypeOutput.Buffer)]}raw(){return o.toBufferArray(this)}toValue(){return{index:this.index,validatorIndex:this.validatorIndex,address:this.address.buf,amount:this.amount}}toJSON(){return{index:(0,i.bigIntToHex)(this.index),validatorIndex:(0,i.bigIntToHex)(this.validatorIndex),address:"0x"+this.address.buf.toString("hex"),amount:(0,i.bigIntToHex)(this.amount)}}}r.Withdrawal=o}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/withdrawal.js"}],[1777,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){!function(e){var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,s=Math.floor,o="[BigNumber Error] ",a=o+"Number primitive has more than 15 significant digits: ",l=1e14,c=14,u=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],h=1e7,f=1e9;function p(e){var t=0|e;return e>0||e===t?t:t-1}function m(e){for(var t,r,n=1,i=e.length,s=e[0]+"";n<i;){for(t=e[n++]+"",r=c-t.length;r--;t="0"+t);s+=t}for(i=s.length;48===s.charCodeAt(--i););return s.slice(0,i+1||1)}function g(e,t){var r,n,i=e.c,s=t.c,o=e.s,a=t.s,l=e.e,c=t.e;if(!o||!a)return null;if(r=i&&!i[0],n=s&&!s[0],r||n)return r?n?0:-a:o;if(o!=a)return o;if(r=o<0,n=l==c,!i||!s)return n?0:!i^r?1:-1;if(!n)return l>c^r?1:-1;for(a=(l=i.length)<(c=s.length)?l:c,o=0;o<a;o++)if(i[o]!=s[o])return i[o]>s[o]^r?1:-1;return l==c?0:l>c^r?1:-1}function v(e,t,r,n){if(e<t||e>r||e!==s(e))throw Error(o+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function y(e){var t=e.c.length-1;return p(e.e/c)==t&&e.c[t]%2!=0}function b(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function w(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else if(++t>(n=e.length)){for(i=r,t-=n;--t;i+=r);e+=i}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}r=function e(t){var r,_,k,S,E,T,j,A,P,C,x=$.prototype={constructor:$,toString:null,valueOf:null},O=new $(1),M=20,B=4,I=-7,R=21,N=-1e7,L=1e7,D=!1,F=1,U=0,G={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},H="0123456789abcdefghijklmnopqrstuvwxyz",W=!0;function $(e,t){var r,i,o,l,d,h,f,p,m=this;if(!(m instanceof $))return new $(e,t);if(null==t){if(e&&!0===e._isBigNumber)return m.s=e.s,void(!e.c||e.e>L?m.c=m.e=null:e.e<N?m.c=[m.e=0]:(m.e=e.e,m.c=e.c.slice()));if((h="number"==typeof e)&&0*e==0){if(m.s=1/e<0?(e=-e,-1):1,e===~~e){for(l=0,d=e;d>=10;d/=10,l++);return void(l>L?m.c=m.e=null:(m.e=l,m.c=[e]))}p=String(e)}else{if(!n.test(p=String(e)))return k(m,p,h);m.s=45==p.charCodeAt(0)?(p=p.slice(1),-1):1}(l=p.indexOf("."))>-1&&(p=p.replace(".","")),(d=p.search(/e/i))>0?(l<0&&(l=d),l+=+p.slice(d+1),p=p.substring(0,d)):l<0&&(l=p.length)}else{if(v(t,2,H.length,"Base"),10==t&&W)return Y(m=new $(e),M+m.e+1,B);if(p=String(e),h="number"==typeof e){if(0*e!=0)return k(m,p,h,t);if(m.s=1/e<0?(p=p.slice(1),-1):1,$.DEBUG&&p.replace(/^0\.0*|\./,"").length>15)throw Error(a+e)}else m.s=45===p.charCodeAt(0)?(p=p.slice(1),-1):1;for(r=H.slice(0,t),l=d=0,f=p.length;d<f;d++)if(r.indexOf(i=p.charAt(d))<0){if("."==i){if(d>l){l=f;continue}}else if(!o&&(p==p.toUpperCase()&&(p=p.toLowerCase())||p==p.toLowerCase()&&(p=p.toUpperCase()))){o=!0,d=-1,l=0;continue}return k(m,String(e),h,t)}h=!1,(l=(p=_(p,t,10,m.s)).indexOf("."))>-1?p=p.replace(".",""):l=p.length}for(d=0;48===p.charCodeAt(d);d++);for(f=p.length;48===p.charCodeAt(--f););if(p=p.slice(d,++f)){if(f-=d,h&&$.DEBUG&&f>15&&(e>u||e!==s(e)))throw Error(a+m.s*e);if((l=l-d-1)>L)m.c=m.e=null;else if(l<N)m.c=[m.e=0];else{if(m.e=l,m.c=[],d=(l+1)%c,l<0&&(d+=c),d<f){for(d&&m.c.push(+p.slice(0,d)),f-=c;d<f;)m.c.push(+p.slice(d,d+=c));d=c-(p=p.slice(d)).length}else d-=f;for(;d--;p+="0");m.c.push(+p)}}else m.c=[m.e=0]}function q(e,t,r,n){var i,s,o,a,l;if(null==r?r=B:v(r,0,8),!e.c)return e.toString();if(i=e.c[0],o=e.e,null==t)l=m(e.c),l=1==n||2==n&&(o<=I||o>=R)?b(l,o):w(l,o,"0");else if(s=(e=Y(new $(e),t,r)).e,a=(l=m(e.c)).length,1==n||2==n&&(t<=s||s<=I)){for(;a<t;l+="0",a++);l=b(l,s)}else if(t-=o,l=w(l,s,"0"),s+1>a){if(--t>0)for(l+=".";t--;l+="0");}else if((t+=s-a)>0)for(s+1==a&&(l+=".");t--;l+="0");return e.s<0&&i?"-"+l:l}function V(e,t){for(var r,n,i=1,s=new $(e[0]);i<e.length;i++)(!(n=new $(e[i])).s||(r=g(s,n))===t||0===r&&s.s===t)&&(s=n);return s}function K(e,t,r){for(var n=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,n++);return(r=n+r*c-1)>L?e.c=e.e=null:r<N?e.c=[e.e=0]:(e.e=r,e.c=t),e}function Y(e,t,r,n){var o,a,u,h,f,p,m,g=e.c,v=d;if(g){e:{for(o=1,h=g[0];h>=10;h/=10,o++);if((a=t-o)<0)a+=c,u=t,f=g[p=0],m=s(f/v[o-u-1]%10);else if((p=i((a+1)/c))>=g.length){if(!n)break e;for(;g.length<=p;g.push(0));f=m=0,o=1,u=(a%=c)-c+1}else{for(f=h=g[p],o=1;h>=10;h/=10,o++);m=(u=(a%=c)-c+o)<0?0:s(f/v[o-u-1]%10)}if(n=n||t<0||null!=g[p+1]||(u<0?f:f%v[o-u-1]),n=r<4?(m||n)&&(0==r||r==(e.s<0?3:2)):m>5||5==m&&(4==r||n||6==r&&(a>0?u>0?f/v[o-u]:0:g[p-1])%10&1||r==(e.s<0?8:7)),t<1||!g[0])return g.length=0,n?(t-=e.e+1,g[0]=v[(c-t%c)%c],e.e=-t||0):g[0]=e.e=0,e;if(0==a?(g.length=p,h=1,p--):(g.length=p+1,h=v[c-a],g[p]=u>0?s(f/v[o-u]%v[u])*h:0),n)for(;;){if(0==p){for(a=1,u=g[0];u>=10;u/=10,a++);for(u=g[0]+=h,h=1;u>=10;u/=10,h++);a!=h&&(e.e++,g[0]==l&&(g[0]=1));break}if(g[p]+=h,g[p]!=l)break;g[p--]=0,h=1}for(a=g.length;0===g[--a];g.pop());}e.e>L?e.c=e.e=null:e.e<N&&(e.c=[e.e=0])}return e}function z(e){var t,r=e.e;return null===r?e.toString():(t=m(e.c),t=r<=I||r>=R?b(t,r):w(t,r,"0"),e.s<0?"-"+t:t)}return $.clone=e,$.ROUND_UP=0,$.ROUND_DOWN=1,$.ROUND_CEIL=2,$.ROUND_FLOOR=3,$.ROUND_HALF_UP=4,$.ROUND_HALF_DOWN=5,$.ROUND_HALF_EVEN=6,$.ROUND_HALF_CEIL=7,$.ROUND_HALF_FLOOR=8,$.EUCLID=9,$.config=$.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(o+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(v(r=e[t],0,f,t),M=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(v(r=e[t],0,8,t),B=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(v(r[0],-f,0,t),v(r[1],0,f,t),I=r[0],R=r[1]):(v(r,-f,f,t),I=-(R=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)v(r[0],-f,-1,t),v(r[1],1,f,t),N=r[0],L=r[1];else{if(v(r,-f,f,t),!r)throw Error(o+t+" cannot be zero: "+r);N=-(L=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(o+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw D=!r,Error(o+"crypto unavailable");D=r}else D=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(v(r=e[t],0,9,t),F=r),e.hasOwnProperty(t="POW_PRECISION")&&(v(r=e[t],0,f,t),U=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(o+t+" not an object: "+r);G=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(o+t+" invalid: "+r);W="0123456789"==r.slice(0,10),H=r}}return{DECIMAL_PLACES:M,ROUNDING_MODE:B,EXPONENTIAL_AT:[I,R],RANGE:[N,L],CRYPTO:D,MODULO_MODE:F,POW_PRECISION:U,FORMAT:G,ALPHABET:H}},$.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!$.DEBUG)return!0;var t,r,n=e.c,i=e.e,a=e.s;e:if("[object Array]"=={}.toString.call(n)){if((1===a||-1===a)&&i>=-f&&i<=f&&i===s(i)){if(0===n[0]){if(0===i&&1===n.length)return!0;break e}if((t=(i+1)%c)<1&&(t+=c),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||r>=l||r!==s(r))break e;if(0!==r)return!0}}}else if(null===n&&null===i&&(null===a||1===a||-1===a))return!0;throw Error(o+"Invalid BigNumber: "+e)},$.maximum=$.max=function(){return V(arguments,-1)},$.minimum=$.min=function(){return V(arguments,1)},$.random=(S=9007199254740992,E=Math.random()*S&2097151?function(){return s(Math.random()*S)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,n,a,l,u=0,h=[],p=new $(O);if(null==e?e=M:v(e,0,f),a=i(e/c),D)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(a*=2));u<a;)(l=131072*t[u]+(t[u+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[u]=r[0],t[u+1]=r[1]):(h.push(l%1e14),u+=2);u=a/2}else{if(!crypto.randomBytes)throw D=!1,Error(o+"crypto unavailable");for(t=crypto.randomBytes(a*=7);u<a;)(l=281474976710656*(31&t[u])+1099511627776*t[u+1]+4294967296*t[u+2]+16777216*t[u+3]+(t[u+4]<<16)+(t[u+5]<<8)+t[u+6])>=9e15?crypto.randomBytes(7).copy(t,u):(h.push(l%1e14),u+=7);u=a/7}if(!D)for(;u<a;)(l=E())<9e15&&(h[u++]=l%1e14);for(a=h[--u],e%=c,a&&e&&(l=d[c-e],h[u]=s(a/l)*l);0===h[u];h.pop(),u--);if(u<0)h=[n=0];else{for(n=-1;0===h[0];h.splice(0,1),n-=c);for(u=1,l=h[0];l>=10;l/=10,u++);u<c&&(n-=c-u)}return p.e=n,p.c=h,p}),$.sum=function(){for(var e=1,t=arguments,r=new $(t[0]);e<t.length;)r=r.plus(t[e++]);return r},_=function(){var e="0123456789";function t(e,t,r,n){for(var i,s,o=[0],a=0,l=e.length;a<l;){for(s=o.length;s--;o[s]*=t);for(o[0]+=n.indexOf(e.charAt(a++)),i=0;i<o.length;i++)o[i]>r-1&&(null==o[i+1]&&(o[i+1]=0),o[i+1]+=o[i]/r|0,o[i]%=r)}return o.reverse()}return function(n,i,s,o,a){var l,c,u,d,h,f,p,g,v=n.indexOf("."),y=M,b=B;for(v>=0&&(d=U,U=0,n=n.replace(".",""),f=(g=new $(i)).pow(n.length-v),U=d,g.c=t(w(m(f.c),f.e,"0"),10,s,e),g.e=g.c.length),u=d=(p=t(n,i,s,a?(l=H,e):(l=e,H))).length;0==p[--d];p.pop());if(!p[0])return l.charAt(0);if(v<0?--u:(f.c=p,f.e=u,f.s=o,p=(f=r(f,g,y,b,s)).c,h=f.r,u=f.e),v=p[c=u+y+1],d=s/2,h=h||c<0||null!=p[c+1],h=b<4?(null!=v||h)&&(0==b||b==(f.s<0?3:2)):v>d||v==d&&(4==b||h||6==b&&1&p[c-1]||b==(f.s<0?8:7)),c<1||!p[0])n=h?w(l.charAt(1),-y,l.charAt(0)):l.charAt(0);else{if(p.length=c,h)for(--s;++p[--c]>s;)p[c]=0,c||(++u,p=[1].concat(p));for(d=p.length;!p[--d];);for(v=0,n="";v<=d;n+=l.charAt(p[v++]));n=w(n,u,l.charAt(0))}return n}}(),r=function(){function e(e,t,r){var n,i,s,o,a=0,l=e.length,c=t%h,u=t/h|0;for(e=e.slice();l--;)a=((i=c*(s=e[l]%h)+(n=u*s+(o=e[l]/h|0)*c)%h*h+a)/r|0)+(n/h|0)+u*o,e[l]=i%r;return a&&(e=[a].concat(e)),e}function t(e,t,r,n){var i,s;if(r!=n)s=r>n?1:-1;else for(i=s=0;i<r;i++)if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}return s}function r(e,t,r,n){for(var i=0;r--;)e[r]-=i,i=e[r]<t[r]?1:0,e[r]=i*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,i,o,a,u){var d,h,f,m,g,v,y,b,w,_,k,S,E,T,j,A,P,C=n.s==i.s?1:-1,x=n.c,O=i.c;if(!(x&&x[0]&&O&&O[0]))return new $(n.s&&i.s&&(x?!O||x[0]!=O[0]:O)?x&&0==x[0]||!O?0*C:C/0:NaN);for(w=(b=new $(C)).c=[],C=o+(h=n.e-i.e)+1,u||(u=l,h=p(n.e/c)-p(i.e/c),C=C/c|0),f=0;O[f]==(x[f]||0);f++);if(O[f]>(x[f]||0)&&h--,C<0)w.push(1),m=!0;else{for(T=x.length,A=O.length,f=0,C+=2,(g=s(u/(O[0]+1)))>1&&(O=e(O,g,u),x=e(x,g,u),A=O.length,T=x.length),E=A,k=(_=x.slice(0,A)).length;k<A;_[k++]=0);P=O.slice(),P=[0].concat(P),j=O[0],O[1]>=u/2&&j++;do{if(g=0,(d=t(O,_,A,k))<0){if(S=_[0],A!=k&&(S=S*u+(_[1]||0)),(g=s(S/j))>1)for(g>=u&&(g=u-1),y=(v=e(O,g,u)).length,k=_.length;1==t(v,_,y,k);)g--,r(v,A<y?P:O,y,u),y=v.length,d=1;else 0==g&&(d=g=1),y=(v=O.slice()).length;if(y<k&&(v=[0].concat(v)),r(_,v,k,u),k=_.length,-1==d)for(;t(O,_,A,k)<1;)g++,r(_,A<k?P:O,k,u),k=_.length}else 0===d&&(g++,_=[0]);w[f++]=g,_[0]?_[k++]=x[E]||0:(_=[x[E]],k=1)}while((E++<T||null!=_[0])&&C--);m=null!=_[0],w[0]||w.splice(0,1)}if(u==l){for(f=1,C=w[0];C>=10;C/=10,f++);Y(b,o+(b.e=f+h*c-1)+1,a,m)}else b.e=h,b.r=+m;return b}}(),T=/^(-?)0([xbo])(?=\w[\w.]*$)/i,j=/^([^.]+)\.$/,A=/^\.([^.]+)$/,P=/^-?(Infinity|NaN)$/,C=/^\s*\+(?=[\w.])|^\s+|\s+$/g,k=function(e,t,r,n){var i,s=r?t:t.replace(C,"");if(P.test(s))e.s=isNaN(s)?null:s<0?-1:1;else{if(!r&&(s=s.replace(T,(function(e,t,r){return i="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=i?e:t})),n&&(i=n,s=s.replace(j,"$1").replace(A,"0.$1")),t!=s))return new $(s,i);if($.DEBUG)throw Error(o+"Not a"+(n?" base "+n:"")+" number: "+t);e.s=null}e.c=e.e=null},x.absoluteValue=x.abs=function(){var e=new $(this);return e.s<0&&(e.s=1),e},x.comparedTo=function(e,t){return g(this,new $(e,t))},x.decimalPlaces=x.dp=function(e,t){var r,n,i,s=this;if(null!=e)return v(e,0,f),null==t?t=B:v(t,0,8),Y(new $(s),e+s.e+1,t);if(!(r=s.c))return null;if(n=((i=r.length-1)-p(this.e/c))*c,i=r[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},x.dividedBy=x.div=function(e,t){return r(this,new $(e,t),M,B)},x.dividedToIntegerBy=x.idiv=function(e,t){return r(this,new $(e,t),0,1)},x.exponentiatedBy=x.pow=function(e,t){var r,n,a,l,u,d,h,f,p=this;if((e=new $(e)).c&&!e.isInteger())throw Error(o+"Exponent not an integer: "+z(e));if(null!=t&&(t=new $(t)),u=e.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!e.c||!e.c[0])return f=new $(Math.pow(+z(p),u?e.s*(2-y(e)):+z(e))),t?f.mod(t):f;if(d=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new $(NaN);(n=!d&&p.isInteger()&&t.isInteger())&&(p=p.mod(t))}else{if(e.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||u&&p.c[1]>=24e7:p.c[0]<8e13||u&&p.c[0]<=9999975e7)))return l=p.s<0&&y(e)?-0:0,p.e>-1&&(l=1/l),new $(d?1/l:l);U&&(l=i(U/c+2))}for(u?(r=new $(.5),d&&(e.s=1),h=y(e)):h=(a=Math.abs(+z(e)))%2,f=new $(O);;){if(h){if(!(f=f.times(p)).c)break;l?f.c.length>l&&(f.c.length=l):n&&(f=f.mod(t))}if(a){if(0===(a=s(a/2)))break;h=a%2}else if(Y(e=e.times(r),e.e+1,1),e.e>14)h=y(e);else{if(0===(a=+z(e)))break;h=a%2}p=p.times(p),l?p.c&&p.c.length>l&&(p.c.length=l):n&&(p=p.mod(t))}return n?f:(d&&(f=O.div(f)),t?f.mod(t):l?Y(f,U,B,undefined):f)},x.integerValue=function(e){var t=new $(this);return null==e?e=B:v(e,0,8),Y(t,t.e+1,e)},x.isEqualTo=x.eq=function(e,t){return 0===g(this,new $(e,t))},x.isFinite=function(){return!!this.c},x.isGreaterThan=x.gt=function(e,t){return g(this,new $(e,t))>0},x.isGreaterThanOrEqualTo=x.gte=function(e,t){return 1===(t=g(this,new $(e,t)))||0===t},x.isInteger=function(){return!!this.c&&p(this.e/c)>this.c.length-2},x.isLessThan=x.lt=function(e,t){return g(this,new $(e,t))<0},x.isLessThanOrEqualTo=x.lte=function(e,t){return-1===(t=g(this,new $(e,t)))||0===t},x.isNaN=function(){return!this.s},x.isNegative=function(){return this.s<0},x.isPositive=function(){return this.s>0},x.isZero=function(){return!!this.c&&0==this.c[0]},x.minus=function(e,t){var r,n,i,s,o=this,a=o.s;if(t=(e=new $(e,t)).s,!a||!t)return new $(NaN);if(a!=t)return e.s=-t,o.plus(e);var u=o.e/c,d=e.e/c,h=o.c,f=e.c;if(!u||!d){if(!h||!f)return h?(e.s=-t,e):new $(f?o:NaN);if(!h[0]||!f[0])return f[0]?(e.s=-t,e):new $(h[0]?o:3==B?-0:0)}if(u=p(u),d=p(d),h=h.slice(),a=u-d){for((s=a<0)?(a=-a,i=h):(d=u,i=f),i.reverse(),t=a;t--;i.push(0));i.reverse()}else for(n=(s=(a=h.length)<(t=f.length))?a:t,a=t=0;t<n;t++)if(h[t]!=f[t]){s=h[t]<f[t];break}if(s&&(i=h,h=f,f=i,e.s=-e.s),(t=(n=f.length)-(r=h.length))>0)for(;t--;h[r++]=0);for(t=l-1;n>a;){if(h[--n]<f[n]){for(r=n;r&&!h[--r];h[r]=t);--h[r],h[n]+=l}h[n]-=f[n]}for(;0==h[0];h.splice(0,1),--d);return h[0]?K(e,h,d):(e.s=3==B?-1:1,e.c=[e.e=0],e)},x.modulo=x.mod=function(e,t){var n,i,s=this;return e=new $(e,t),!s.c||!e.s||e.c&&!e.c[0]?new $(NaN):!e.c||s.c&&!s.c[0]?new $(s):(9==F?(i=e.s,e.s=1,n=r(s,e,0,3),e.s=i,n.s*=i):n=r(s,e,0,F),(e=s.minus(n.times(e))).c[0]||1!=F||(e.s=s.s),e)},x.multipliedBy=x.times=function(e,t){var r,n,i,s,o,a,u,d,f,m,g,v,y,b,w,_=this,k=_.c,S=(e=new $(e,t)).c;if(!(k&&S&&k[0]&&S[0]))return!_.s||!e.s||k&&!k[0]&&!S||S&&!S[0]&&!k?e.c=e.e=e.s=null:(e.s*=_.s,k&&S?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=p(_.e/c)+p(e.e/c),e.s*=_.s,(u=k.length)<(m=S.length)&&(y=k,k=S,S=y,i=u,u=m,m=i),i=u+m,y=[];i--;y.push(0));for(b=l,w=h,i=m;--i>=0;){for(r=0,g=S[i]%w,v=S[i]/w|0,s=i+(o=u);s>i;)r=((d=g*(d=k[--o]%w)+(a=v*d+(f=k[o]/w|0)*g)%w*w+y[s]+r)/b|0)+(a/w|0)+v*f,y[s--]=d%b;y[s]=r}return r?++n:y.splice(0,1),K(e,y,n)},x.negated=function(){var e=new $(this);return e.s=-e.s||null,e},x.plus=function(e,t){var r,n=this,i=n.s;if(t=(e=new $(e,t)).s,!i||!t)return new $(NaN);if(i!=t)return e.s=-t,n.minus(e);var s=n.e/c,o=e.e/c,a=n.c,u=e.c;if(!s||!o){if(!a||!u)return new $(i/0);if(!a[0]||!u[0])return u[0]?e:new $(a[0]?n:0*i)}if(s=p(s),o=p(o),a=a.slice(),i=s-o){for(i>0?(o=s,r=u):(i=-i,r=a),r.reverse();i--;r.push(0));r.reverse()}for((i=a.length)-(t=u.length)<0&&(r=u,u=a,a=r,t=i),i=0;t;)i=(a[--t]=a[t]+u[t]+i)/l|0,a[t]=l===a[t]?0:a[t]%l;return i&&(a=[i].concat(a),++o),K(e,a,o)},x.precision=x.sd=function(e,t){var r,n,i,s=this;if(null!=e&&e!==!!e)return v(e,1,f),null==t?t=B:v(t,0,8),Y(new $(s),e,t);if(!(r=s.c))return null;if(n=(i=r.length-1)*c+1,i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}return e&&s.e+1>n&&(n=s.e+1),n},x.shiftedBy=function(e){return v(e,-9007199254740991,u),this.times("1e"+e)},x.squareRoot=x.sqrt=function(){var e,t,n,i,s,o=this,a=o.c,l=o.s,c=o.e,u=M+4,d=new $("0.5");if(1!==l||!a||!a[0])return new $(!l||l<0&&(!a||a[0])?NaN:a?o:1/0);if(0==(l=Math.sqrt(+z(o)))||l==1/0?(((t=m(a)).length+c)%2==0&&(t+="0"),l=Math.sqrt(+t),c=p((c+1)/2)-(c<0||c%2),n=new $(t=l==1/0?"5e"+c:(t=l.toExponential()).slice(0,t.indexOf("e")+1)+c)):n=new $(l+""),n.c[0])for((l=(c=n.e)+u)<3&&(l=0);;)if(s=n,n=d.times(s.plus(r(o,s,u,1))),m(s.c).slice(0,l)===(t=m(n.c)).slice(0,l)){if(n.e<c&&--l,"9999"!=(t=t.slice(l-3,l+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(Y(n,n.e+M+2,1),e=!n.times(n).eq(o));break}if(!i&&(Y(s,s.e+M+2,0),s.times(s).eq(o))){n=s;break}u+=4,l+=4,i=1}return Y(n,n.e+M+1,B,e)},x.toExponential=function(e,t){return null!=e&&(v(e,0,f),e++),q(this,e,t,1)},x.toFixed=function(e,t){return null!=e&&(v(e,0,f),e=e+this.e+1),q(this,e,t)},x.toFormat=function(e,t,r){var n,i=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=G;else if("object"!=typeof r)throw Error(o+"Argument not an object: "+r);if(n=i.toFixed(e,t),i.c){var s,a=n.split("."),l=+r.groupSize,c=+r.secondaryGroupSize,u=r.groupSeparator||"",d=a[0],h=a[1],f=i.s<0,p=f?d.slice(1):d,m=p.length;if(c&&(s=l,l=c,c=s,m-=s),l>0&&m>0){for(s=m%l||l,d=p.substr(0,s);s<m;s+=l)d+=u+p.substr(s,l);c>0&&(d+=u+p.slice(s)),f&&(d="-"+d)}n=h?d+(r.decimalSeparator||"")+((c=+r.fractionGroupSize)?h.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):h):d}return(r.prefix||"")+n+(r.suffix||"")},x.toFraction=function(e){var t,n,i,s,a,l,u,h,f,p,g,v,y=this,b=y.c;if(null!=e&&(!(u=new $(e)).isInteger()&&(u.c||1!==u.s)||u.lt(O)))throw Error(o+"Argument "+(u.isInteger()?"out of range: ":"not an integer: ")+z(u));if(!b)return new $(y);for(t=new $(O),f=n=new $(O),i=h=new $(O),v=m(b),a=t.e=v.length-y.e-1,t.c[0]=d[(l=a%c)<0?c+l:l],e=!e||u.comparedTo(t)>0?a>0?t:f:u,l=L,L=1/0,u=new $(v),h.c[0]=0;p=r(u,t,0,1),1!=(s=n.plus(p.times(i))).comparedTo(e);)n=i,i=s,f=h.plus(p.times(s=f)),h=s,t=u.minus(p.times(s=t)),u=s;return s=r(e.minus(n),i,0,1),h=h.plus(s.times(f)),n=n.plus(s.times(i)),h.s=f.s=y.s,g=r(f,i,a*=2,B).minus(y).abs().comparedTo(r(h,n,a,B).minus(y).abs())<1?[f,i]:[h,n],L=l,g},x.toNumber=function(){return+z(this)},x.toPrecision=function(e,t){return null!=e&&v(e,1,f),q(this,e,t,2)},x.toString=function(e){var t,r=this,n=r.s,i=r.e;return null===i?n?(t="Infinity",n<0&&(t="-"+t)):t="NaN":(null==e?t=i<=I||i>=R?b(m(r.c),i):w(m(r.c),i,"0"):10===e&&W?t=w(m((r=Y(new $(r),M+i+1,B)).c),r.e,"0"):(v(e,2,H.length,"Base"),t=_(w(m(r.c),i,"0"),10,e,n,!0)),n<0&&r.c[0]&&(t="-"+t)),t},x.valueOf=x.toJSON=function(){return z(this)},x._isBigNumber=!0,null!=t&&$.set(t),$}(),r.default=r.BigNumber=r,"function"==typeof define&&define.amd?define((function(){return r})):void 0!==t&&t.exports?t.exports=r:(e||(e="undefined"!=typeof self&&self?self:window),e.BigNumber=r)}(this)}}},{package:"@metamask/smart-transactions-controller>bignumber.js",file:"node_modules/@metamask/smart-transactions-controller/node_modules/bignumber.js/bignumber.js"}],[1778,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=[{constant:!1,inputs:[{name:"_new",type:"address"}],name:"setOwner",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[],name:"totalSignatures",outputs:[{name:"",type:"uint256"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,type:"function"},{constant:!1,inputs:[],name:"drain",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[{name:"",type:"bytes4"}],name:"entries",outputs:[{name:"",type:"string"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_method",type:"string"}],name:"register",outputs:[{name:"",type:"bool"}],payable:!1,type:"function"},{inputs:[],type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,name:"creator",type:"address"},{indexed:!0,name:"signature",type:"bytes4"},{indexed:!1,name:"method",type:"string"}],name:"Registered",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"old",type:"address"},{indexed:!0,name:"current",type:"address"}],name:"NewOwner",type:"event"}]}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>eth-method-registry",file:"node_modules/@metamask/smart-transactions-controller/node_modules/eth-method-registry/dist/abi.json"}],[1779,{"./abi.json":1778,"./registry-map.json":1780,"@metamask/ethjs-contract":1716,"@metamask/ethjs-query":1719},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.MethodRegistry=void 0;const i=n(e("@metamask/ethjs-query")),s=n(e("@metamask/ethjs-contract")),o=n(e("./registry-map.json")),a=n(e("./abi.json"));r.MethodRegistry=class{constructor(e){if(!e.provider)throw new Error("Missing required 'provider' option");const t=o.default[e.network||"1"];if(!t)throw new Error("No method registry found on the requested network.");const r=new i.default(e.provider),n=(0,s.default)(r);this.registry=n(a.default).at(t)}async lookup(e){const t=await this.registry.entries(e);return t?t[0]:undefined}parse(e){const t=e.match(/^([^)(]*)\((.*)\)([^)(]*)$/u);let r;if(r=t?t[1].charAt(0).toUpperCase()+t[1].slice(1).split(/(?=[A-Z])/u).join(" "):"",t){const n=e.match(new RegExp(`${t[1]}\\(+([a-z1-9,()\\[\\]]+)\\)`,"u"));let i,s=[];return n&&(i=n[1].match(/[A-z1-9]+/gu),i&&(s=i.map((e=>({type:e}))))),{name:r,args:s}}return{}}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>eth-method-registry",file:"node_modules/@metamask/smart-transactions-controller/node_modules/eth-method-registry/dist/index.js"}],[178,{"./077-supplements/077-supplement-for-082":174,"./077-supplements/077-supplement-for-084":175,"./077-supplements/077-supplement-for-086":176,"./077-supplements/077-supplement-for-088":177,"@metamask/utils":2021,lodash:3587,loglevel:3593},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=u(e("loglevel")),s=e("@metamask/utils"),o=u(e("./077-supplements/077-supplement-for-082")),a=u(e("./077-supplements/077-supplement-for-084")),l=u(e("./077-supplements/077-supplement-for-086")),c=u(e("./077-supplements/077-supplement-for-088"));function u(e){return e&&e.__esModule?e:{default:e}}r.default={version:77,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=77;let r=function(e){if(!(0,s.hasProperty)(e,"TokenListController"))return i.default.warn("Skipping migration, TokenListController state is missing"),e;var t,r;if(!(0,s.isObject)(e.TokenListController))return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.TokenListController is "+typeof e.TokenListController)),e;if(!(0,s.hasProperty)(e.TokenListController,"tokensChainsCache"))return i.default.warn("Skipping migration, TokenListController.tokensChainsCache state is missing"),e;const{TokenListController:n}=e,{tokensChainsCache:o}=n;let a,l;for(const e in o){var c,u;if(a=o[e].data||{},l={},Array.isArray(a))for(const e of a)l[e.address]=e;else if((null===(c=Object.keys(a)[0])||void 0===c?void 0:c.toLowerCase())!==(null===(u=a[Object.keys(a)[0]])||void 0===u||null===(u=u.address)||void 0===u?void 0:u.toLowerCase()))for(const e in a)l[a[e].address]=a[e];o[e].data=Object.keys(l).length>0?l:a}return n.tokensChainsCache=o,{...e,TokenListController:{...n}}}(t.data);return r=(0,o.default)(r),r=(0,a.default)(r),r=(0,l.default)(r),r=(0,c.default)(r),t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/077.js"}],[1780,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={1:"0x44691B39d1a75dC4E0A0346CBB15E310e6ED1E86"}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>eth-method-registry",file:"node_modules/@metamask/smart-transactions-controller/node_modules/eth-method-registry/dist/registry-map.json"}],[1781,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={name:"@metamask/smart-transactions-controller",version:"10.0.1",description:"Improves success rates for swaps by trialing transactions privately and finding minimum fees",repository:{type:"git",url:"https://github.com/MetaMask/smart-transactions-controller.git"},license:"SEE LICENSE IN LICENSE",main:"dist/index.js",types:"dist/index.d.ts",files:["dist/"],scripts:{build:"tsc --project .","build:clean":"rm -rf dist && yarn build","build:link":"yarn build && cd dist && yarn link && rm -rf node_modules && cd ..",lint:"yarn lint:eslint && yarn lint:misc --check","lint:eslint":"eslint . --cache --ext js,ts","lint:fix":"yarn lint:eslint --fix && yarn lint:misc --write","lint:misc":"prettier '**/*.json' '**/*.md' '!CHANGELOG.md' '**/*.yml' '!.yarnrc.yml' --ignore-path .gitignore",prepack:"./scripts/prepack.sh",test:"jest","test:watch":"jest --watchAll"},dependencies:{"@babel/runtime":"^7.24.1","@ethereumjs/tx":"^5.2.1","@ethereumjs/util":"^9.0.2","@ethersproject/bytes":"^5.7.0","@metamask/base-controller":"^5.0.1","@metamask/controller-utils":"^9.1.0","@metamask/eth-query":"^4.0.0","@metamask/network-controller":"^18.1.0","@metamask/polling-controller":"^6.0.1","@metamask/transaction-controller":"^28.1.0","bignumber.js":"^9.0.1",events:"^3.3.0","fast-json-patch":"^3.1.0",lodash:"^4.17.21"},devDependencies:{"@lavamoat/allow-scripts":"^2.3.1","@metamask/auto-changelog":"^3.1.0","@metamask/eslint-config":"^12.2.0","@metamask/eslint-config-jest":"^12.1.0","@metamask/eslint-config-nodejs":"^12.1.0","@metamask/eslint-config-typescript":"^12.1.0","@types/jest":"^26.0.24","@types/lodash":"^4.14.194","@types/node":"^18.19.17","@types/sinon":"^9.0.10","@typescript-eslint/eslint-plugin":"^5.33.0","@typescript-eslint/parser":"^5.33.0",eslint:"^8.48.0","eslint-config-prettier":"^8.8.0","eslint-plugin-import":"^2.27.5","eslint-plugin-jest":"^27.1.5","eslint-plugin-jsdoc":"^39.2.9","eslint-plugin-n":"^15.7.0","eslint-plugin-prettier":"^4.2.1","eslint-plugin-promise":"^6.1.1","isomorphic-fetch":"^3.0.0",jest:"^26.4.2",nock:"^13.3.1",prettier:"^2.8.8","prettier-plugin-packagejson":"^2.4.3",sinon:"^9.2.4","ts-jest":"^26.5.6",typescript:"~4.8.4"},packageManager:"yarn@3.2.1",engines:{node:"^18.18 || >=20"},publishConfig:{access:"public",registry:"https://registry.npmjs.org/"},lavamoat:{allowScripts:{"@lavamoat/preinstall-always-fail":!1,"@metamask/controller-utils>ethereumjs-util>ethereum-cryptography>keccak":!1,"@metamask/controller-utils>ethereumjs-util>ethereum-cryptography>secp256k1":!1,"@metamask/controller-utils>babel-runtime>core-js":!1}}}}}},{package:"@metamask/smart-transactions-controller",file:"node_modules/@metamask/smart-transactions-controller/package.json"}],[1782,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e=>(e[e.Unverified=0]="Unverified",e[e.Blocked=1]="Blocked",e[e.Verified=2]="Verified",e[e.Unavailable=3]="Unavailable",e))(n||{});r.SnapsRegistryStatus=n}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-4CA3O64H.js"}],[1783,{"./chunk-BOFPNIRX.js":1790,"@metamask/snaps-sdk":1902,"@metamask/snaps-utils":1938,"fast-deep-equal":3074},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i=e("./chunk-BOFPNIRX.js"),s=e("@metamask/snaps-sdk"),o=e("@metamask/snaps-utils"),a=e("fast-deep-equal"),l=(n=a)&&n.__esModule?n:{default:n};function c(e,t){let r;const n=new Promise(((n,i)=>{e.start((()=>{void 0===t?n():n(t)})),r=i}));return n.cancel=()=>{"finished"!==e.status&&(e.cancel(),r(new Error("The delay has been canceled.")))},n}var u=Symbol("Used to check if the requested promise has timeout (see withTimeout)");async function d(e,t){return t&&0!==t.length?await Promise.all(t.map((async t=>e.fetch(t)))):[]}r.setDiff=function(e,t){return Object.entries(e).reduce(((e,[r,n])=>(r in t||(e[r]=n),e)),{})},r.permissionsDiff=function(e,t){return Object.entries(e).reduce(((e,[r,n])=>{const i=r in t;return(!i||i&&!l.default.call(void 0,n.caveats??[],t[r].caveats??[]))&&(e[r]=n),e}),{})},r.delay=function(e,t){return c(new(0,i.Timer)(e),t)},r.delayWithTimer=c,r.hasTimedOut=u,r.withTimeout=async function(e,t){const r=c("number"==typeof t?new(0,i.Timer)(t):t,u);try{return await Promise.race([e,r])}finally{r.cancel()}},r.getSnapFiles=d,r.fetchSnap=async function(e,t){try{const e=await t.manifest(),r=await t.fetch(e.result.source.location.npm.filePath),{iconPath:n}=e.result.source.location.npm,i=n?await t.fetch(n):void 0,s=await d(t,e.result.source.files);await Promise.all(s.map((async e=>{e.data.base64=await o.encodeBase64.call(void 0,e)})));const a=await d(t,e.result.source.locales),l={manifest:e,sourceCode:r,svgIcon:i,auxiliaryFiles:s,localizationFiles:o.getValidatedLocalizationFiles.call(void 0,a)};return await o.validateFetchedSnap.call(void 0,l),l}catch(t){throw new Error(`Failed to fetch snap "${e}": ${s.getErrorMessage.call(void 0,t)}.`)}}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-4DPX4O3T.js"}],[1784,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-4URGXJP7.js"}],[1785,{"@metamask/snaps-rpc-methods":1901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("@metamask/snaps-rpc-methods"),i=Object.freeze(["snap_dialog","snap_manageState","snap_notify","snap_getLocale",n.SnapEndowments.Cronjob,n.SnapEndowments.HomePage,n.SnapEndowments.LifecycleHooks,n.SnapEndowments.EthereumProvider,n.SnapEndowments.TransactionInsight,n.SnapEndowments.SignatureInsight]);r.ALLOWED_PERMISSIONS=i}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-5YBORD3A.js"}],[1786,{"./chunk-EXN2TFDJ.js":1794,"@metamask/post-message-stream":1560},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i,s,o,a=e("./chunk-EXN2TFDJ.js"),l=e("@metamask/post-message-stream"),c=class extends l.BasePostMessageStream{constructor({stream:e,jobId:t}){super(),a.__privateAdd.call(void 0,this,s),a.__privateAdd.call(void 0,this,n,void 0),a.__privateAdd.call(void 0,this,i,void 0),a.__privateSet.call(void 0,this,n,e),a.__privateSet.call(void 0,this,i,t),a.__privateGet.call(void 0,this,n).on("data",a.__privateMethod.call(void 0,this,s,o).bind(this))}_postMessage(e){a.__privateGet.call(void 0,this,n).write({jobId:a.__privateGet.call(void 0,this,i),data:e})}};n=new WeakMap,i=new WeakMap,s=new WeakSet,o=function(e){e.jobId===a.__privateGet.call(void 0,this,i)&&this.push(e.data)},r.ProxyPostMessageStream=c}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-7Y6P5FRN.js"}],[1787,{"./chunk-JZCXZEFV.js":1802,"@metamask/post-message-stream":1560,"@metamask/snaps-utils":1938},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-JZCXZEFV.js"),i=e("@metamask/post-message-stream"),s=e("@metamask/snaps-utils"),o=class extends n.AbstractExecutionService{constructor({iframeUrl:e,messenger:t,setupSnapProvider:r}){super({messenger:t,setupSnapProvider:r}),this.iframeUrl=e}terminateJob(e){document.getElementById(e.id)?.remove()}async initEnvStream(e){const t=await s.createWindow.call(void 0,this.iframeUrl.toString(),e);return{worker:t,stream:new(0,i.WindowPostMessageStream)({name:"parent",target:"child",targetWindow:t,targetOrigin:"*"})}}};r.IframeExecutionService=o}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-ABKWEVW4.js"}],[1788,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});r.RequestQueue=class{constructor(e){this.maxQueueSize=e,this.queueSizes=new Map}increment(e){const t=this.queueSizes.get(e)??0;if(t>=this.maxQueueSize)throw new Error("Maximum number of requests reached. Try again later.");this.queueSizes.set(e,t+1)}decrement(e){const t=this.queueSizes.get(e)??0;if(0===t)throw new Error(`Cannot decrement, ${e} does not have any outstanding requests.`);this.queueSizes.set(e,t-1)}get(e){return this.queueSizes.get(e)??0}}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-AP7CJ6DA.js"}],[1789,{"@metamask/utils":2021,"@xstate/fsm":2364},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("@metamask/utils"),i=e("@xstate/fsm");r.validateMachine=function(e){n.assert.call(void 0,"_options"in e,"The machine is not an @xstate/fsm machine");const t=e,r=new Set,i=e=>{return(t=e,Array.isArray(t)?t:null==t?[]:[t]).flatMap((e=>"string"==typeof e?[e]:(n.assert.call(void 0,"function"==typeof e),[]))).forEach(r.add.bind(r));var t};for(const e of Object.values(t.config.states)){i(e.entry),i(e.exit);for(const t of Object.values(e.on??{}))i(t.actions)}r.forEach((e=>n.assert.call(void 0,void 0!==t._options.actions&&e in t._options.actions,`Action "${e}" doesn't have an implementation`)))},r.forceStrict=function(e){let t=!1;e.subscribe((e=>{n.assert.call(void 0,!t||e.changed,"Invalid state transition"),t=!0}));const r=e.send.bind(e);e.send=(...t)=>(n.assert.call(void 0,e.status===i.InterpreterStatus.Running,"Interpreter is stopped"),r(...t))}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-BO2ZDPWV.js"}],[179,{"@metamask/utils":2021,lodash:3587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=s,t.data=function(e){if(!(0,i.hasProperty)(e,"PhishingController")||!(0,i.isObject)(e.PhishingController))return e;const{PhishingController:t}=e;return delete t.phishing,delete t.lastFetched,e}(t.data),t},r.version=void 0;var n=e("lodash"),i=e("@metamask/utils");const s=r.version=78}}},{package:"$root$",file:"app/scripts/migrations/078.ts"}],[1790,{"@metamask/utils":2021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("@metamask/utils");r.Timer=class{constructor(e){n.assert.call(void 0,!Number.isNaN(e),new TypeError("Can't start a timer with NaN time")),n.assert.call(void 0,e>=0,new TypeError("Can't start a timer with negative time")),this.state={value:"stopped",remaining:e}}get status(){return this.state.value}get remaining(){return this.state.remaining}cancel(){n.assert.call(void 0,"paused"===this.status||"running"===this.status,new Error("Tried to cancel a not running Timer")),this.onFinish(!1)}finish(){n.assert.call(void 0,"finished"!==this.status,new Error("Tried to finish a finished Timer.")),this.onFinish(!0)}pause(){n.assert.call(void 0,"running"===this.state.value,new Error("Tried to pause a not running Timer"));const{callback:e,start:t,timeout:r,remaining:i}=this.state;void 0!==r&&clearTimeout(r),this.state={value:"paused",callback:e,remaining:i-(Date.now()-t)}}start(e){n.assert.call(void 0,"stopped"===this.state.value,new Error("Tried to start an already running Timer"));const{remaining:t}=this.state;this.state={value:"paused",remaining:t,callback:e},this.resume()}resume(){n.assert.call(void 0,"paused"===this.state.value,new Error("Tried to resume not paused Timer"));const{remaining:e,callback:t}=this.state,r=Date.now();let i;e!==Number.POSITIVE_INFINITY&&(i=setTimeout((()=>this.onFinish(!0)),e)),this.state={value:"running",callback:t,remaining:e,start:r,timeout:i}}onFinish(e){n.assert.call(void 0,"running"===this.state.value||"paused"===this.state.value),"running"===this.state.value&&void 0!==this.state.timeout&&clearTimeout(this.state.timeout);const{callback:t,remaining:r}=this.state;this.state={value:"finished",remaining:"running"===this.state.value?r-(Date.now()-this.state.start):r},e&&t()}}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-BOFPNIRX.js"}],[1791,{"./chunk-EXN2TFDJ.js":1794,"@metamask/base-controller":1821,"@metamask/snaps-registry":1853,"@metamask/snaps-utils":1938,"@metamask/utils":2021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i,s,o,a,l,c,u,d,h,f,p,m,g,v,y,b,w,_,k,S,E,T,j,A,P,C=e("./chunk-EXN2TFDJ.js"),x=e("@metamask/base-controller"),O=e("@metamask/snaps-registry"),M=e("@metamask/snaps-utils"),B=e("@metamask/utils"),I={database:null,lastUpdated:null,databaseUnavailable:!1},R=class extends x.BaseController{constructor({messenger:e,state:t,url:r={registry:"https://acl.execution.metamask.io/latest/registry.json",signature:"https://acl.execution.metamask.io/latest/signature.json"},publicKey:u="0x025b65308f0f0fb8bc7f7ff87bfc296e0330eee5d3c1d1ee4a048b2fd6a86fa0a6",fetchFunction:p=globalThis.fetch.bind(globalThis),recentFetchThreshold:g=B.inMilliseconds.call(void 0,5,B.Duration.Minute),refetchOnAllowlistMiss:y=!0}){super({messenger:e,metadata:{database:{persist:!0,anonymous:!1},lastUpdated:{persist:!0,anonymous:!1},databaseUnavailable:{persist:!0,anonymous:!1}},name:"SnapsRegistry",state:{...I,...t}}),C.__privateAdd.call(void 0,this,c),C.__privateAdd.call(void 0,this,d),C.__privateAdd.call(void 0,this,f),C.__privateAdd.call(void 0,this,m),C.__privateAdd.call(void 0,this,v),C.__privateAdd.call(void 0,this,b),C.__privateAdd.call(void 0,this,_),C.__privateAdd.call(void 0,this,S),C.__privateAdd.call(void 0,this,T),C.__privateAdd.call(void 0,this,A),C.__privateAdd.call(void 0,this,n,void 0),C.__privateAdd.call(void 0,this,i,void 0),C.__privateAdd.call(void 0,this,s,void 0),C.__privateAdd.call(void 0,this,o,void 0),C.__privateAdd.call(void 0,this,a,void 0),C.__privateAdd.call(void 0,this,l,void 0),C.__privateSet.call(void 0,this,n,r),C.__privateSet.call(void 0,this,i,u),C.__privateSet.call(void 0,this,s,p),C.__privateSet.call(void 0,this,o,g),C.__privateSet.call(void 0,this,a,y),C.__privateSet.call(void 0,this,l,null),this.messagingSystem.registerActionHandler("SnapsRegistry:get",(async(...e)=>C.__privateMethod.call(void 0,this,b,w).call(this,...e))),this.messagingSystem.registerActionHandler("SnapsRegistry:getMetadata",(async(...e)=>C.__privateMethod.call(void 0,this,S,E).call(this,...e))),this.messagingSystem.registerActionHandler("SnapsRegistry:resolveVersion",(async(...e)=>C.__privateMethod.call(void 0,this,_,k).call(this,...e))),this.messagingSystem.registerActionHandler("SnapsRegistry:update",(async()=>C.__privateMethod.call(void 0,this,d,h).call(this)))}};n=new WeakMap,i=new WeakMap,s=new WeakMap,o=new WeakMap,a=new WeakMap,l=new WeakMap,c=new WeakSet,u=function(){return this.state.lastUpdated&&Date.now()-this.state.lastUpdated<C.__privateGet.call(void 0,this,o)},d=new WeakSet,h=async function(){C.__privateGet.call(void 0,this,l)?await C.__privateGet.call(void 0,this,l):(null===C.__privateGet.call(void 0,this,l)&&C.__privateSet.call(void 0,this,l,C.__privateMethod.call(void 0,this,f,p).call(this)),await C.__privateGet.call(void 0,this,l),C.__privateSet.call(void 0,this,l,null))},f=new WeakSet,p=async function(){if(!C.__privateMethod.call(void 0,this,c,u).call(this))try{const e=await C.__privateMethod.call(void 0,this,A,P).call(this,C.__privateGet.call(void 0,this,n).registry),t=await C.__privateMethod.call(void 0,this,A,P).call(this,C.__privateGet.call(void 0,this,n).signature);C.__privateMethod.call(void 0,this,T,j).call(this,e,t),this.update((t=>{t.database=JSON.parse(e),t.lastUpdated=Date.now(),t.databaseUnavailable=!1}))}catch{this.update((e=>{e.databaseUnavailable=!0}))}},m=new WeakSet,g=async function(){return null===this.state.database&&await C.__privateMethod.call(void 0,this,d,h).call(this),this.state.database},v=new WeakSet,y=async function(e,t,r=!1){const n=await C.__privateMethod.call(void 0,this,m,g).call(this),i=n?.blockedSnaps.find((r=>"id"in r?r.id===e&&B.satisfiesVersionRange.call(void 0,t.version,r.versionRange):r.checksum===t.checksum));if(i)return{status:1,reason:i.reason};const s=n?.verifiedSnaps[e],o=s?.versions?.[t.version];return o&&o.checksum===t.checksum?{status:2}:C.__privateGet.call(void 0,this,a)&&!r?(await C.__privateMethod.call(void 0,this,d,h).call(this),C.__privateMethod.call(void 0,this,v,y).call(this,e,t,!0)):{status:this.state.databaseUnavailable?3:0}},b=new WeakSet,w=async function(e){return Object.entries(e).reduce((async(e,[t,r])=>{const n=await C.__privateMethod.call(void 0,this,v,y).call(this,t,r),i=await e;return i[t]=n,i}),Promise.resolve({}))},_=new WeakSet,k=async function(e,t,r=!1){const n=await C.__privateMethod.call(void 0,this,m,g).call(this),i=n?.verifiedSnaps[e]?.versions??null;if(!i&&C.__privateGet.call(void 0,this,a)&&!r)return await C.__privateMethod.call(void 0,this,d,h).call(this),C.__privateMethod.call(void 0,this,_,k).call(this,e,t,!0);if(!i)return t;const s=M.getTargetVersion.call(void 0,Object.keys(i),t);return s||!C.__privateGet.call(void 0,this,a)||r?s?(B.assertIsSemVerRange.call(void 0,s),s):t:(await C.__privateMethod.call(void 0,this,d,h).call(this),C.__privateMethod.call(void 0,this,_,k).call(this,e,t,!0))},S=new WeakSet,E=async function(e){const t=await C.__privateMethod.call(void 0,this,m,g).call(this);return t?.verifiedSnaps[e]?.metadata??null},T=new WeakSet,j=function(e,t){B.assert.call(void 0,C.__privateGet.call(void 0,this,i),"No public key provided.");const r=O.verify.call(void 0,{registry:e,signature:JSON.parse(t),publicKey:C.__privateGet.call(void 0,this,i)});B.assert.call(void 0,r,"Invalid registry signature.")},A=new WeakSet,P=async function(e){const t=await C.__privateGet.call(void 0,this,s).call(this,e);if(!t.ok)throw new Error(`Failed to fetch ${e}.`);return await t.text()},r.JsonSnapsRegistry=R}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-CPUUURMT.js"}],[1792,{"./chunk-EXN2TFDJ.js":1794,"./chunk-M2NMZ4ER.js":1805,"@metamask/post-message-stream":1560},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i,s=e("./chunk-M2NMZ4ER.js"),o=e("./chunk-EXN2TFDJ.js"),a=e("@metamask/post-message-stream"),l=class extends s.ProxyExecutionService{constructor({documentUrl:e,messenger:t,setupSnapProvider:r}){super({messenger:t,setupSnapProvider:r,stream:new(0,a.BrowserRuntimePostMessageStream)({name:"parent",target:"child"})}),o.__privateAdd.call(void 0,this,n),this.documentUrl=e}async initEnvStream(e){return await o.__privateMethod.call(void 0,this,n,i).call(this),super.initEnvStream(e)}};n=new WeakSet,i=async function(){await chrome.offscreen.hasDocument()||await chrome.offscreen.createDocument({justification:"MetaMask Snaps Execution Environment",reasons:["IFRAME_SCRIPTING"],url:this.documentUrl.toString()})},r.OffscreenExecutionService=l}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-CXT7XBMN.js"}],[1793,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-D74XJG2L.js"}],[1794,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(t=>void 0!==e?e:"undefined"!=typeof Proxy?new Proxy(t,{get:(t,r)=>(void 0!==e?e:t)[r]}):t)((function(t){if(void 0!==e)return e.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')})),i=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__require=n,r.__privateGet=(e,t,r)=>(i(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,n)=>(i(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(i(e,t,"access private method"),r)}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-EXN2TFDJ.js"}],[1795,{"./chunk-7Y6P5FRN.js":1786,"./chunk-EXN2TFDJ.js":1794,"./chunk-JZCXZEFV.js":1802,"@metamask/post-message-stream":1560,"@metamask/snaps-utils":1938,"@metamask/utils":2021,nanoid:1831},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i,s=e("./chunk-JZCXZEFV.js"),o=e("./chunk-7Y6P5FRN.js"),a=e("./chunk-EXN2TFDJ.js"),l=e("@metamask/post-message-stream"),c=e("@metamask/snaps-utils"),u=e("@metamask/utils"),d=e("nanoid"),h="snaps-worker-pool",f=class extends s.AbstractExecutionService{constructor({documentUrl:e,messenger:t,setupSnapProvider:r}){super({messenger:t,setupSnapProvider:r}),a.__privateAdd.call(void 0,this,n,void 0),a.__privateAdd.call(void 0,this,i,void 0),a.__privateSet.call(void 0,this,n,e)}async terminateJob(e){u.assert.call(void 0,a.__privateGet.call(void 0,this,i),"Runtime stream not initialized."),a.__privateGet.call(void 0,this,i).write({jobId:e.id,data:{jsonrpc:"2.0",method:"terminateJob",id:d.nanoid.call(void 0)}})}async initEnvStream(e){await this.createDocument(),u.assert.call(void 0,a.__privateGet.call(void 0,this,i),"Runtime stream not initialized.");return{worker:e,stream:new(0,o.ProxyPostMessageStream)({stream:a.__privateGet.call(void 0,this,i),jobId:e})}}async createDocument(){if(document.getElementById(h))return;const e=await c.createWindow.call(void 0,a.__privateGet.call(void 0,this,n).href,h,!1);a.__privateSet.call(void 0,this,i,new(0,l.WindowPostMessageStream)({name:"parent",target:"child",targetWindow:e,targetOrigin:"*"}))}};n=new WeakMap,i=new WeakMap,r.WORKER_POOL_ID=h,r.WebWorkerExecutionService=f}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-FOT4VRMQ.js"}],[1796,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-G66GQJS6.js"}],[1797,{"./chunk-BOFPNIRX.js":1790,"./chunk-EXN2TFDJ.js":1794,"./chunk-YYPUPKQY.js":1814,"@metamask/base-controller":1821,"@metamask/snaps-rpc-methods":1901,"@metamask/snaps-utils":1938,"@metamask/utils":2021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i,s,o,a=e("./chunk-YYPUPKQY.js"),l=e("./chunk-BOFPNIRX.js"),c=e("./chunk-EXN2TFDJ.js"),u=e("@metamask/base-controller"),d=e("@metamask/snaps-rpc-methods"),h=e("@metamask/snaps-utils"),f=e("@metamask/utils"),p=f.inMilliseconds.call(void 0,24,f.Duration.Hour),m=class extends u.BaseController{constructor({messenger:e,state:t}){super({messenger:e,metadata:{jobs:{persist:!0,anonymous:!1}},name:"CronjobController",state:{jobs:{},...t}}),c.__privateAdd.call(void 0,this,n,void 0),c.__privateAdd.call(void 0,this,i,void 0),c.__privateAdd.call(void 0,this,s,void 0),c.__privateAdd.call(void 0,this,o,void 0),c.__privateSet.call(void 0,this,s,new Map),c.__privateSet.call(void 0,this,o,new Map),c.__privateSet.call(void 0,this,n,e),this._handleSnapRegisterEvent=this._handleSnapRegisterEvent.bind(this),this._handleSnapUnregisterEvent=this._handleSnapUnregisterEvent.bind(this),this._handleEventSnapUpdated=this._handleEventSnapUpdated.bind(this),this.messagingSystem.subscribe("SnapController:snapInstalled",this._handleSnapRegisterEvent),this.messagingSystem.subscribe("SnapController:snapUninstalled",this._handleSnapUnregisterEvent),this.messagingSystem.subscribe("SnapController:snapEnabled",this._handleSnapRegisterEvent),this.messagingSystem.subscribe("SnapController:snapDisabled",this._handleSnapUnregisterEvent),this.messagingSystem.subscribe("SnapController:snapUpdated",this._handleEventSnapUpdated),this.dailyCheckIn().catch((e=>{h.logError.call(void 0,e)}))}getAllJobs(){const e=this.messagingSystem.call("SnapController:getAll");return a.getRunnableSnaps.call(void 0,e).map((e=>this.getSnapJobs(e.id))).flat().filter((e=>void 0!==e))}getSnapJobs(e){const t=c.__privateGet.call(void 0,this,n).call("PermissionController:getPermissions",e),r=t?.[d.SnapEndowments.Cronjob],i=d.getCronjobCaveatJobs.call(void 0,r);return i?.map(((t,r)=>({...t,id:`${e}-${r}`,snapId:e})))}register(e){const t=this.getSnapJobs(e);t?.forEach((e=>this.schedule(e)))}schedule(e){if(c.__privateGet.call(void 0,this,s).has(e.id))return;const t=h.parseCronExpression.call(void 0,e.expression).next(),r=new Date,n=t.getTime()-r.getTime();if(n>p)return;const i=new(0,l.Timer)(n);i.start((()=>{this.executeCronjob(e).catch((e=>{h.logError.call(void 0,e)})),c.__privateGet.call(void 0,this,s).delete(e.id),this.schedule(e)})),this.state.jobs[e.id]?.lastRun||this.updateJobLastRunState(e.id,0),c.__privateGet.call(void 0,this,s).set(e.id,i),c.__privateGet.call(void 0,this,o).set(e.id,e.snapId)}async executeCronjob(e){this.updateJobLastRunState(e.id,Date.now()),await c.__privateGet.call(void 0,this,n).call("SnapController:handleRequest",{snapId:e.snapId,origin:"",handler:h.HandlerType.OnCronjob,request:e.request})}unregister(e){const t=[...c.__privateGet.call(void 0,this,o).entries()].filter((([t,r])=>r===e));t.length&&t.forEach((([e])=>{const t=c.__privateGet.call(void 0,this,s).get(e);t&&(t.cancel(),c.__privateGet.call(void 0,this,s).delete(e),c.__privateGet.call(void 0,this,o).delete(e))}))}updateJobLastRunState(e,t){this.update((r=>{r.jobs[e]={lastRun:t}}))}async dailyCheckIn(){const e=this.getAllJobs();for(const t of e){const e=h.parseCronExpression.call(void 0,t.expression),r=this.state.jobs[t.id]?.lastRun;void 0!==r&&e.hasPrev()&&e.prev().getTime()>r&&await this.executeCronjob(t),this.schedule(t)}c.__privateSet.call(void 0,this,i,new(0,l.Timer)(p)),c.__privateGet.call(void 0,this,i).start((()=>{this.dailyCheckIn().catch((e=>{h.logError.call(void 0,e)}))}))}destroy(){super.destroy(),this.messagingSystem.unsubscribe("SnapController:snapInstalled",this._handleSnapRegisterEvent),this.messagingSystem.unsubscribe("SnapController:snapUninstalled",this._handleSnapUnregisterEvent),this.messagingSystem.unsubscribe("SnapController:snapEnabled",this._handleSnapRegisterEvent),this.messagingSystem.unsubscribe("SnapController:snapDisabled",this._handleSnapUnregisterEvent),this.messagingSystem.unsubscribe("SnapController:snapUpdated",this._handleEventSnapUpdated),c.__privateGet.call(void 0,this,o).forEach((e=>{this.unregister(e)}))}_handleSnapRegisterEvent(e){this.register(e.id)}_handleSnapUnregisterEvent(e){this.unregister(e.id)}_handleEventSnapUpdated(e){this.unregister(e.id),this.register(e.id)}};n=new WeakMap,i=new WeakMap,s=new WeakMap,o=new WeakMap,r.DAILY_TIMEOUT=p,r.CronjobController=m}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-GRBWVPLF.js"}],[1798,{"./chunk-EXN2TFDJ.js":1794,"./chunk-KLK7ZRMH.js":1803,"@metamask/base-controller":1821,"@metamask/snaps-utils":1938,"@metamask/utils":2021,nanoid:1831},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i,s,o,a,l,c,u,d,h,f=e("./chunk-KLK7ZRMH.js"),p=e("./chunk-EXN2TFDJ.js"),m=e("@metamask/base-controller"),g=e("@metamask/snaps-utils"),v=e("@metamask/utils"),y=e("nanoid"),b=1e7,w="SnapInterfaceController",_=class extends m.BaseController{constructor({messenger:e,state:t}){super({messenger:e,metadata:{interfaces:{persist:!1,anonymous:!1}},name:w,state:{interfaces:{},...t}}),p.__privateAdd.call(void 0,this,n),p.__privateAdd.call(void 0,this,s),p.__privateAdd.call(void 0,this,a),p.__privateAdd.call(void 0,this,c),p.__privateAdd.call(void 0,this,d),p.__privateMethod.call(void 0,this,n,i).call(this)}async createInterface(e,t){await p.__privateMethod.call(void 0,this,d,h).call(this,t);const r=y.nanoid.call(void 0),n=f.constructState.call(void 0,{},t);return this.update((i=>{i.interfaces[r]={snapId:e,content:t,state:n}})),r}getInterface(e,t){return p.__privateMethod.call(void 0,this,s,o).call(this,e,t),this.state.interfaces[t]}async updateInterface(e,t,r){p.__privateMethod.call(void 0,this,s,o).call(this,e,t),await p.__privateMethod.call(void 0,this,d,h).call(this,r);const n=this.state.interfaces[t].state,i=f.constructState.call(void 0,n,r);this.update((e=>{e.interfaces[t].state=i,e.interfaces[t].content=r}))}deleteInterface(e){this.update((t=>{delete t.interfaces[e]}))}updateInterfaceState(e,t){this.update((r=>{r.interfaces[e].state=t}))}};n=new WeakSet,i=function(){this.messagingSystem.registerActionHandler(`${w}:createInterface`,this.createInterface.bind(this)),this.messagingSystem.registerActionHandler(`${w}:getInterface`,this.getInterface.bind(this)),this.messagingSystem.registerActionHandler(`${w}:updateInterface`,this.updateInterface.bind(this)),this.messagingSystem.registerActionHandler(`${w}:deleteInterface`,this.deleteInterface.bind(this)),this.messagingSystem.registerActionHandler(`${w}:updateInterfaceState`,this.updateInterfaceState.bind(this))},s=new WeakSet,o=function(e,t){const r=this.state.interfaces[t];v.assert.call(void 0,void 0!==r,`Interface with id '${t}' not found.`),v.assert.call(void 0,r.snapId===e,`Interface not created by ${e}.`)},a=new WeakSet,l=async function(){await this.messagingSystem.call("PhishingController:maybeUpdateState")},c=new WeakSet,u=function(e){return this.messagingSystem.call("PhishingController:testOrigin",e).result},d=new WeakSet,h=async function(e){const t=g.getJsonSizeUnsafe.call(void 0,e);v.assert.call(void 0,t<=b,"A Snap UI may not be larger than 10 MB.");const r=g.getTotalTextLength.call(void 0,e);v.assert.call(void 0,r<=5e4,"The text in a Snap UI may not be larger than 50 kB."),await p.__privateMethod.call(void 0,this,a,l).call(this),g.validateComponentLinks.call(void 0,e,p.__privateMethod.call(void 0,this,c,u).bind(this))},r.SnapInterfaceController=_}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-GZ3RVSUA.js"}],[1799,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-HOY6NKQR.js"}],[18,{"../../../../shared/constants/permissions":4308,nanoid:3680},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getPermissionBackgroundApiMethods=function(e){return{addPermittedAccount:(t,r)=>{const{value:n}=e.getCaveat(t,s.RestrictedMethods.eth_accounts,s.CaveatTypes.restrictReturnedAccounts);n.includes(r)||e.updateCaveat(t,s.RestrictedMethods.eth_accounts,s.CaveatTypes.restrictReturnedAccounts,[...n,r])},addMorePermittedAccounts:(t,r)=>{const{value:n}=e.getCaveat(t,s.RestrictedMethods.eth_accounts,s.CaveatTypes.restrictReturnedAccounts),i=Array.from(new Set([...n,...r]));i.length!==n.length&&e.updateCaveat(t,s.RestrictedMethods.eth_accounts,s.CaveatTypes.restrictReturnedAccounts,i)},removePermittedAccount:(t,r)=>{const{value:n}=e.getCaveat(t,s.RestrictedMethods.eth_accounts,s.CaveatTypes.restrictReturnedAccounts),i=n.filter((e=>e!==r));i.length!==n.length&&(0===i.length?e.revokePermission(t,s.RestrictedMethods.eth_accounts):e.updateCaveat(t,s.RestrictedMethods.eth_accounts,s.CaveatTypes.restrictReturnedAccounts,i))},requestAccountsPermissionWithId:async t=>{const r=(0,i.default)();return e.requestPermissions({origin:t},{eth_accounts:{}},{id:r}),r}}};var n,i=(n=e("nanoid"))&&n.__esModule?n:{default:n},s=e("../../../../shared/constants/permissions")}}},{package:"$root$",file:"app/scripts/controllers/permissions/background-api.js"}],[180,{lodash:3587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:79,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=79;const r=function(e){var t,r;(null==e||null===(t=e.AppStateController)||void 0===t?void 0:t.collectiblesDetectionNoticeDismissed)!==undefined&&delete e.AppStateController.collectiblesDetectionNoticeDismissed;(null==e||null===(r=e.metamask)||void 0===r?void 0:r.collectiblesDropdownState)!==undefined&&delete e.metamask.collectiblesDropdownState;return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/079.js"}],[1800,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-JAUAKTUL.js"}],[1801,{"./chunk-4DPX4O3T.js":1783,"./chunk-5YBORD3A.js":1785,"./chunk-AP7CJ6DA.js":1788,"./chunk-BO2ZDPWV.js":1789,"./chunk-BOFPNIRX.js":1790,"./chunk-EXN2TFDJ.js":1794,"./chunk-NXZVKBSV.js":1806,"./chunk-PT22IXNS.js":1809,"@metamask/base-controller":1821,"@metamask/permission-controller":1519,"@metamask/rpc-errors":1621,"@metamask/snaps-rpc-methods":1901,"@metamask/snaps-sdk":1902,"@metamask/snaps-utils":1938,"@metamask/utils":2021,"@xstate/fsm":2364,nanoid:1831},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-PT22IXNS.js"),i=e("./chunk-AP7CJ6DA.js"),s=e("./chunk-5YBORD3A.js"),o=e("./chunk-BO2ZDPWV.js"),a=e("./chunk-NXZVKBSV.js"),l=e("./chunk-4DPX4O3T.js"),c=e("./chunk-BOFPNIRX.js"),u=e("./chunk-EXN2TFDJ.js"),d=e("@metamask/base-controller"),h=e("@metamask/permission-controller"),f=e("@metamask/rpc-errors"),p=e("@metamask/snaps-rpc-methods"),m=e("@metamask/snaps-sdk"),g=e("@metamask/snaps-utils"),v=e("@metamask/utils"),y=e("@xstate/fsm"),b=e("nanoid"),w="SnapController",_="wallet_installSnap",k="wallet_updateSnap",S="wallet_installSnapResult",E=new Set(["initialPermissions","id","version","enabled","blocked"]),T={snaps:{},snapStates:{},unencryptedSnapStates:{}};function j(e){return Object.keys(e).reduce(((t,r)=>(E.has(r)&&(t[r]=e[r]),t)),{})}var A,P,C,x,O,M,B,I,R,N,L,D,F,U,G,H,W,$,q,V,K,Y,z,Z,J,X,Q,ee,te,re,ne,ie,se,oe,ae,le,ce,ue,de,he,fe,pe,me,ge,ve,ye,be,we,_e,ke,Se,Ee,Te,je,Ae,Pe,Ce,xe,Oe,Me,Be,Ie,Re,Ne,Le,De,Fe,Ue,Ge,He,We,$e,qe,Ve,Ke,Ye,ze,Ze,Je,Xe,Qe,et,tt,rt,nt,it,st,ot,at,lt,ct,ut,dt,ht,ft,pt,mt,gt,vt,yt,bt,wt,_t,kt=class extends d.BaseController{constructor({closeAllConnections:e,messenger:t,state:r,dynamicPermissions:i=["eth_accounts"],environmentEndowmentPermissions:s=[],excludedPermissions:o={},idleTimeCheckInterval:a=v.inMilliseconds.call(void 0,5,v.Duration.Second),maxIdleTime:l=v.inMilliseconds.call(void 0,30,v.Duration.Second),maxRequestTime:c=v.inMilliseconds.call(void 0,60,v.Duration.Second),fetchFunction:d=globalThis.fetch.bind(globalThis),featureFlags:h={},detectSnapLocation:f=n.detectSnapLocation,preinstalledSnaps:p,encryptor:y,getMnemonic:b}){super({messenger:t,metadata:{snapStates:{persist:!0,anonymous:!1},unencryptedSnapStates:{persist:!0,anonymous:!1},snaps:{persist:e=>Object.values(e).filter((e=>e.status!==g.SnapStatus.Installing)).map((e=>({...e,status:g.SnapStatus.Stopped}))).reduce(((e,t)=>(e[t.id]=t,e)),{}),anonymous:!1}},name:"SnapController",state:{...T,...r}}),u.__privateAdd.call(void 0,this,H),u.__privateAdd.call(void 0,this,$),u.__privateAdd.call(void 0,this,V),u.__privateAdd.call(void 0,this,Y),u.__privateAdd.call(void 0,this,Z),u.__privateAdd.call(void 0,this,X),u.__privateAdd.call(void 0,this,ee),u.__privateAdd.call(void 0,this,re),u.__privateAdd.call(void 0,this,ie),u.__privateAdd.call(void 0,this,oe),u.__privateAdd.call(void 0,this,le),u.__privateAdd.call(void 0,this,ue),u.__privateAdd.call(void 0,this,he),u.__privateAdd.call(void 0,this,pe),u.__privateAdd.call(void 0,this,ge),u.__privateAdd.call(void 0,this,ye),u.__privateAdd.call(void 0,this,we),u.__privateAdd.call(void 0,this,ke),u.__privateAdd.call(void 0,this,Ee),u.__privateAdd.call(void 0,this,je),u.__privateAdd.call(void 0,this,Pe),u.__privateAdd.call(void 0,this,xe),u.__privateAdd.call(void 0,this,Me),u.__privateAdd.call(void 0,this,Ie),u.__privateAdd.call(void 0,this,Ne),u.__privateAdd.call(void 0,this,De),u.__privateAdd.call(void 0,this,Ue),u.__privateAdd.call(void 0,this,He),u.__privateAdd.call(void 0,this,$e),u.__privateAdd.call(void 0,this,Ve),u.__privateAdd.call(void 0,this,Ye),u.__privateAdd.call(void 0,this,Ze),u.__privateAdd.call(void 0,this,Xe),u.__privateAdd.call(void 0,this,et),u.__privateAdd.call(void 0,this,rt),u.__privateAdd.call(void 0,this,it),u.__privateAdd.call(void 0,this,ot),u.__privateAdd.call(void 0,this,lt),u.__privateAdd.call(void 0,this,ut),u.__privateAdd.call(void 0,this,ht),u.__privateAdd.call(void 0,this,pt),u.__privateAdd.call(void 0,this,gt),u.__privateAdd.call(void 0,this,yt),u.__privateAdd.call(void 0,this,wt),u.__privateAdd.call(void 0,this,A,void 0),u.__privateAdd.call(void 0,this,P,void 0),u.__privateAdd.call(void 0,this,C,void 0),u.__privateAdd.call(void 0,this,x,void 0),u.__privateAdd.call(void 0,this,O,void 0),u.__privateAdd.call(void 0,this,M,void 0),u.__privateAdd.call(void 0,this,B,void 0),u.__privateAdd.call(void 0,this,I,void 0),u.__privateAdd.call(void 0,this,R,void 0),u.__privateAdd.call(void 0,this,N,void 0),u.__privateAdd.call(void 0,this,L,void 0),u.__privateAdd.call(void 0,this,D,void 0),u.__privateAdd.call(void 0,this,F,void 0),u.__privateAdd.call(void 0,this,U,void 0),u.__privateAdd.call(void 0,this,G,void 0),u.__privateSet.call(void 0,this,A,e),u.__privateSet.call(void 0,this,P,i),u.__privateSet.call(void 0,this,C,s),u.__privateSet.call(void 0,this,x,o),u.__privateSet.call(void 0,this,O,h),u.__privateSet.call(void 0,this,M,d),u.__privateSet.call(void 0,this,B,a),u.__privateSet.call(void 0,this,I,l),this.maxRequestTime=c,u.__privateSet.call(void 0,this,L,f),u.__privateSet.call(void 0,this,R,y),u.__privateSet.call(void 0,this,N,b),this._onUnhandledSnapError=this._onUnhandledSnapError.bind(this),this._onOutboundRequest=this._onOutboundRequest.bind(this),this._onOutboundResponse=this._onOutboundResponse.bind(this),u.__privateSet.call(void 0,this,F,new Map),u.__privateSet.call(void 0,this,D,new Map),u.__privateMethod.call(void 0,this,Y,z).call(this),this.messagingSystem.subscribe("ExecutionService:unhandledError",this._onUnhandledSnapError),this.messagingSystem.subscribe("ExecutionService:outboundRequest",this._onOutboundRequest),this.messagingSystem.subscribe("ExecutionService:outboundResponse",this._onOutboundResponse),this.messagingSystem.subscribe("SnapController:snapInstalled",(({id:e})=>{u.__privateMethod.call(void 0,this,wt,_t).call(this,e,g.HandlerType.OnInstall).catch((t=>{g.logError.call(void 0,`Error when calling \`onInstall\` lifecycle hook for snap "${e}": ${m.getErrorMessage.call(void 0,t)}`)}))})),this.messagingSystem.subscribe("SnapController:snapUpdated",(({id:e})=>{u.__privateMethod.call(void 0,this,wt,_t).call(this,e,g.HandlerType.OnUpdate).catch((t=>{g.logError.call(void 0,`Error when calling \`onUpdate\` lifecycle hook for snap "${e}": ${m.getErrorMessage.call(void 0,t)}`)}))})),u.__privateMethod.call(void 0,this,H,W).call(this),u.__privateMethod.call(void 0,this,$,q).call(this),p&&u.__privateMethod.call(void 0,this,V,K).call(this,p),Object.values(this.state?.snaps??{}).forEach((e=>u.__privateMethod.call(void 0,this,ht,ft).call(this,e.id)))}async updateBlockedSnaps(){await this.messagingSystem.call("SnapsRegistry:update");const e=await this.messagingSystem.call("SnapsRegistry:get",Object.values(this.state.snaps).reduce(((e,t)=>(e[t.id]={version:t.version,checksum:t.manifest.source.shasum},e)),{}));await Promise.all(Object.entries(e).map((async([e,{status:t,reason:r}])=>1===t?u.__privateMethod.call(void 0,this,Z,J).call(this,e,r):u.__privateMethod.call(void 0,this,X,Q).call(this,e))))}_onUnhandledSnapError(e,t){this.stopSnap(e,g.SnapStatusEvents.Crash).catch((e=>{g.logError.call(void 0,e)}))}_onOutboundRequest(e){const t=u.__privateMethod.call(void 0,this,ut,dt).call(this,e);t.pendingInboundRequests.filter((e=>"running"===e.timer.status)).forEach((e=>e.timer.pause())),t.pendingOutboundRequests+=1}_onOutboundResponse(e){const t=u.__privateMethod.call(void 0,this,ut,dt).call(this,e);t.pendingOutboundRequests-=1,0===t.pendingOutboundRequests&&t.pendingInboundRequests.filter((e=>"paused"===e.timer.status)).forEach((e=>e.timer.resume()))}async startSnap(e){const t=this.state.snaps[e];if(!1===t.enabled)throw new Error(`Snap "${e}" is disabled.`);await u.__privateMethod.call(void 0,this,xe,Oe).call(this,{snapId:e,sourceCode:t.sourceCode})}enableSnap(e){if(this.getExpect(e),this.state.snaps[e].blocked)throw new Error(`Snap "${e}" is blocked and cannot be enabled.`);this.update((t=>{t.snaps[e].enabled=!0})),this.messagingSystem.publish("SnapController:snapEnabled",this.getTruncatedExpect(e))}async disableSnap(e){if(!this.has(e))throw new Error(`Snap "${e}" not found.`);this.update((t=>{t.snaps[e].enabled=!1})),this.isRunning(e)&&await this.stopSnap(e,g.SnapStatusEvents.Stop),this.messagingSystem.publish("SnapController:snapDisabled",this.getTruncatedExpect(e))}async stopSnap(e,t=g.SnapStatusEvents.Stop){var r;const n=u.__privateMethod.call(void 0,this,lt,ct).call(this,e);if(!n)throw new Error(`The snap "${e}" is not running.`);if(!n.stopping){n.stopping=!0;try{this.isRunning(e)&&(null==(r=u.__privateGet.call(void 0,this,A))||r.call(this,e),await u.__privateMethod.call(void 0,this,oe,ae).call(this,e))}finally{n.lastRequest=null,n.pendingInboundRequests=[],n.pendingOutboundRequests=0,n.stopping=!1,this.isRunning(e)&&u.__privateMethod.call(void 0,this,ie,se).call(this,e,t)}}}isRunning(e){return"running"===this.getExpect(e).status}has(e){return Boolean(this.get(e))}get(e){return this.state.snaps[e]}getExpect(e){const t=this.get(e);return v.assert.call(void 0,void 0!==t,new Error(`Snap "${e}" not found.`)),t}getTruncated(e){const t=this.get(e);return t?j(t):null}getTruncatedExpect(e){return j(this.getExpect(e))}async updateSnapState(e,t,r){if(r){const r=await u.__privateMethod.call(void 0,this,he,fe).call(this,e,t);this.update((t=>{t.snapStates[e]=r}))}else this.update((r=>{r.unencryptedSnapStates[e]=JSON.stringify(t)}))}clearSnapState(e,t){this.update((r=>{t?r.snapStates[e]=null:r.unencryptedSnapStates[e]=null}))}async getSnapState(e,t){const r=t?this.state.snapStates[e]:this.state.unencryptedSnapStates[e];if(null==r)return null;if(!t)return g.parseJson.call(void 0,r);return await u.__privateMethod.call(void 0,this,ue,de).call(this,e,r)}async getSnapFile(e,t,r=m.AuxiliaryFileEncoding.Base64){const n=this.getExpect(e),i=g.normalizeRelative.call(void 0,t),s=n.auxiliaryFiles?.find((e=>e.path===i))?.value;return s?g.encodeAuxiliaryFile.call(void 0,s,r):null}async clearState(){const e=Object.keys(this.state.snaps);u.__privateGet.call(void 0,this,A)&&e.forEach((e=>{var t;null==(t=u.__privateGet.call(void 0,this,A))||t.call(this,e)})),await this.messagingSystem.call("ExecutionService:terminateAllSnaps"),e.forEach((e=>u.__privateMethod.call(void 0,this,we,_e).call(this,e))),this.update((e=>{e.snaps={},e.snapStates={}}))}async removeSnap(e){return this.removeSnaps([e])}async removeSnaps(e){if(!Array.isArray(e))throw new Error("Expected array of snap ids.");e.forEach((e=>{const t=this.getExpect(e);v.assert.call(void 0,!1!==t.removable,`${e} is not removable.`)})),await Promise.all(e.map((async e=>{const t=this.getExpect(e),r=this.getTruncatedExpect(e);await this.disableSnap(e),u.__privateMethod.call(void 0,this,we,_e).call(this,e),u.__privateMethod.call(void 0,this,ye,be).call(this,e),u.__privateGet.call(void 0,this,D).delete(e),this.update((t=>{delete t.snaps[e],delete t.snapStates[e],delete t.unencryptedSnapStates[e]})),t.status!==g.SnapStatus.Installing&&this.messagingSystem.publish("SnapController:snapUninstalled",r)})))}removeSnapFromSubject(e,t){const r=this.messagingSystem.call("PermissionController:getPermissions",e),n=r?.[p.WALLET_SNAP_PERMISSION_KEY]?.caveats?.find((e=>e.type===g.SnapCaveatType.SnapIds));if(!n)return;if(Boolean(n.value?.[t])){const r={...n.value};delete r[t],Object.keys(r).length>0?this.messagingSystem.call("PermissionController:updateCaveat",e,p.WALLET_SNAP_PERMISSION_KEY,g.SnapCaveatType.SnapIds,r):this.messagingSystem.call("PermissionController:revokePermissions",{[e]:[p.WALLET_SNAP_PERMISSION_KEY]})}}revokeDynamicSnapPermissions(e,t){v.assert.call(void 0,t.every((e=>u.__privateGet.call(void 0,this,P).includes(e))),"Non-dynamic permissions cannot be revoked"),this.messagingSystem.call("PermissionController:revokePermissions",{[e]:t})}incrementActiveReferences(e){u.__privateMethod.call(void 0,this,ut,dt).call(this,e).activeReferences+=1}decrementActiveReferences(e){const t=u.__privateMethod.call(void 0,this,ut,dt).call(this,e);v.assert.call(void 0,t.activeReferences>0,"SnapController reference management is in an invalid state."),t.activeReferences-=1}getAllSnaps(){return Object.values(this.state.snaps).map(j)}getPermittedSnaps(e){const t=this.messagingSystem.call("PermissionController:getPermissions",e)??{},r=t[p.WALLET_SNAP_PERMISSION_KEY]?.caveats?.find((e=>e.type===g.SnapCaveatType.SnapIds))?.value??{};return Object.keys(r).reduce(((e,t)=>{const r=this.get(t),n=this.getTruncated(t);return n&&r?.status!==g.SnapStatus.Installing&&(e[t]=n),e}),{})}async installSnaps(e,t){const r={},n=Object.keys(t),i=[],s=[];try{for(const[n,{version:o}]of Object.entries(t)){g.assertIsValidSnapId.call(void 0,n);const[t,a]=g.resolveVersionRange.call(void 0,o);if(t)throw f.rpcErrors.invalidParams(`The "version" field must be a valid SemVer version range if specified. Received: "${o}".`);const l=u.__privateGet.call(void 0,this,L).call(this,n,{versionRange:a,fetch:u.__privateGet.call(void 0,this,M),allowLocal:u.__privateGet.call(void 0,this,O).allowLocalSnaps,resolveVersion:async e=>u.__privateGet.call(void 0,this,O).requireAllowlist?await u.__privateMethod.call(void 0,this,je,Ae).call(this,n,e):e}),c=this.has(n)&&!l.shouldAlwaysReload;if(c&&u.__privateMethod.call(void 0,this,yt,bt).call(this,n,a)){const e=this.getExpect(n);i.push({snapId:n,oldVersion:e.version});let t=u.__privateMethod.call(void 0,this,et,tt).call(this,n);if(void 0!==t)throw new Error("This snap is already being updated.");t=u.__privateMethod.call(void 0,this,rt,nt).call(this,n),t.newVersion=a}else c||s.push(n);r[n]=await this.processRequestedSnap(e,n,l,a)}s.forEach((t=>this.messagingSystem.publish("SnapController:snapInstalled",this.getTruncatedExpect(t),e))),i.forEach((({snapId:t,oldVersion:r})=>this.messagingSystem.publish("SnapController:snapUpdated",this.getTruncatedExpect(t),r,e))),n.forEach((e=>u.__privateGet.call(void 0,this,F).delete(e)))}catch(e){const t=s.filter((e=>this.has(e)));await this.removeSnaps(t);const r=[...u.__privateGet.call(void 0,this,F).keys()],n=i.map((({snapId:e})=>e)).filter((e=>r.includes(e)));throw await u.__privateMethod.call(void 0,this,ot,at).call(this,n),e}return r}async processRequestedSnap(e,t,r,n){const i=this.getTruncated(t);if(i&&!r.shouldAlwaysReload)return v.satisfiesVersionRange.call(void 0,i.version,n)?i:await this.updateSnap(e,t,r,n,!1);let s=u.__privateMethod.call(void 0,this,ke,Se).call(this,{origin:e,snapId:t,type:_});this.messagingSystem.publish("SnapController:snapInstallStarted",t,e,!1),i&&this.isRunning(t)&&await this.stopSnap(t,g.SnapStatusEvents.Stop),i&&r.shouldAlwaysReload&&u.__privateMethod.call(void 0,this,we,_e).call(this,t);try{const{sourceCode:i}=await u.__privateMethod.call(void 0,this,Pe,Ce).call(this,{origin:e,id:t,location:r,versionRange:n});await this.authorize(t,s),s=u.__privateMethod.call(void 0,this,ke,Se).call(this,{origin:e,snapId:t,type:S}),await u.__privateMethod.call(void 0,this,xe,Oe).call(this,{snapId:t,sourceCode:i});const o=this.getTruncatedExpect(t);return u.__privateMethod.call(void 0,this,Ee,Te).call(this,s.id,{loading:!1,type:_}),o}catch(r){g.logError.call(void 0,`Error when adding ${t}.`,r);const n=r instanceof Error?r.message:r.toString();throw u.__privateMethod.call(void 0,this,Ee,Te).call(this,s.id,{loading:!1,type:_,error:n}),this.messagingSystem.publish("SnapController:snapInstallFailed",t,e,!1,n),r}}async updateSnap(e,t,r,n=g.DEFAULT_REQUESTED_SNAP_VERSION,i=!0){if(!v.isValidSemVerRange.call(void 0,n))throw new Error(`Received invalid snap version range: "${n}".`);let s=u.__privateMethod.call(void 0,this,ke,Se).call(this,{origin:e,snapId:t,type:k});try{this.messagingSystem.publish("SnapController:snapInstallStarted",t,e,!0);const o=this.getExpect(t),a=o.manifest,c=await l.fetchSnap.call(void 0,t,r),{sourceCode:d,manifest:h}=c,m=h.result,y=m.version;if(!v.gtVersion.call(void 0,y,o.version))throw f.rpcErrors.invalidParams(`Snap "${t}@${o.version}" is already installed. Couldn't update to a version inside requested "${n}" range.`);if(!v.satisfiesVersionRange.call(void 0,y,n))throw new Error(`Version mismatch. Manifest for "${t}" specifies version "${y}" which doesn't satisfy requested version range "${n}".`);await u.__privateMethod.call(void 0,this,ee,te).call(this,t,{version:y,checksum:m.source.shasum,permissions:m.initialPermissions});const b=p.processSnapPermissions.call(void 0,m.initialPermissions);u.__privateMethod.call(void 0,this,Ne,Le).call(this,b);const{newPermissions:w,unusedPermissions:_,approvedPermissions:E}=u.__privateMethod.call(void 0,this,pt,mt).call(this,t,b);u.__privateMethod.call(void 0,this,Ee,Te).call(this,s.id,{connections:m.initialConnections??{},permissions:w,newVersion:m.version,newPermissions:w,approvedPermissions:E,unusedPermissions:_,loading:!1});const{permissions:T,...j}=await s.promise;s=u.__privateMethod.call(void 0,this,ke,Se).call(this,{origin:e,snapId:t,type:S}),this.isRunning(t)&&await this.stopSnap(t,g.SnapStatusEvents.Stop),u.__privateMethod.call(void 0,this,ie,se).call(this,t,g.SnapStatusEvents.Update),u.__privateMethod.call(void 0,this,Ie,Re).call(this,{origin:e,id:t,files:c,isUpdate:!0}),u.__privateMethod.call(void 0,this,gt,vt).call(this,{snapId:t,unusedPermissions:_,newPermissions:T,requestData:j}),m.initialConnections&&u.__privateMethod.call(void 0,this,pe,me).call(this,t,a.initialConnections??null,m.initialConnections);const A=u.__privateMethod.call(void 0,this,et,tt).call(this,t);void 0!==A&&(A.permissions.revoked=_,A.permissions.granted=T,A.permissions.requestData=j);const P=d.toString();v.assert.call(void 0,"string"==typeof P&&P.length>0,`Invalid source code for snap "${t}".`);try{await u.__privateMethod.call(void 0,this,xe,Oe).call(this,{snapId:t,sourceCode:P})}catch{throw new Error(`Snap ${t} crashed with updated source code.`)}const C=this.getTruncatedExpect(t);return i&&this.messagingSystem.publish("SnapController:snapUpdated",C,o.version,e),u.__privateMethod.call(void 0,this,Ee,Te).call(this,s.id,{loading:!1,type:k}),C}catch(r){g.logError.call(void 0,`Error when updating ${t},`,r);const n=r instanceof Error?r.message:r.toString();throw u.__privateMethod.call(void 0,this,Ee,Te).call(this,s.id,{loading:!1,error:n,type:k}),this.messagingSystem.publish("SnapController:snapInstallFailed",t,e,!0,n),r}}async getRegistryMetadata(e){return await this.messagingSystem.call("SnapsRegistry:getMetadata",e)}async authorize(e,t){a.log.call(void 0,`Authorizing snap: ${e}`);const r=this.state.snaps[e],{initialPermissions:n,initialConnections:i}=r;try{const s=p.processSnapPermissions.call(void 0,n);u.__privateMethod.call(void 0,this,Ne,Le).call(this,s),u.__privateMethod.call(void 0,this,Ee,Te).call(this,t.id,{loading:!1,connections:i??{},permissions:s});const{permissions:o,...a}=await t.promise;u.__privateMethod.call(void 0,this,gt,vt).call(this,{snapId:e,newPermissions:o,requestData:a}),r.manifest.initialConnections&&u.__privateMethod.call(void 0,this,pe,me).call(this,e,null,r.manifest.initialConnections)}finally{u.__privateMethod.call(void 0,this,ut,dt).call(this,e).installPromise=null}}destroy(){super.destroy(),u.__privateGet.call(void 0,this,U)&&clearTimeout(u.__privateGet.call(void 0,this,U)),this.messagingSystem.unsubscribe("ExecutionService:unhandledError",this._onUnhandledSnapError),this.messagingSystem.unsubscribe("ExecutionService:outboundRequest",this._onOutboundRequest),this.messagingSystem.unsubscribe("ExecutionService:outboundResponse",this._onOutboundResponse),this.messagingSystem.clearEventSubscriptions("SnapController:snapInstalled"),this.messagingSystem.clearEventSubscriptions("SnapController:snapUpdated")}async handleRequest({snapId:e,origin:t,handler:r,request:n}){const i={jsonrpc:"2.0",id:b.nanoid.call(void 0),...n};v.assertIsJsonRpcRequest.call(void 0,i);const s=p.handlerEndowments[r];v.assert.call(void 0,"string"==typeof s||null===s,"'permissionName' must be either a string or null.");const o=this.messagingSystem.call("PermissionController:getPermissions",e);if(!(null===s||o&&v.hasProperty.call(void 0,o,s)))throw new Error(`Snap "${e}" is not permitted to use "${s}".`);const a=s?o[s]:void 0;if(s===p.SnapEndowments.Rpc||s===p.SnapEndowments.Keyring){v.assert.call(void 0,a);const r=this.messagingSystem.call("SubjectMetadataController:getSubjectMetadata",t),n=s===p.SnapEndowments.Rpc?p.getRpcCaveatOrigins.call(void 0,a):p.getKeyringCaveatOrigins.call(void 0,a);if(v.assert.call(void 0,n),!g.isOriginAllowed.call(void 0,n,r?.subjectType??h.SubjectType.Website,t))throw new Error(`Snap "${e}" is not permitted to handle requests from "${t}".`)}const l=u.__privateMethod.call(void 0,this,Ue,Ge).call(this,e);if(!l)throw new Error(`Snap RPC message handler not found for snap "${e}".`);return l({origin:t,handler:r,request:i,timeout:u.__privateMethod.call(void 0,this,De,Fe).call(this,a)})}};A=new WeakMap,P=new WeakMap,C=new WeakMap,x=new WeakMap,O=new WeakMap,M=new WeakMap,B=new WeakMap,I=new WeakMap,R=new WeakMap,N=new WeakMap,L=new WeakMap,D=new WeakMap,F=new WeakMap,U=new WeakMap,G=new WeakMap,H=new WeakSet,W=function(){const e=({snapId:e})=>this.getExpect(e).enabled,t={initial:g.SnapStatus.Installing,states:{[g.SnapStatus.Installing]:{on:{[g.SnapStatusEvents.Start]:{target:g.SnapStatus.Running,cond:e}}},[g.SnapStatus.Updating]:{on:{[g.SnapStatusEvents.Start]:{target:g.SnapStatus.Running,cond:e},[g.SnapStatusEvents.Stop]:g.SnapStatus.Stopped}},[g.SnapStatus.Running]:{on:{[g.SnapStatusEvents.Stop]:g.SnapStatus.Stopped,[g.SnapStatusEvents.Crash]:g.SnapStatus.Crashed}},[g.SnapStatus.Stopped]:{on:{[g.SnapStatusEvents.Start]:{target:g.SnapStatus.Running,cond:e},[g.SnapStatusEvents.Update]:g.SnapStatus.Updating}},[g.SnapStatus.Crashed]:{on:{[g.SnapStatusEvents.Start]:{target:g.SnapStatus.Running,cond:e},[g.SnapStatusEvents.Update]:g.SnapStatus.Updating}}}};u.__privateSet.call(void 0,this,G,y.createMachine.call(void 0,t)),o.validateMachine.call(void 0,u.__privateGet.call(void 0,this,G))},$=new WeakSet,q=function(){this.messagingSystem.registerActionHandler(`${w}:clearSnapState`,((...e)=>this.clearSnapState(...e))),this.messagingSystem.registerActionHandler(`${w}:get`,((...e)=>this.get(...e))),this.messagingSystem.registerActionHandler(`${w}:getSnapState`,(async(...e)=>this.getSnapState(...e))),this.messagingSystem.registerActionHandler(`${w}:handleRequest`,(async(...e)=>this.handleRequest(...e))),this.messagingSystem.registerActionHandler(`${w}:has`,((...e)=>this.has(...e))),this.messagingSystem.registerActionHandler(`${w}:updateBlockedSnaps`,(async()=>this.updateBlockedSnaps())),this.messagingSystem.registerActionHandler(`${w}:updateSnapState`,(async(...e)=>this.updateSnapState(...e))),this.messagingSystem.registerActionHandler(`${w}:enable`,((...e)=>this.enableSnap(...e))),this.messagingSystem.registerActionHandler(`${w}:disable`,(async(...e)=>this.disableSnap(...e))),this.messagingSystem.registerActionHandler(`${w}:remove`,(async(...e)=>this.removeSnap(...e))),this.messagingSystem.registerActionHandler(`${w}:getPermitted`,((...e)=>this.getPermittedSnaps(...e))),this.messagingSystem.registerActionHandler(`${w}:install`,(async(...e)=>this.installSnaps(...e))),this.messagingSystem.registerActionHandler(`${w}:getAll`,((...e)=>this.getAllSnaps(...e))),this.messagingSystem.registerActionHandler(`${w}:incrementActiveReferences`,((...e)=>this.incrementActiveReferences(...e))),this.messagingSystem.registerActionHandler(`${w}:decrementActiveReferences`,((...e)=>this.decrementActiveReferences(...e))),this.messagingSystem.registerActionHandler(`${w}:getRegistryMetadata`,(async(...e)=>this.getRegistryMetadata(...e))),this.messagingSystem.registerActionHandler(`${w}:disconnectOrigin`,((...e)=>this.removeSnapFromSubject(...e))),this.messagingSystem.registerActionHandler(`${w}:revokeDynamicPermissions`,((...e)=>this.revokeDynamicSnapPermissions(...e))),this.messagingSystem.registerActionHandler(`${w}:getFile`,(async(...e)=>this.getSnapFile(...e)))},V=new WeakSet,K=function(e){for(const{snapId:t,manifest:r,files:n,removable:i}of e){const e=this.get(t),s=void 0!==e,o=s&&v.gtVersion.call(void 0,r.version,e.version);if(s&&(!o||!0!==e.preinstalled))continue;const a=new(0,g.VirtualFile)({path:g.NpmSnapFileNames.Manifest,value:JSON.stringify(r),result:r}),l=n.map((({path:e,value:t})=>new(0,g.VirtualFile)({value:t,path:e}))),{filePath:c,iconPath:d}=r.source.location.npm,h=l.find((e=>e.path===c)),f=d?l.find((e=>e.path===d)):void 0;v.assert.call(void 0,h,"Source code not provided for preinstalled snap."),v.assert.call(void 0,!d||d&&f,"Icon not provided for preinstalled snap."),v.assert.call(void 0,void 0===r.source.files,"Auxiliary files are not currently supported for preinstalled snaps.");const m=r.source.locales?.map((e=>l.find((t=>t.path===e))))??[],y=g.getValidatedLocalizationFiles.call(void 0,m.filter(Boolean));v.assert.call(void 0,m.length===y.length,"Missing localization files for preinstalled snap.");const b={manifest:a,sourceCode:h,svgIcon:f,auxiliaryFiles:[],localizationFiles:y};u.__privateMethod.call(void 0,this,Ie,Re).call(this,{id:t,origin:"metamask",files:b,removable:i,preinstalled:!0});const w=p.processSnapPermissions.call(void 0,r.initialPermissions);u.__privateMethod.call(void 0,this,Ne,Le).call(this,w);const{newPermissions:_,unusedPermissions:k}=u.__privateMethod.call(void 0,this,pt,mt).call(this,t,w);u.__privateMethod.call(void 0,this,gt,vt).call(this,{snapId:t,newPermissions:_,unusedPermissions:k}),this.update((e=>{e.snaps[t].status=g.SnapStatus.Stopped}))}},Y=new WeakSet,z=function(){u.__privateSet.call(void 0,this,U,setTimeout((()=>{u.__privateMethod.call(void 0,this,re,ne).call(this).catch((e=>{g.logError.call(void 0,e)})),u.__privateMethod.call(void 0,this,Y,z).call(this)}),u.__privateGet.call(void 0,this,B)))},Z=new WeakSet,J=async function(e,t){if(this.has(e)){try{this.update((r=>{r.snaps[e].blocked=!0,r.snaps[e].blockInformation=t})),await this.disableSnap(e)}catch(t){g.logError.call(void 0,`Encountered error when stopping blocked snap "${e}".`,t)}this.messagingSystem.publish(`${w}:snapBlocked`,e,t)}},X=new WeakSet,Q=function(e){this.has(e)&&this.state.snaps[e].blocked&&(this.update((t=>{t.snaps[e].blocked=!1,delete t.snaps[e].blockInformation})),this.messagingSystem.publish(`${w}:snapUnblocked`,e))},ee=new WeakSet,te=async function(e,t){const r=(await this.messagingSystem.call("SnapsRegistry:get",{[e]:t}))[e];if(1===r.status)throw new Error(`Cannot install version "${t.version}" of snap "${e}": The version is blocked. ${r.reason?.explanation??""}`);const n=Object.keys(t.permissions).some((e=>!s.ALLOWED_PERMISSIONS.includes(e)));if(u.__privateGet.call(void 0,this,O).requireAllowlist&&n&&2!==r.status)throw new Error(`Cannot install version "${t.version}" of snap "${e}": ${3===r.status?"The registry is temporarily unavailable.":"The snap is not on the allowlist."}`)},re=new WeakSet,ne=async function(){const e=[...u.__privateGet.call(void 0,this,D).entries()];return Promise.all(e.filter((([e,t])=>0===t.activeReferences&&0===t.pendingInboundRequests.length&&t.lastRequest&&u.__privateGet.call(void 0,this,I)&&v.timeSince.call(void 0,t.lastRequest)>u.__privateGet.call(void 0,this,I))).map((async([e])=>this.stopSnap(e,g.SnapStatusEvents.Stop))))},ie=new WeakSet,se=function(e,t){const{interpreter:r}=u.__privateMethod.call(void 0,this,ut,dt).call(this,e);r.send(t),this.update((t=>{t.snaps[e].status=r.state.value}))},oe=new WeakSet,ae=async function(e){await this.messagingSystem.call("ExecutionService:terminateSnap",e),await new Promise((e=>setTimeout(e,1)));u.__privateMethod.call(void 0,this,ut,dt).call(this,e).pendingInboundRequests.filter((e=>"finished"!==e.timer.status)).forEach((e=>e.timer.finish())),await new Promise((e=>setTimeout(e,1))),this.messagingSystem.publish("SnapController:snapTerminated",this.getTruncatedExpect(e))},le=new WeakSet,ce=async function({snapId:e,salt:t,useCache:r,keyMetadata:n}){const i=u.__privateMethod.call(void 0,this,ut,dt).call(this,e);if(i.encryptionKey&&i.encryptionSalt&&r)return{key:await u.__privateGet.call(void 0,this,R).importKey(i.encryptionKey),salt:i.encryptionSalt};const s=t??u.__privateGet.call(void 0,this,R).generateSalt(),o=await u.__privateGet.call(void 0,this,N).call(this),a=await p.getEncryptionEntropy.call(void 0,{snapId:e,mnemonicPhrase:o}),l=await u.__privateGet.call(void 0,this,R).keyFromPassword(a,s,!0,n),c=await u.__privateGet.call(void 0,this,R).exportKey(l);return r&&(i.encryptionKey=c,i.encryptionSalt=s),{key:l,salt:s}},ue=new WeakSet,de=async function(e,t){try{const r=g.parseJson.call(void 0,t),{salt:n,keyMetadata:i}=r,s=u.__privateGet.call(void 0,this,R).isVaultUpdated(t),{key:o}=await u.__privateMethod.call(void 0,this,le,ce).call(this,{snapId:e,salt:n,useCache:s,keyMetadata:i}),a=await u.__privateGet.call(void 0,this,R).decryptWithKey(o,r);return v.assert.call(void 0,v.isValidJson.call(void 0,a)),a}catch{throw f.rpcErrors.internal({message:"Failed to decrypt snap state, the state must be corrupted."})}},he=new WeakSet,fe=async function(e,t){const{key:r,salt:n}=await u.__privateMethod.call(void 0,this,le,ce).call(this,{snapId:e,useCache:!0}),i=await u.__privateGet.call(void 0,this,R).encryptWithKey(r,t);return i.salt=n,JSON.stringify(i)},pe=new WeakSet,me=function(e,t,r){if(t){const n=l.setDiff.call(void 0,t,r);for(const t of Object.keys(n))this.removeSnapFromSubject(t,e)}for(const t of Object.keys(r))u.__privateMethod.call(void 0,this,ge,ve).call(this,t,e)},ge=new WeakSet,ve=function(e,t){const r=this.messagingSystem.call("PermissionController:getPermissions",e),n=r?.[p.WALLET_SNAP_PERMISSION_KEY]?.caveats?.find((e=>e.type===g.SnapCaveatType.SnapIds));if(Boolean(n?.value?.[t]))return;if(n)return void this.messagingSystem.call("PermissionController:updateCaveat",e,p.WALLET_SNAP_PERMISSION_KEY,g.SnapCaveatType.SnapIds,{...n,[t]:{}});const i={[p.WALLET_SNAP_PERMISSION_KEY]:{caveats:[{type:g.SnapCaveatType.SnapIds,value:{[t]:{}}}]}};this.messagingSystem.call("PermissionController:grantPermissions",{approvedPermissions:i,subject:{origin:e}})},ye=new WeakSet,be=function(e){const t=this.messagingSystem.call("PermissionController:getSubjectNames");for(const r of t)this.removeSnapFromSubject(r,e)},we=new WeakSet,_e=function(e){this.messagingSystem.call("PermissionController:hasPermissions",e)&&this.messagingSystem.call("PermissionController:revokeAllPermissions",e)},ke=new WeakSet,Se=function({origin:e,snapId:t,type:r}){const n=b.nanoid.call(void 0);return{id:n,promise:this.messagingSystem.call("ApprovalController:addRequest",{origin:e,id:n,type:r,requestData:{metadata:{id:n,origin:t,dappOrigin:e},snapId:t},requestState:{loading:!0}},!0)}},Ee=new WeakSet,Te=function(e,t){try{this.messagingSystem.call("ApprovalController:updateRequestState",{id:e,requestState:t})}catch{}},je=new WeakSet,Ae=async function(e,t){return await this.messagingSystem.call("SnapsRegistry:resolveVersion",e,t)},Pe=new WeakSet,Ce=async function(e){const{id:t,location:r,versionRange:n}=e;u.__privateMethod.call(void 0,this,ht,ft).call(this,t);const i=u.__privateMethod.call(void 0,this,ut,dt).call(this,t);i.installPromise||(a.log.call(void 0,`Adding snap: ${t}`),i.installPromise=(async()=>{const i=await l.fetchSnap.call(void 0,t,r),s=i.manifest.result;if(!v.satisfiesVersionRange.call(void 0,s.version,n))throw new Error(`Version mismatch. Manifest for "${t}" specifies version "${s.version}" which doesn't satisfy requested version range "${n}".`);return await u.__privateMethod.call(void 0,this,ee,te).call(this,t,{version:s.version,checksum:s.source.shasum,permissions:s.initialPermissions}),u.__privateMethod.call(void 0,this,Ie,Re).call(this,{...e,files:i,id:t})})());try{return await i.installPromise}catch(e){throw i.installPromise=null,e}},xe=new WeakSet,Oe=async function(e){const{snapId:t}=e;if(this.isRunning(t))throw new Error(`Snap "${t}" is already started.`);try{const r=u.__privateMethod.call(void 0,this,ut,dt).call(this,t),n=await this.messagingSystem.call("ExecutionService:executeSnap",{...e,endowments:await u.__privateMethod.call(void 0,this,Me,Be).call(this,t)});return u.__privateMethod.call(void 0,this,ie,se).call(this,t,g.SnapStatusEvents.Start),r.lastRequest=Date.now(),n}catch(e){throw await u.__privateMethod.call(void 0,this,oe,ae).call(this,t),e}},Me=new WeakSet,Be=async function(e){let t=[];for(const r of u.__privateGet.call(void 0,this,C))if(this.messagingSystem.call("PermissionController:hasPermission",e,r)){const n=await this.messagingSystem.call("PermissionController:getEndowments",e,r);if(n){if(!Array.isArray(n)||n.some((e=>"string"!=typeof e)))throw new Error("Expected an array of string endowment names.");t=t.concat(n)}}const r=[...new Set([...g.DEFAULT_ENDOWMENTS,...t])];return r.length<g.DEFAULT_ENDOWMENTS.length+t.length&&g.logError.call(void 0,`Duplicate endowments found for ${e}. Default endowments should not be requested.`,t),r},Ie=new WeakSet,Re=function(e){const{id:t,origin:r,files:n,isUpdate:i=!1,removable:s,preinstalled:o}=e,{manifest:a,sourceCode:l,svgIcon:c,auxiliaryFiles:d,localizationFiles:f}=n;g.assertIsSnapManifest.call(void 0,a.result);const{version:p}=a.result,m=l.toString();v.assert.call(void 0,"string"==typeof m&&m.length>0,`Invalid source code for snap "${t}".`);const y=d.map((e=>(v.assert.call(void 0,"string"==typeof e.data.base64),{path:e.path,value:e.data.base64}))),b=this.state.snaps[t],w=[...b?.versionHistory??[],{version:p,date:Date.now(),origin:r}],_=f.map((e=>e.result)),k={...b,blocked:!1,enabled:!0,removable:s,preinstalled:o,id:t,initialConnections:a.result.initialConnections,initialPermissions:a.result.initialPermissions,manifest:a.result,status:u.__privateGet.call(void 0,this,G).config.initial,sourceCode:m,version:p,versionHistory:w,auxiliaryFiles:y,localizationFiles:_};delete k.blockInformation;const{inversePatches:S}=this.update((e=>{e.snaps[t]=k}));if(i){const e=u.__privateMethod.call(void 0,this,et,tt).call(this,t);void 0!==e&&(e.statePatches=S)}const{proposedName:E}=g.getLocalizedSnapManifest.call(void 0,a.result,"en",_);return this.messagingSystem.call("SubjectMetadataController:addSubjectMetadata",{subjectType:h.SubjectType.Snap,name:E,origin:k.id,version:p,svgIcon:c?.toString()??null}),{...k,sourceCode:m}},Ne=new WeakSet,Le=function(e){const t=Object.keys(e),r=Array.from(new Set(Object.values(p.handlerEndowments)));v.assert.call(void 0,t.some((e=>r.includes(e))),`A snap must request at least one of the following permissions: ${r.filter((e=>null!==e)).join(", ")}.`);const n=t.reduce(((e,t)=>(v.hasProperty.call(void 0,u.__privateGet.call(void 0,this,x),t)&&e.push(u.__privateGet.call(void 0,this,x)[t]),e)),[]);v.assert.call(void 0,0===n.length,`One or more permissions are not allowed:\n${n.join("\n")}`)},De=new WeakSet,Fe=function(e){return p.getMaxRequestTimeCaveat.call(void 0,e)??this.maxRequestTime},Ue=new WeakSet,Ge=function(e){const t=u.__privateMethod.call(void 0,this,ut,dt).call(this,e),r=t.rpcHandler;if(r)return r;const n=new(0,i.RequestQueue)(5),s=new Map,o=async({origin:t,handler:r,request:i,timeout:o})=>{if(!1===this.state.snaps[e].enabled)throw new Error(`Snap "${e}" is disabled.`);if(this.state.snaps[e].status===g.SnapStatus.Installing)throw new Error(`Snap "${e}" is currently being installed. Please try again later.`);if(!this.isRunning(e)){let r=s.get(e);if(r){if(n.get(t)>=n.maxQueueSize)throw new Error("Exceeds maximum number of requests waiting to be resolved, please try again.")}else r=this.startSnap(e),s.set(e,r);n.increment(t);try{await r}finally{n.decrement(t),s.get(e)===r&&s.delete(e)}}const a=new(0,c.Timer)(o);u.__privateMethod.call(void 0,this,Ze,Je).call(this,e,i.id,a);const d=this.messagingSystem.call("ExecutionService:handleRpcRequest",e,{origin:t,handler:r,request:i});try{const t=await l.withTimeout.call(void 0,d,a);if(t===l.hasTimedOut)throw new Error(`${e} failed to respond to the request in time.`);await u.__privateMethod.call(void 0,this,Ye,ze).call(this,e,r,t);const n=await u.__privateMethod.call(void 0,this,Ve,Ke).call(this,e,r,t);return u.__privateMethod.call(void 0,this,Xe,Qe).call(this,e,i.id),n}catch(t){u.__privateMethod.call(void 0,this,Xe,Qe).call(this,e,i.id);const[r,n]=g.unwrapError.call(void 0,t);throw n||await this.stopSnap(e,g.SnapStatusEvents.Crash),r}};return t.rpcHandler=o,o},He=new WeakSet,We=async function(e,t){return this.messagingSystem.call("SnapInterfaceController:createInterface",e,t)},$e=new WeakSet,qe=function(e,t){v.assert.call(void 0,this.messagingSystem.call("SnapInterfaceController:getInterface",e,t))},Ve=new WeakSet,Ke=async function(e,t,r){switch(t){case g.HandlerType.OnTransaction:case g.HandlerType.OnSignature:case g.HandlerType.OnHomePage:{const t=r;if(t&&v.hasProperty.call(void 0,t,"content")){const{content:r,...n}=t;return{...n,id:await u.__privateMethod.call(void 0,this,He,We).call(this,e,r)}}return r}default:return r}},Ye=new WeakSet,ze=async function(e,t,r){switch(t){case g.HandlerType.OnTransaction:v.assertStruct.call(void 0,r,g.OnTransactionResponseStruct),r&&v.hasProperty.call(void 0,r,"id")&&u.__privateMethod.call(void 0,this,$e,qe).call(this,e,r.id);break;case g.HandlerType.OnSignature:v.assertStruct.call(void 0,r,g.OnSignatureResponseStruct),r&&v.hasProperty.call(void 0,r,"id")&&u.__privateMethod.call(void 0,this,$e,qe).call(this,e,r.id);break;case g.HandlerType.OnHomePage:v.assertStruct.call(void 0,r,g.OnHomePageResponseStruct),r&&v.hasProperty.call(void 0,r,"id")&&u.__privateMethod.call(void 0,this,$e,qe).call(this,e,r.id);break;case g.HandlerType.OnNameLookup:v.assertStruct.call(void 0,r,g.OnNameLookupResponseStruct)}},Ze=new WeakSet,Je=function(e,t,r){const n=u.__privateMethod.call(void 0,this,ut,dt).call(this,e);n.pendingInboundRequests.push({requestId:t,timer:r}),n.lastRequest=null},Xe=new WeakSet,Qe=function(e,t){const r=u.__privateMethod.call(void 0,this,ut,dt).call(this,e);r.pendingInboundRequests=r.pendingInboundRequests.filter((e=>e.requestId!==t)),0===r.pendingInboundRequests.length&&(r.lastRequest=Date.now())},et=new WeakSet,tt=function(e){return u.__privateGet.call(void 0,this,F).get(e)},rt=new WeakSet,nt=function(e){v.assert.call(void 0,void 0===u.__privateGet.call(void 0,this,F).get(e),new Error(`Snap "${e}" rollback snapshot already exists.`)),u.__privateGet.call(void 0,this,F).set(e,{statePatches:[],permissions:{},newVersion:""});const t=u.__privateGet.call(void 0,this,F).get(e);return v.assert.call(void 0,void 0!==t,new Error(`Snapshot creation failed for ${e}.`)),t},it=new WeakSet,st=async function(e){const t=u.__privateMethod.call(void 0,this,et,tt).call(this,e);if(!t)throw new Error("A snapshot does not exist for this snap.");await this.stopSnap(e,g.SnapStatusEvents.Stop),this.get(e)?.status!==g.SnapStatus.Stopped&&u.__privateMethod.call(void 0,this,ie,se).call(this,e,g.SnapStatusEvents.Stop);const{statePatches:r,permissions:n}=t;r?.length&&this.applyPatches(r),this.get(e)?.status!==g.SnapStatus.Stopped&&this.update((t=>{t.snaps[e].status=g.SnapStatus.Stopped})),u.__privateMethod.call(void 0,this,gt,vt).call(this,{snapId:e,unusedPermissions:n.granted,newPermissions:n.revoked,requestData:n.requestData});const i=this.getTruncatedExpect(e);this.messagingSystem.publish("SnapController:snapRolledback",i,t.newVersion),u.__privateGet.call(void 0,this,F).delete(e)},ot=new WeakSet,at=async function(e){for(const t of e)await u.__privateMethod.call(void 0,this,it,st).call(this,t)},lt=new WeakSet,ct=function(e){return u.__privateGet.call(void 0,this,D).get(e)},ut=new WeakSet,dt=function(e){const t=u.__privateMethod.call(void 0,this,lt,ct).call(this,e);return v.assert.call(void 0,void 0!==t,new Error(`Snap "${e}" runtime data not found`)),t},ht=new WeakSet,ft=function(e){if(u.__privateGet.call(void 0,this,D).has(e))return;const t=this.get(e),r=y.interpret.call(void 0,u.__privateGet.call(void 0,this,G));r.start({context:{snapId:e},value:t?.status??u.__privateGet.call(void 0,this,G).config.initial}),o.forceStrict.call(void 0,r),u.__privateGet.call(void 0,this,D).set(e,{lastRequest:null,rpcHandler:null,installPromise:null,encryptionKey:null,encryptionSalt:null,activeReferences:0,pendingInboundRequests:[],pendingOutboundRequests:0,interpreter:r,stopping:!1})},pt=new WeakSet,mt=function(e,t){const r=this.messagingSystem.call("PermissionController:getPermissions",e)??{},n=l.permissionsDiff.call(void 0,t,r),i=l.permissionsDiff.call(void 0,r,t);return{newPermissions:n,unusedPermissions:i,approvedPermissions:l.permissionsDiff.call(void 0,r,i)}},gt=new WeakSet,vt=function({snapId:e,unusedPermissions:t={},newPermissions:r={},requestData:n}){const i=Object.keys(t);v.isNonEmptyArray.call(void 0,i)&&this.messagingSystem.call("PermissionController:revokePermissions",{[e]:i}),v.isNonEmptyArray.call(void 0,Object.keys(r))&&this.messagingSystem.call("PermissionController:grantPermissions",{approvedPermissions:r,subject:{origin:e},requestData:n})},yt=new WeakSet,bt=function(e,t){const r=this.getExpect(e);return!v.satisfiesVersionRange.call(void 0,r.version,t)&&!v.gtRange.call(void 0,r.version,t)},wt=new WeakSet,_t=async function(e,t){const r=p.handlerEndowments[t];v.assert.call(void 0,r,"Lifecycle hook must have an endowment.");this.messagingSystem.call("PermissionController:hasPermission",e,r)&&await this.handleRequest({snapId:e,handler:t,origin:"",request:{jsonrpc:"2.0",method:t}})},r.controllerName=w,r.SNAP_APPROVAL_INSTALL=_,r.SNAP_APPROVAL_UPDATE=k,r.SNAP_APPROVAL_RESULT=S,r.SnapController=kt}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-JMP6XYRL.js"}],[1802,{"./chunk-4DPX4O3T.js":1783,"./chunk-BOFPNIRX.js":1790,"./chunk-EXN2TFDJ.js":1794,"./chunk-NXZVKBSV.js":1806,"@metamask/json-rpc-engine":1829,"@metamask/json-rpc-middleware-stream":1293,"@metamask/object-multiplex":1483,"@metamask/rpc-errors":1621,"@metamask/snaps-utils":1938,"@metamask/utils":2021,nanoid:1831,"readable-stream":1847},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i,s,o,a,l,c,u,d,h,f,p,m,g,v,y,b,w=e("./chunk-NXZVKBSV.js"),_=e("./chunk-4DPX4O3T.js"),k=e("./chunk-BOFPNIRX.js"),S=e("./chunk-EXN2TFDJ.js"),E=e("@metamask/json-rpc-engine"),T=e("@metamask/json-rpc-middleware-stream"),j=e("@metamask/object-multiplex"),A=(n=j)&&n.__esModule?n:{default:n},P=e("@metamask/rpc-errors"),C=e("@metamask/snaps-utils"),x=e("@metamask/utils"),O=e("nanoid"),M=e("readable-stream"),B="ExecutionService";function I(e,t){const r=new(0,A.default);return M.pipeline.call(void 0,e,r,e,(e=>{e&&(t?C.logError.call(void 0,`"${t}" stream failure.`,e):C.logError.call(void 0,e))})),r}i=new WeakMap,s=new WeakMap,o=new WeakMap,a=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakSet,f=function(e){S.__privateGet.call(void 0,this,i).delete(e)},p=new WeakSet,m=function(e,t){S.__privateGet.call(void 0,this,i).set(e,(async({origin:r,handler:n,request:i})=>await this.command(t,{id:O.nanoid.call(void 0),jsonrpc:"2.0",method:"snapRpc",params:{origin:r,handler:n,request:i,target:e}})))},g=new WeakSet,v=function(e,t){S.__privateGet.call(void 0,this,s).set(e,t),S.__privateGet.call(void 0,this,o).set(t,e)},y=new WeakSet,b=function(e){const t=S.__privateGet.call(void 0,this,o).get(e);if(!t)throw new Error(`job: "${e}" has no mapped snap.`);S.__privateGet.call(void 0,this,o).delete(e),S.__privateGet.call(void 0,this,s).delete(t),S.__privateMethod.call(void 0,this,h,f).call(this,t)},r.AbstractExecutionService=class{constructor({setupSnapProvider:e,messenger:t,initTimeout:r=x.inMilliseconds.call(void 0,60,x.Duration.Second),pingTimeout:n=x.inMilliseconds.call(void 0,2,x.Duration.Second),terminationTimeout:f=x.inMilliseconds.call(void 0,1,x.Duration.Second),usePing:m=!0}){S.__privateAdd.call(void 0,this,h),S.__privateAdd.call(void 0,this,p),S.__privateAdd.call(void 0,this,g),S.__privateAdd.call(void 0,this,y),S.__privateAdd.call(void 0,this,i,void 0),S.__privateAdd.call(void 0,this,s,void 0),S.__privateAdd.call(void 0,this,o,void 0),S.__privateAdd.call(void 0,this,a,void 0),S.__privateAdd.call(void 0,this,l,void 0),S.__privateAdd.call(void 0,this,c,void 0),S.__privateAdd.call(void 0,this,u,void 0),S.__privateAdd.call(void 0,this,d,void 0),S.__privateSet.call(void 0,this,i,new Map),this.jobs=new Map,this.setupSnapProvider=e,S.__privateSet.call(void 0,this,s,new Map),S.__privateSet.call(void 0,this,o,new Map),S.__privateSet.call(void 0,this,a,t),S.__privateSet.call(void 0,this,l,r),S.__privateSet.call(void 0,this,c,n),S.__privateSet.call(void 0,this,u,f),S.__privateSet.call(void 0,this,d,m),this.registerMessageHandlers()}registerMessageHandlers(){S.__privateGet.call(void 0,this,a).registerActionHandler(`${B}:handleRpcRequest`,(async(e,t)=>this.handleRpcRequest(e,t))),S.__privateGet.call(void 0,this,a).registerActionHandler(`${B}:executeSnap`,(async e=>this.executeSnap(e))),S.__privateGet.call(void 0,this,a).registerActionHandler(`${B}:terminateSnap`,(async e=>this.terminateSnap(e))),S.__privateGet.call(void 0,this,a).registerActionHandler(`${B}:terminateAllSnaps`,(async()=>this.terminateAllSnaps()))}async terminate(e){const t=this.jobs.get(e);if(!t)throw new Error(`Job with id "${e}" not found.`);try{const t=await _.withTimeout.call(void 0,this.command(e,{jsonrpc:"2.0",method:"terminate",params:[],id:O.nanoid.call(void 0)}),S.__privateGet.call(void 0,this,u));t!==_.hasTimedOut&&"OK"===t||C.logError.call(void 0,`Job "${e}" failed to terminate gracefully.`,t)}catch{}Object.values(t.streams).forEach((e=>{try{!e.destroyed&&e.destroy(),e.removeAllListeners()}catch(e){C.logError.call(void 0,"Error while destroying stream",e)}})),this.terminateJob(t),this.jobs.delete(e),S.__privateMethod.call(void 0,this,y,b).call(this,e),w.log.call(void 0,`Job "${e}" terminated.`)}async initJob(e,t){const{streams:r,worker:n}=await this.initStreams(e,t),i=new(0,E.JsonRpcEngine),s=T.createStreamMiddleware.call(void 0);M.pipeline.call(void 0,s.stream,r.command,s.stream,(e=>{e&&C.logError.call(void 0,"Command stream failure.",e)})),i.push(s.middleware);const o={id:e,streams:r,rpcEngine:i,worker:n};return this.jobs.set(e,o),o}async initStreams(e,t){const r=await _.withTimeout.call(void 0,this.initEnvStream(e),t);if(r===_.hasTimedOut)throw this.terminateJob({id:e}),new Error("The Snaps execution environment failed to start.");const{worker:n,stream:i}=r,s=I(i,`Job: "${e}"`),l=s.createStream(C.SNAP_STREAM_NAMES.COMMAND),c=t=>{if(!x.isJsonRpcNotification.call(void 0,t))return;const r=S.__privateGet.call(void 0,this,o).get(e);"OutboundRequest"===t.method?S.__privateGet.call(void 0,this,a).publish("ExecutionService:outboundRequest",r):"OutboundResponse"===t.method?S.__privateGet.call(void 0,this,a).publish("ExecutionService:outboundResponse",r):"UnhandledError"===t.method?x.isObject.call(void 0,t.params)&&t.params.error?(S.__privateGet.call(void 0,this,a).publish("ExecutionService:unhandledError",r,t.params.error),l.removeListener("data",c)):C.logError.call(void 0,new Error(`Received malformed "${t.method}" command stream notification.`)):C.logError.call(void 0,new Error(`Received unexpected command stream notification "${t.method}".`))};l.on("data",c);const u=s.createStream(C.SNAP_STREAM_NAMES.JSON_RPC);return{streams:{command:l,rpc:u,_connection:i},worker:n}}async terminateSnap(e){const t=S.__privateGet.call(void 0,this,s).get(e);t&&await this.terminate(t)}async terminateAllSnaps(){await Promise.all([...this.jobs.keys()].map((async e=>this.terminate(e)))),S.__privateGet.call(void 0,this,i).clear()}getRpcRequestHandler(e){return S.__privateGet.call(void 0,this,i).get(e)}async executeSnap({snapId:e,sourceCode:t,endowments:r}){if(S.__privateGet.call(void 0,this,s).has(e))throw new Error(`Snap "${e}" is already being executed.`);const n=O.nanoid.call(void 0),i=new(0,k.Timer)(S.__privateGet.call(void 0,this,l)),o=await this.initJob(n,i);if(S.__privateMethod.call(void 0,this,g,v).call(this,e,o.id),S.__privateGet.call(void 0,this,d)){if(await _.withTimeout.call(void 0,this.command(o.id,{jsonrpc:"2.0",method:"ping",id:O.nanoid.call(void 0)}),S.__privateGet.call(void 0,this,c))===_.hasTimedOut)throw new Error("The Snaps execution environment failed to start.")}const a=o.streams.rpc;this.setupSnapProvider(e,a);const u=i.remaining,h=await _.withTimeout.call(void 0,this.command(o.id,{jsonrpc:"2.0",method:"executeSnap",params:{snapId:e,sourceCode:t,endowments:r},id:O.nanoid.call(void 0)}),u);if(h===_.hasTimedOut)throw new Error(`${e} failed to start.`);return S.__privateMethod.call(void 0,this,p,m).call(this,e,o.id),h}async command(e,t){x.assertIsJsonRpcRequest.call(void 0,t);const r=this.jobs.get(e);if(!r)throw new Error(`Job with id "${e}" not found.`);w.log.call(void 0,"Parent: Sending Command",t);const n=await r.rpcEngine.handle(t);if(n.error)throw new(0,P.JsonRpcError)(n.error.code,n.error.message,n.error.data);return n.result}async handleRpcRequest(e,t){const r=this.getRpcRequestHandler(e);if(!r)throw new Error(`Snap execution service returned no RPC handler for running snap "${e}".`);return r(t)}},r.setupMultiplex=I}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-JZCXZEFV.js"}],[1803,{"@metamask/snaps-sdk":1902},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("@metamask/snaps-sdk"),i=(e,t)=>t.value??e[t.name]??null,s=(e,t,r)=>{const n=e[r],i=n?.[t.name];return t.value??i??null},o=(e,t)=>{n.assert.call(void 0,void 0===e[t],`Duplicate component names are not allowed, found multiple instances of: "${t}".`)},a=(e,t,r={})=>{const{type:l}=t;return l===n.NodeType.Panel?t.children.reduce(((t,r)=>a(e,r,t)),r):(l===n.NodeType.Form&&(o(r,t.name),r[t.name]=t.children.reduce(((r,i)=>(i.type===n.NodeType.Input&&(o(r,i.name),r[i.name]=s(e,i,t.name)),r)),{})),l===n.NodeType.Input&&(o(r,t.name),r[t.name]=i(e,t)),r)};r.constructInputState=i,r.constructFormInputState=s,r.assertNameIsUnique=o,r.constructState=a}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-KLK7ZRMH.js"}],[1804,{"./chunk-EXN2TFDJ.js":1794,"./chunk-RDBT3ZJQ.js":1810,"@metamask/snaps-utils":1938,"@metamask/utils":2021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i=e("./chunk-RDBT3ZJQ.js"),s=e("./chunk-EXN2TFDJ.js"),o=e("@metamask/snaps-utils"),a=e("@metamask/utils");function l(e){return a.assert.call(void 0,void 0!==e.data.canonicalPath),e.data.canonicalPath=`local:${e.data.canonicalPath}`,e}n=new WeakMap,r.LocalLocation=class{constructor(e,t={}){s.__privateAdd.call(void 0,this,n,void 0),a.assertStruct.call(void 0,e.toString(),o.LocalSnapIdStruct,"Invalid Snap Id"),a.assert.call(void 0,void 0===t.fetchOptions,"Currently adding fetch options to local: is unsupported."),s.__privateSet.call(void 0,this,n,new(0,i.HttpLocation)(new URL(e.toString().slice(o.SnapIdPrefixes.local.length)),{...t,fetchOptions:{cache:"no-cache"}}))}async manifest(){return l(await s.__privateGet.call(void 0,this,n).manifest())}async fetch(e){return l(await s.__privateGet.call(void 0,this,n).fetch(e))}get shouldAlwaysReload(){return!0}}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-LWBPKSU2.js"}],[1805,{"./chunk-7Y6P5FRN.js":1786,"./chunk-EXN2TFDJ.js":1794,"./chunk-JZCXZEFV.js":1802,nanoid:1831},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i=e("./chunk-JZCXZEFV.js"),s=e("./chunk-7Y6P5FRN.js"),o=e("./chunk-EXN2TFDJ.js"),a=e("nanoid"),l=class extends i.AbstractExecutionService{constructor({stream:e,messenger:t,setupSnapProvider:r}){super({messenger:t,setupSnapProvider:r,usePing:!1}),o.__privateAdd.call(void 0,this,n,void 0),o.__privateSet.call(void 0,this,n,e)}async terminateJob(e){o.__privateGet.call(void 0,this,n).write({jobId:e.id,data:{jsonrpc:"2.0",method:"terminateJob",id:a.nanoid.call(void 0)}})}async initEnvStream(e){const t=new(0,s.ProxyPostMessageStream)({stream:o.__privateGet.call(void 0,this,n),jobId:e});return await new Promise((e=>{t.once("data",e),t.write({name:"command",data:{jsonrpc:"2.0",method:"ping",id:a.nanoid.call(void 0)}})})),{worker:e,stream:t}}};n=new WeakMap,r.ProxyExecutionService=l}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-M2NMZ4ER.js"}],[1806,{"@metamask/snaps-utils":1938,"@metamask/utils":2021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("@metamask/snaps-utils"),i=e("@metamask/utils").createModuleLogger.call(void 0,n.snapsLogger,"snaps-controllers");r.log=i}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-NXZVKBSV.js"}],[1807,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-OHMCPTOI.js"}],[1808,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-OIEUL55W.js"}],[1809,{"./chunk-LWBPKSU2.js":1804,"./chunk-RDBT3ZJQ.js":1810,"./chunk-XWDEGRM5.js":1813,"@metamask/utils":2021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-LWBPKSU2.js"),i=e("./chunk-XWDEGRM5.js"),s=e("./chunk-RDBT3ZJQ.js"),o=e("@metamask/utils");r.detectSnapLocation=function(e,t){const r=t?.allowHttp??!1,a=t?.allowLocal??!1,l=new URL(e);switch(l.protocol){case"npm:":return new(0,i.NpmLocation)(l,t);case"local:":return o.assert.call(void 0,a,new TypeError("Fetching local snaps is disabled.")),new(0,n.LocalLocation)(l,t);case"http:":case"https:":return o.assert.call(void 0,r,new TypeError("Fetching snaps through http/https is disabled.")),new(0,s.HttpLocation)(l,t);default:throw new TypeError(`Unrecognized "${l.protocol}" snap location protocol.`)}}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-PT22IXNS.js"}],[181,{lodash:3587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:80,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=80;const r=function(e){var t;(null==e||null===(t=e.metamask)||void 0===t?void 0:t.showPortfolioTooltip)!==undefined&&delete e.metamask.showPortfolioTooltip;return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/080.js"}],[1810,{"@metamask/snaps-utils":1938,"@metamask/utils":2021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("@metamask/snaps-utils"),i=e("@metamask/utils");r.HttpLocation=class{constructor(e,t={}){this.cache=new Map,i.assertStruct.call(void 0,e.toString(),n.HttpSnapIdStruct,"Invalid Snap Id: "),this.fetchFn=t.fetch??globalThis.fetch.bind(globalThis),this.fetchOptions=t.fetchOptions,this.url=e}async manifest(){if(this.validatedManifest)return this.validatedManifest.clone();const e=new URL(n.NpmSnapFileNames.Manifest,this.url).toString(),t=await this.fetchFn(e,this.fetchOptions);if(!t.ok)throw new Error(`Failed to fetch "${e}". Status code: ${t.status}.`);const r=await t.text(),i=n.parseJson.call(void 0,r),s=new(0,n.VirtualFile)({value:r,result:n.createSnapManifest.call(void 0,i),path:n.NpmSnapFileNames.Manifest,data:{canonicalPath:e}});return this.validatedManifest=s,this.manifest()}async fetch(e){const t=n.normalizeRelative.call(void 0,e),r=this.cache.get(t);if(void 0!==r){const{file:e,contents:t}=r,n=new Uint8Array(await t.arrayBuffer()),i=e.clone();return i.value=n,i}const s=this.toCanonical(t).toString(),o=await this.fetchFn(s,this.fetchOptions);if(!o.ok)throw new Error(`Failed to fetch "${s}". Status code: ${o.status}.`);const a=new(0,n.VirtualFile)({value:"",path:t,data:{canonicalPath:s}}),l=await o.blob();return i.assert.call(void 0,!this.cache.has(t),"Corrupted cache, multiple files with same path."),this.cache.set(t,{file:a,contents:l}),this.fetch(t)}get root(){return new URL(this.url)}toCanonical(e){return i.assert.call(void 0,!e.startsWith("/"),"Tried to parse absolute path."),new URL(e,this.url)}}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-RDBT3ZJQ.js"}],[1811,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-VNOCJWOK.js"}],[1812,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-WEY7ICES.js"}],[1813,{"./chunk-EXN2TFDJ.js":1794,"@metamask/snaps-utils":1938,"@metamask/utils":2021,"browserify-zlib":2738,"concat-stream":1830,"get-npm-tarball-url":3124,"readable-stream":1847,"readable-web-to-node-stream":3999,"tar-stream":4146},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i,s,o,a,l=e("./chunk-EXN2TFDJ.js"),c=e("@metamask/snaps-utils"),u=e("@metamask/utils"),d=e("browserify-zlib"),h=n(e("concat-stream")),f=n(e("get-npm-tarball-url")),p=e("readable-stream"),m=e("readable-web-to-node-stream"),g=e("tar-stream"),v=new URL("https://registry.npmjs.org"),y=class{constructor(e,t={}){l.__privateAdd.call(void 0,this,o),l.__privateAdd.call(void 0,this,i,void 0),l.__privateAdd.call(void 0,this,s,void 0);const r=t.allowCustomRegistries??!1,n=t.fetch??globalThis.fetch.bind(globalThis),a=t.versionRange??c.DEFAULT_REQUESTED_SNAP_VERSION,d=t.resolveVersion??(async e=>e);let h;u.assertStruct.call(void 0,e.toString(),c.NpmSnapIdStruct,"Invalid Snap Id: "),""===e.host&&""===e.port&&""===e.username&&""===e.password?h=v:(h="https://",e.username&&(h+=e.username,e.password&&(h+=`:${e.password}`),h+="@"),h+=e.host,h=new URL(h),u.assert.call(void 0,r,new TypeError(`Custom NPM registries are disabled, tried to use "${h.toString()}".`))),u.assert.call(void 0,"/"===h.pathname&&""===h.search&&""===h.hash),u.assert.call(void 0,""!==e.pathname&&"/"!==e.pathname,new TypeError("The package name in NPM location is empty."));let f=e.pathname;f.startsWith("/")&&(f=f.slice(1)),this.meta={requestedRange:a,registry:h,packageName:f,fetch:n,resolveVersion:d}}async manifest(){if(l.__privateGet.call(void 0,this,i))return l.__privateGet.call(void 0,this,i).clone();const e=await this.fetch("snap.manifest.json"),t=c.parseJson.call(void 0,e.toString());return e.result=c.createSnapManifest.call(void 0,t),l.__privateSet.call(void 0,this,i,e),this.manifest()}async fetch(e){const t=c.normalizeRelative.call(void 0,e);l.__privateGet.call(void 0,this,s)||(await l.__privateMethod.call(void 0,this,o,a).call(this),u.assert.call(void 0,void 0!==l.__privateGet.call(void 0,this,s)));const r=l.__privateGet.call(void 0,this,s).get(t);return u.assert.call(void 0,void 0!==r,new TypeError(`File "${e}" not found in package.`)),r.clone()}get packageName(){return this.meta.packageName}get version(){return u.assert.call(void 0,void 0!==this.meta.version,"Tried to access version without first fetching NPM package."),this.meta.version}get registry(){return this.meta.registry}get versionRange(){return this.meta.requestedRange}};i=new WeakMap,s=new WeakMap,o=new WeakSet,a=async function(){u.assert.call(void 0,void 0===l.__privateGet.call(void 0,this,s));const e=await this.meta.resolveVersion(this.meta.requestedRange),{tarballURL:t,targetVersion:r}=await async function(e,t,r,n){if(k(r)&&u.isValidSemVerVersion.call(void 0,t))return{tarballURL:f.default.call(void 0,e,t),targetVersion:t};const i=await w(e,r,n),s=Object.keys(i?.versions??{}).map((e=>(u.assertIsSemVerVersion.call(void 0,e),e))),o=c.getTargetVersion.call(void 0,s,t);if(null===o)throw new Error(`Failed to find a matching version in npm metadata for package "${e}" and requested semver range "${t}".`);const a=i?.versions?.[o]?.dist?.tarball;return{tarballURL:a,targetVersion:o}}(this.meta.packageName,e,this.meta.registry,this.meta.fetch);if(!c.isValidUrl.call(void 0,t)||!t.toString().endsWith(".tgz"))throw new Error(`Failed to find valid tarball URL in NPM metadata for package "${this.meta.packageName}".`);const n=new URL(t);n.hostname=this.meta.registry.hostname,n.protocol=this.meta.registry.protocol;const i=await this.fetchNpmTarball(n);l.__privateSet.call(void 0,this,s,i),this.meta.version=r};var b=262144e3;async function w(e,t,r){const n=await r(new URL(e,t).toString(),{headers:{accept:k(t)?"application/vnd.npm.install-v1+json; q=1.0, application/json; q=0.8, */*":"application/json"}});if(!n.ok)throw new Error(`Failed to fetch NPM registry entry. Status code: ${n.status}.`);const i=await n.json();if(!u.isObject.call(void 0,i))throw new Error(`Failed to fetch package "${e}" metadata from npm.`);return i}function _(e,t){let r="npm://";return""!==e.username&&(r+=e.username,""!==e.password&&(r+=`:${e.password}`),r+="@"),`${r}${e.host}/${t}/`}function k(e){return e.toString()===v.toString()}var S=/^package\//u;function E(e){return"function"!=typeof e.getReader?e:new(0,m.ReadableWebToNodeStream)(e)}r.DEFAULT_NPM_REGISTRY=v,r.BaseNpmLocation=y,r.TARBALL_SIZE_SAFETY_LIMIT=b,r.NpmLocation=class extends y{async fetchNpmTarball(e){const t=await this.meta.fetch(e.toString());if(!t.ok||!t.body)throw new Error(`Failed to fetch tarball for package "${this.meta.packageName}".`);const r=t.headers.get("content-length");u.assert.call(void 0,r,"Snap tarball has invalid content-length");const n=parseInt(r,10);return u.assert.call(void 0,n<=b,"Snap tarball exceeds size limit"),new Promise(((e,r)=>{const n=new Map,i=function(e,t){u.assert.call(void 0,e.endsWith("/"),"Base needs to end with '/' for relative paths to be added as children instead of siblings."),u.assert.call(void 0,e.startsWith("npm:"),'Protocol mismatch, expected "npm:".');const r=g.extract.call(void 0);let n=0;return r.on("entry",((i,s,o)=>{const{name:a,type:l}=i;if("file"===l){const i=a.replace(S,"");return s.pipe(h.default.call(void 0,{encoding:"uint8array"},(s=>{try{n+=s.byteLength,u.assert.call(void 0,n<b,"Snap tarball exceeds limit of 262144000 bytes.");const r=new(0,c.VirtualFile)({value:s,path:i,data:{canonicalPath:new URL(i,e).toString()}});return u.assert.call(void 0,!t.has(i),"Malformed tarball, multiple files with the same path."),t.set(i,r),o()}catch(e){return r.destroy(e)}})))}return s.on("end",(()=>o())),s.resume()})),r}(_(this.meta.registry,this.meta.packageName),n),s=t.body;if("pipeThrough"in s&&"DecompressionStream"in globalThis){const t=new DecompressionStream("gzip"),o=s.pipeThrough(t);p.pipeline.call(void 0,E(o),i,(t=>{t?r(t):e(n)}))}else p.pipeline.call(void 0,E(s),d.createGunzip.call(void 0),i,(t=>{t?r(t):e(n)}))}))}},r.fetchNpmMetadata=w,r.getNpmCanonicalBasePath=_}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-XWDEGRM5.js"}],[1814,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});r.getRunnableSnaps=e=>e.filter((e=>e.enabled&&!e.blocked))}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-YYPUPKQY.js"}],[1815,{"./chunk-4CA3O64H.js":1782,"./chunk-4DPX4O3T.js":1783,"./chunk-4URGXJP7.js":1784,"./chunk-5YBORD3A.js":1785,"./chunk-7Y6P5FRN.js":1786,"./chunk-ABKWEVW4.js":1787,"./chunk-AP7CJ6DA.js":1788,"./chunk-BO2ZDPWV.js":1789,"./chunk-BOFPNIRX.js":1790,"./chunk-CPUUURMT.js":1791,"./chunk-CXT7XBMN.js":1792,"./chunk-D74XJG2L.js":1793,"./chunk-EXN2TFDJ.js":1794,"./chunk-FOT4VRMQ.js":1795,"./chunk-G66GQJS6.js":1796,"./chunk-GRBWVPLF.js":1797,"./chunk-GZ3RVSUA.js":1798,"./chunk-HOY6NKQR.js":1799,"./chunk-JAUAKTUL.js":1800,"./chunk-JMP6XYRL.js":1801,"./chunk-JZCXZEFV.js":1802,"./chunk-KLK7ZRMH.js":1803,"./chunk-LWBPKSU2.js":1804,"./chunk-M2NMZ4ER.js":1805,"./chunk-NXZVKBSV.js":1806,"./chunk-OHMCPTOI.js":1807,"./chunk-OIEUL55W.js":1808,"./chunk-PT22IXNS.js":1809,"./chunk-RDBT3ZJQ.js":1810,"./chunk-VNOCJWOK.js":1811,"./chunk-WEY7ICES.js":1812,"./chunk-XWDEGRM5.js":1813,"./chunk-YYPUPKQY.js":1814},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-GRBWVPLF.js");e("./chunk-JAUAKTUL.js");var i=e("./chunk-JMP6XYRL.js");e("./chunk-WEY7ICES.js");var s=e("./chunk-PT22IXNS.js"),o=e("./chunk-LWBPKSU2.js"),a=e("./chunk-XWDEGRM5.js");e("./chunk-G66GQJS6.js");var l=e("./chunk-CPUUURMT.js"),c=e("./chunk-4CA3O64H.js"),u=e("./chunk-RDBT3ZJQ.js");e("./chunk-AP7CJ6DA.js"),e("./chunk-5YBORD3A.js");var d=e("./chunk-YYPUPKQY.js");e("./chunk-VNOCJWOK.js");var h=e("./chunk-GZ3RVSUA.js");e("./chunk-KLK7ZRMH.js"),e("./chunk-4URGXJP7.js"),e("./chunk-OHMCPTOI.js"),e("./chunk-D74XJG2L.js");var f=e("./chunk-FOT4VRMQ.js");e("./chunk-HOY6NKQR.js");var p=e("./chunk-ABKWEVW4.js"),m=e("./chunk-CXT7XBMN.js");e("./chunk-M2NMZ4ER.js");var g=e("./chunk-JZCXZEFV.js");e("./chunk-OIEUL55W.js");var v=e("./chunk-7Y6P5FRN.js");e("./chunk-BO2ZDPWV.js"),e("./chunk-NXZVKBSV.js");var y=e("./chunk-4DPX4O3T.js");e("./chunk-BOFPNIRX.js"),e("./chunk-EXN2TFDJ.js"),r.AbstractExecutionService=g.AbstractExecutionService,r.BaseNpmLocation=a.BaseNpmLocation,r.CronjobController=n.CronjobController,r.DAILY_TIMEOUT=n.DAILY_TIMEOUT,r.DEFAULT_NPM_REGISTRY=a.DEFAULT_NPM_REGISTRY,r.HttpLocation=u.HttpLocation,r.IframeExecutionService=p.IframeExecutionService,r.JsonSnapsRegistry=l.JsonSnapsRegistry,r.LocalLocation=o.LocalLocation,r.NpmLocation=a.NpmLocation,r.OffscreenExecutionService=m.OffscreenExecutionService,r.ProxyPostMessageStream=v.ProxyPostMessageStream,r.SNAP_APPROVAL_INSTALL=i.SNAP_APPROVAL_INSTALL,r.SNAP_APPROVAL_RESULT=i.SNAP_APPROVAL_RESULT,r.SNAP_APPROVAL_UPDATE=i.SNAP_APPROVAL_UPDATE,r.SnapController=i.SnapController,r.SnapInterfaceController=h.SnapInterfaceController,r.SnapsRegistryStatus=c.SnapsRegistryStatus,r.TARBALL_SIZE_SAFETY_LIMIT=a.TARBALL_SIZE_SAFETY_LIMIT,r.WebWorkerExecutionService=f.WebWorkerExecutionService,r.controllerName=i.controllerName,r.delay=y.delay,r.delayWithTimer=y.delayWithTimer,r.detectSnapLocation=s.detectSnapLocation,r.fetchNpmMetadata=a.fetchNpmMetadata,r.fetchSnap=y.fetchSnap,r.getNpmCanonicalBasePath=a.getNpmCanonicalBasePath,r.getRunnableSnaps=d.getRunnableSnaps,r.getSnapFiles=y.getSnapFiles,r.hasTimedOut=y.hasTimedOut,r.permissionsDiff=y.permissionsDiff,r.setDiff=y.setDiff,r.setupMultiplex=g.setupMultiplex,r.withTimeout=y.withTimeout}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/index.js"}],[1816,{"./chunk-UJFCPTF3.js":1818,"./chunk-Z4BLTVTB.js":1819},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i,s,o,a=e("./chunk-UJFCPTF3.js"),l=e("./chunk-Z4BLTVTB.js");n=new WeakMap,i=new WeakMap,s=new WeakMap,o=new WeakMap,r.ControllerMessenger=class{constructor(){l.__privateAdd.call(void 0,this,n,new Map),l.__privateAdd.call(void 0,this,i,new Map),l.__privateAdd.call(void 0,this,s,new Map),l.__privateAdd.call(void 0,this,o,new Map)}registerActionHandler(e,t){if(l.__privateGet.call(void 0,this,n).has(e))throw new Error(`A handler for ${e} has already been registered`);l.__privateGet.call(void 0,this,n).set(e,t)}unregisterActionHandler(e){l.__privateGet.call(void 0,this,n).delete(e)}clearActions(){l.__privateGet.call(void 0,this,n).clear()}call(e,...t){const r=l.__privateGet.call(void 0,this,n).get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}registerInitialEventPayload({eventType:e,getPayload:t}){l.__privateGet.call(void 0,this,s).set(e,t)}publish(e,...t){const r=l.__privateGet.call(void 0,this,i).get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=l.__privateGet.call(void 0,this,o).get(e),i=n(...t);i!==r&&(l.__privateGet.call(void 0,this,o).set(e,i),e(i,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=l.__privateGet.call(void 0,this,i).get(e);if(n||(n=new Map,l.__privateGet.call(void 0,this,i).set(e,n)),n.set(t,r),r){const n=l.__privateGet.call(void 0,this,s).get(e);if(n){const e=r(...n());l.__privateGet.call(void 0,this,o).set(t,e)}}}unsubscribe(e,t){const r=l.__privateGet.call(void 0,this,i).get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&l.__privateGet.call(void 0,this,o).delete(t),r.delete(t)}clearEventSubscriptions(e){l.__privateGet.call(void 0,this,i).delete(e)}clearSubscriptions(){l.__privateGet.call(void 0,this,i).clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new(0,a.RestrictedControllerMessenger)({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/snaps-controllers>@metamask/base-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/base-controller/dist/chunk-G42723LG.js"}],[1817,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=class{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e of Object.keys(this.internalConfig)){const t=this.internalConfig[e];void 0!==t&&(this[e]=t)}}else for(const t of Object.keys(e))if(void 0!==this.internalConfig[t]){const r=e[t];this.internalConfig[t]=r,this[t]=r}}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}},i=n;r.BaseControllerV1=n,r.BaseControllerV1_default=i}}},{package:"@metamask/snaps-controllers>@metamask/base-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/base-controller/dist/chunk-NINOM2XQ.js"}],[1818,{"./chunk-Z4BLTVTB.js":1819},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i,s,o,a,l,c,u,d,h,f=e("./chunk-Z4BLTVTB.js");n=new WeakMap,i=new WeakMap,s=new WeakMap,o=new WeakMap,a=new WeakSet,l=function(e){const t=f.__privateGet.call(void 0,this,o);return f.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},c=new WeakSet,u=function(e){const t=f.__privateGet.call(void 0,this,s);return f.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},d=new WeakSet,h=function(e){return e.startsWith(`${f.__privateGet.call(void 0,this,i)}:`)},r.RestrictedControllerMessenger=class{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:l}){f.__privateAdd.call(void 0,this,a),f.__privateAdd.call(void 0,this,c),f.__privateAdd.call(void 0,this,d),f.__privateAdd.call(void 0,this,n,void 0),f.__privateAdd.call(void 0,this,i,void 0),f.__privateAdd.call(void 0,this,s,void 0),f.__privateAdd.call(void 0,this,o,void 0),f.__privateSet.call(void 0,this,n,e),f.__privateSet.call(void 0,this,i,t),f.__privateSet.call(void 0,this,s,r),f.__privateSet.call(void 0,this,o,l)}registerActionHandler(e,t){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed registering action handlers prefixed by '${f.__privateGet.call(void 0,this,i)}:'`);f.__privateGet.call(void 0,this,n).registerActionHandler(e,t)}unregisterActionHandler(e){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed unregistering action handlers prefixed by '${f.__privateGet.call(void 0,this,i)}:'`);f.__privateGet.call(void 0,this,n).unregisterActionHandler(e)}call(e,...t){if(!f.__privateMethod.call(void 0,this,c,u).call(this,e))throw new Error(`Action missing from allow list: ${e}`);return f.__privateGet.call(void 0,this,n).call(e,...t)}registerInitialEventPayload({eventType:e,getPayload:t}){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${f.__privateGet.call(void 0,this,i)}:'`);f.__privateGet.call(void 0,this,n).registerInitialEventPayload({eventType:e,getPayload:t})}publish(e,...t){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${f.__privateGet.call(void 0,this,i)}:'`);f.__privateGet.call(void 0,this,n).publish(e,...t)}subscribe(e,t,r){if(!f.__privateMethod.call(void 0,this,a,l).call(this,e))throw new Error(`Event missing from allow list: ${e}`);return r?f.__privateGet.call(void 0,this,n).subscribe(e,t,r):f.__privateGet.call(void 0,this,n).subscribe(e,t)}unsubscribe(e,t){if(!f.__privateMethod.call(void 0,this,a,l).call(this,e))throw new Error(`Event missing from allow list: ${e}`);f.__privateGet.call(void 0,this,n).unsubscribe(e,t)}clearEventSubscriptions(e){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed clearing events prefixed by '${f.__privateGet.call(void 0,this,i)}:'`);f.__privateGet.call(void 0,this,n).clearEventSubscriptions(e)}}}}},{package:"@metamask/snaps-controllers>@metamask/base-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/base-controller/dist/chunk-UJFCPTF3.js"}],[1819,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__privateGet=(e,t,r)=>(n(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,i)=>(n(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(n(e,t,"access private method"),r)}}},{package:"@metamask/snaps-controllers>@metamask/base-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/base-controller/dist/chunk-Z4BLTVTB.js"}],[182,{"@metamask/utils":2021,lodash:3587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);t.meta.version=s;const r=function(e){if(!(0,i.hasProperty)(e,"SnapController")||!(0,i.hasProperty)(e,"PermissionController")||!(0,i.isObject)(e.PermissionController))return e;const{PermissionController:t}=e,{subjects:r}=t;if(!(0,i.isObject)(r))return e;const s="wallet_snap_";for(const[t,o]of Object.entries(r)){if(!(0,i.isObject)(o)||!(0,i.isObject)(o.permissions))return e;let r,a=1;const{permissions:l}=o,c={...l};for(const[o,u]of Object.entries(l))if(o.startsWith(s)){if(!(0,i.isObject)(u)||!(0,i.hasProperty)(u,"id")||!(0,i.hasProperty)(u,"date"))return e;if((0,i.hasProperty)(c,"wallet_snap")||(c.wallet_snap={caveats:[{type:"snapIds",value:{}}],invoker:t,parentCapability:"wallet_snap"}),!(0,i.isObject)(c.wallet_snap))return e;if(!(0,n.isArray)(c.wallet_snap.caveats))return e;const l=o.slice(s.length),d=c.wallet_snap.caveats[0];if(!(0,i.isObject)(d))return e;if(!(0,i.hasProperty)(d,"type")||"snapIds"!==d.type||!(0,i.hasProperty)(d,"value")||!(0,i.isObject)(d.value))return e;if(d.value[l]={},"number"!=typeof u.date||"string"!=typeof u.id)return e;u.date>a&&(a=u.date,r=u.id),delete c[o]}c.wallet_snap&&(c.wallet_snap.date=a,c.wallet_snap.id=r,o.permissions=c)}return e}(t.data);return t.data=r,t},r.version=void 0;var n=e("lodash"),i=e("@metamask/utils");const s=r.version=81}}},{package:"$root$",file:"app/scripts/migrations/081.ts"}],[1820,{"./chunk-Z4BLTVTB.js":1819,immer:3366},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i=e("./chunk-Z4BLTVTB.js"),s=e("immer");s.enablePatches.call(void 0);function o(e,t,r){return Object.keys(e).reduce(((n,i)=>{try{const s=t[i];if(!s)throw new Error(`No metadata found for '${String(i)}'`);const o=s[r],a=e[i];return"function"==typeof o?n[i]=o(a):o&&(n[i]=a),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}n=new WeakMap,r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:o}){i.__privateAdd.call(void 0,this,n,void 0),this.messagingSystem=e,this.name=r,i.__privateSet.call(void 0,this,n,s.freeze.call(void 0,o,!0)),this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state)),this.messagingSystem.registerInitialEventPayload({eventType:`${r}:stateChange`,getPayload:()=>[this.state,[]]})}get state(){return i.__privateGet.call(void 0,this,n)}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,o]=s.produceWithPatches.call(void 0,i.__privateGet.call(void 0,this,n),e);return i.__privateSet.call(void 0,this,n,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:o}}applyPatches(e){const t=s.applyPatches.call(void 0,i.__privateGet.call(void 0,this,n),e);i.__privateSet.call(void 0,this,n,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return o(e,t,"anonymous")},r.getPersistentState=function(e,t){return o(e,t,"persist")}}}},{package:"@metamask/snaps-controllers>@metamask/base-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/base-controller/dist/chunk-ZNOPSWMU.js"}],[1821,{"./chunk-G42723LG.js":1816,"./chunk-NINOM2XQ.js":1817,"./chunk-UJFCPTF3.js":1818,"./chunk-Z4BLTVTB.js":1819,"./chunk-ZNOPSWMU.js":1820},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-NINOM2XQ.js"),i=e("./chunk-ZNOPSWMU.js"),s=e("./chunk-G42723LG.js"),o=e("./chunk-UJFCPTF3.js");e("./chunk-Z4BLTVTB.js"),r.BaseController=i.BaseController,r.BaseControllerV1=n.BaseControllerV1,r.ControllerMessenger=s.ControllerMessenger,r.RestrictedControllerMessenger=o.RestrictedControllerMessenger,r.getAnonymizedState=i.getAnonymizedState,r.getPersistentState=i.getPersistentState}}},{package:"@metamask/snaps-controllers>@metamask/base-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/base-controller/dist/index.js"}],[1822,{"./chunk-Z4BLTVTB.js":1827,"@metamask/rpc-errors":1621,"@metamask/safe-event-emitter":1622,"@metamask/utils":2021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i,s,o,a,l,c,u,d,h,f,p,m,g,v,y,b,w,_,k,S=e("./chunk-Z4BLTVTB.js"),E=e("@metamask/rpc-errors"),T=e("@metamask/safe-event-emitter"),j=(n=T)&&n.__esModule?n:{default:n},A=e("@metamask/utils"),P=class e extends j.default{constructor({notificationHandler:e}={}){super(),S.__privateAdd.call(void 0,this,a),S.__privateAdd.call(void 0,this,c),S.__privateAdd.call(void 0,this,d),S.__privateAdd.call(void 0,this,i,!1),S.__privateAdd.call(void 0,this,s,void 0),S.__privateAdd.call(void 0,this,o,void 0),S.__privateSet.call(void 0,this,s,[]),S.__privateSet.call(void 0,this,o,e)}destroy(){S.__privateGet.call(void 0,this,s).forEach((e=>{"destroy"in e&&"function"==typeof e.destroy&&e.destroy()})),S.__privateSet.call(void 0,this,s,[]),S.__privateSet.call(void 0,this,i,!0)}push(e){S.__privateMethod.call(void 0,this,a,l).call(this),S.__privateGet.call(void 0,this,s).push(e)}handle(e,t){if(S.__privateMethod.call(void 0,this,a,l).call(this),t&&"function"!=typeof t)throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?t?S.__privateMethod.call(void 0,this,c,u).call(this,e,t):S.__privateMethod.call(void 0,this,c,u).call(this,e):t?S.__privateMethod.call(void 0,this,d,h).call(this,e,t):this._promiseHandle(e)}asMiddleware(){return S.__privateMethod.call(void 0,this,a,l).call(this),async(t,r,n,i)=>{var o,a;try{const[l,c,u]=await S.__privateMethod.call(void 0,o=e,m,g).call(o,t,r,S.__privateGet.call(void 0,this,s));return c?(await S.__privateMethod.call(void 0,a=e,b,w).call(a,u),i(l)):n((async t=>{var r;try{await S.__privateMethod.call(void 0,r=e,b,w).call(r,u)}catch(e){return t(e)}return t()}))}catch(e){return i(e)}}}async _promiseHandle(e){return new Promise(((t,r)=>{S.__privateMethod.call(void 0,this,d,h).call(this,e,((e,n)=>{e&&void 0===n?r(e):t(n)})).catch(r)}))}};i=new WeakMap,s=new WeakMap,o=new WeakMap,a=new WeakSet,l=function(){if(S.__privateGet.call(void 0,this,i))throw new Error("This engine is destroyed and can no longer be used.")},c=new WeakSet,u=async function(e,t){try{if(0===e.length){const e=[{id:null,jsonrpc:"2.0",error:new(0,E.JsonRpcError)(E.errorCodes.rpc.invalidRequest,"Request batch must contain plain objects. Received an empty array")}];return t?t(null,e):e}const r=(await Promise.all(e.map(this._promiseHandle.bind(this)))).filter((e=>void 0!==e));return t?t(null,r):r}catch(e){if(t)return t(e);throw e}},d=new WeakSet,h=async function(e,t){var r;if(!e||Array.isArray(e)||"object"!=typeof e){const r=new(0,E.JsonRpcError)(E.errorCodes.rpc.invalidRequest,"Requests must be plain objects. Received: "+typeof e,{request:e});return t(r,{id:null,jsonrpc:"2.0",error:r})}if("string"!=typeof e.method){const r=new(0,E.JsonRpcError)(E.errorCodes.rpc.invalidRequest,"Must specify a string method. Received: "+typeof e.method,{request:e});return S.__privateGet.call(void 0,this,o)&&!A.isJsonRpcRequest.call(void 0,e)?t(null):t(r,{id:e.id??null,jsonrpc:"2.0",error:r})}if(S.__privateGet.call(void 0,this,o)&&A.isJsonRpcNotification.call(void 0,e)&&!A.isJsonRpcRequest.call(void 0,e)){try{await S.__privateGet.call(void 0,this,o).call(this,e)}catch(e){return t(e)}return t(null)}let n=null;const i={...e},a={id:i.id,jsonrpc:i.jsonrpc};try{await S.__privateMethod.call(void 0,r=P,f,p).call(r,i,a,S.__privateGet.call(void 0,this,s))}catch(e){n=e}return n&&(delete a.result,a.error||(a.error=E.serializeError.call(void 0,n))),t(n,a)},f=new WeakSet,p=async function(e,t,r){var n,i,s;const[o,a,l]=await S.__privateMethod.call(void 0,n=P,m,g).call(n,e,t,r);if(S.__privateMethod.call(void 0,i=P,_,k).call(i,e,t,a),await S.__privateMethod.call(void 0,s=P,b,w).call(s,l),o)throw o},m=new WeakSet,g=async function(e,t,r){var n;const i=[];let s=null,o=!1;for(const a of r)if([s,o]=await S.__privateMethod.call(void 0,n=P,v,y).call(n,e,t,a,i),o)break;return[s,o,i.reverse()]},v=new WeakSet,y=async function(e,t,r,n){return new Promise((i=>{const s=e=>{const r=e||t.error;r&&(t.error=E.serializeError.call(void 0,r)),i([r,!0])},o=r=>{t.error?s(t.error):(r&&("function"!=typeof r&&s(new(0,E.JsonRpcError)(E.errorCodes.rpc.internal,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof r}" for request:\n${x(e)}`,{request:e})),n.push(r)),i([null,!1]))};try{r(e,t,o,s)}catch(e){s(e)}}))},b=new WeakSet,w=async function(e){for(const t of e)await new Promise(((e,r)=>{t((t=>t?r(t):e()))}))},_=new WeakSet,k=function(e,t,r){if(!A.hasProperty.call(void 0,t,"result")&&!A.hasProperty.call(void 0,t,"error"))throw new(0,E.JsonRpcError)(E.errorCodes.rpc.internal,`JsonRpcEngine: Response has no error or result for request:\n${x(e)}`,{request:e});if(!r)throw new(0,E.JsonRpcError)(E.errorCodes.rpc.internal,`JsonRpcEngine: Nothing ended request:\n${x(e)}`,{request:e})},S.__privateAdd.call(void 0,P,f),S.__privateAdd.call(void 0,P,m),S.__privateAdd.call(void 0,P,v),S.__privateAdd.call(void 0,P,b),S.__privateAdd.call(void 0,P,_);var C=P;function x(e){return JSON.stringify(e,null,2)}r.JsonRpcEngine=C}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-engine",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/json-rpc-engine/dist/chunk-2LXAFMJD.js"}],[1823,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createScaffoldMiddleware=function(e){return(t,r,n,i)=>{const s=e[t.method];return void 0===s?n():"function"==typeof s?s(t,r,n,i):(r.result=s,i())}}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-engine",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/json-rpc-engine/dist/chunk-3AC2MIND.js"}],[1824,{"./chunk-XDGWQHNY.js":1826},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-XDGWQHNY.js");r.createIdRemapMiddleware=function(){return(e,t,r,i)=>{const s=e.id,o=n.getUniqueId.call(void 0);e.id=o,t.id=o,r((r=>{e.id=s,t.id=s,r()}))}}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-engine",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/json-rpc-engine/dist/chunk-PBQXMZM5.js"}],[1825,{"./chunk-2LXAFMJD.js":1822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-2LXAFMJD.js");r.mergeMiddleware=function(e){const t=new(0,n.JsonRpcEngine);return e.forEach((e=>t.push(e))),t.asMiddleware()}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-engine",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/json-rpc-engine/dist/chunk-VK4MHWJV.js"}],[1826,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=4294967295,i=Math.floor(Math.random()*n);r.getUniqueId=function(){return i=(i+1)%n}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-engine",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/json-rpc-engine/dist/chunk-XDGWQHNY.js"}],[1827,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__privateGet=(e,t,r)=>(n(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,i)=>(n(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(n(e,t,"access private method"),r)}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-engine",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/json-rpc-engine/dist/chunk-Z4BLTVTB.js"}],[1828,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createAsyncMiddleware=function(e){return async(t,r,n,i)=>{let s;const o=new Promise((e=>{s=e}));let a=null,l=!1;const c=async()=>(l=!0,n((e=>{a=e,s()})),o);try{await e(t,r,c),l?(await o,a(null)):i(null)}catch(e){a?a(e):i(e)}}}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-engine",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/json-rpc-engine/dist/chunk-ZYXL5TCS.js"}],[1829,{"./chunk-2LXAFMJD.js":1822,"./chunk-3AC2MIND.js":1823,"./chunk-PBQXMZM5.js":1824,"./chunk-VK4MHWJV.js":1825,"./chunk-XDGWQHNY.js":1826,"./chunk-Z4BLTVTB.js":1827,"./chunk-ZYXL5TCS.js":1828},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-ZYXL5TCS.js"),i=e("./chunk-3AC2MIND.js"),s=e("./chunk-PBQXMZM5.js"),o=e("./chunk-XDGWQHNY.js"),a=e("./chunk-VK4MHWJV.js"),l=e("./chunk-2LXAFMJD.js");e("./chunk-Z4BLTVTB.js"),r.JsonRpcEngine=l.JsonRpcEngine,r.createAsyncMiddleware=n.createAsyncMiddleware,r.createIdRemapMiddleware=s.createIdRemapMiddleware,r.createScaffoldMiddleware=i.createScaffoldMiddleware,r.getUniqueId=o.getUniqueId,r.mergeMiddleware=a.mergeMiddleware}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-engine",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/json-rpc-engine/dist/index.js"}],[183,{"@metamask/utils":2021,lodash:3587,loglevel:3593,uuid:4208},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=l,t.data=function(e){if(!(0,s.hasProperty)(e,"PreferencesController"))return a.default.warn("state.PreferencesController is undefined"),e;if(!(0,s.isObject)(e.PreferencesController)){var t,r;return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.PreferencesController is "+typeof e.PreferencesController)),e}if(!(0,s.hasProperty)(e,"NetworkController")||!(0,s.isObject)(e.NetworkController)){var n,i;return null===(n=global.sentry)||void 0===n||null===(i=n.captureException)||void 0===i||i.call(n,new Error("typeof state.NetworkController is "+typeof e.NetworkController)),e}if(!(0,s.hasProperty)(e.PreferencesController,"frequentRpcListDetail")||!Array.isArray(e.PreferencesController.frequentRpcListDetail)){var l,c;if(!(e.NetworkController.networkConfigurations&&e.PreferencesController.frequentRpcListDetail===undefined))null===(l=global.sentry)||void 0===l||null===(c=l.captureException)||void 0===c||c.call(l,new Error("typeof state.PreferencesController.frequentRpcListDetail is "+typeof e.PreferencesController.frequentRpcListDetail));return e}if(!e.PreferencesController.frequentRpcListDetail.every(s.isObject)){var u,d;const t=e.PreferencesController.frequentRpcListDetail.find((e=>!(0,s.isObject)(e)));return null===(u=global.sentry)||void 0===u||null===(d=u.captureException)||void 0===d||d.call(u,new Error("state.PreferencesController.frequentRpcListDetail contains an element of type "+typeof t)),e}const{PreferencesController:h,NetworkController:f}=e,{frequentRpcListDetail:p}=h;if(!Array.isArray(p))return e;const m=p.reduce(((e,{rpcUrl:t,chainId:r,ticker:n,nickname:i,rpcPrefs:s})=>{const a=(0,o.v4)();return{...e,[a]:{rpcUrl:t,chainId:r,ticker:n,rpcPrefs:s,nickname:i}}}),{});return delete h.frequentRpcListDetail,{...e,NetworkController:{...f,networkConfigurations:m},PreferencesController:{...h}}}(t.data),t},r.version=void 0;var n,i=e("lodash"),s=e("@metamask/utils"),o=e("uuid"),a=(n=e("loglevel"))&&n.__esModule?n:{default:n};const l=r.version=82}}},{package:"$root$",file:"app/scripts/migrations/082.ts"}],[1830,{buffer:2744,"buffer-from":2749,inherits:3367,"readable-stream":1847,typedarray:4165},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("readable-stream").Writable,i=e("inherits"),s=e("buffer-from");if("undefined"==typeof Uint8Array)var o=e("typedarray").Uint8Array;else o=Uint8Array;function a(e,t){if(!(this instanceof a))return new a(e,t);"function"==typeof e&&(t=e,e={}),e||(e={});var r=e.encoding,i=!1;r?"u8"!==(r=String(r).toLowerCase())&&"uint8"!==r||(r="uint8array"):i=!0,n.call(this,{objectMode:!0}),this.encoding=r,this.shouldInferEncoding=i,t&&this.on("finish",(function(){t(this.getBody())})),this.body=[]}t.exports=a,i(a,n),a.prototype._write=function(e,t,r){this.body.push(e),r()},a.prototype.inferEncoding=function(e){var t=e===undefined?this.body[0]:e;return r.isBuffer(t)?"buffer":"undefined"!=typeof Uint8Array&&t instanceof Uint8Array?"uint8array":Array.isArray(t)?"array":"string"==typeof t?"string":"[object Object]"===Object.prototype.toString.call(t)?"object":"buffer"},a.prototype.getBody=function(){return this.encoding||0!==this.body.length?(this.shouldInferEncoding&&(this.encoding=this.inferEncoding()),"array"===this.encoding?function(e){for(var t=[],r=0;r<e.length;r++)t.push.apply(t,e[r]);return t}(this.body):"string"===this.encoding?function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];"string"==typeof i||r.isBuffer(i)?t.push(i):l(i)?t.push(s(i)):t.push(s(String(i)))}t=r.isBuffer(e[0])?(t=r.concat(t)).toString("utf8"):t.join("");return t}(this.body):"buffer"===this.encoding?function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];r.isBuffer(i)?t.push(i):l(i)?t.push(s(i)):t.push(s(String(i)))}return r.concat(t)}(this.body):"uint8array"===this.encoding?function(e){for(var t=0,r=0;r<e.length;r++)"string"==typeof e[r]&&(e[r]=s(e[r])),t+=e[r].length;for(var n=new o(t),i=(r=0,0);r<e.length;r++)for(var a=e[r],l=0;l<a.length;l++)n[i++]=a[l];return n}(this.body):this.body):[]};Array.isArray;function l(e){return"string"==typeof e||(t=e,/Array\]$/.test(Object.prototype.toString.call(t)))||e&&"function"==typeof e.subarray;var t}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/snaps-controllers>concat-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/concat-stream/index.js"}],[1831,{"./url-alphabet/index.cjs":1832},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){let{urlAlphabet:n}=e("./url-alphabet/index.cjs"),i=e=>crypto.getRandomValues(new Uint8Array(e)),s=(e,t,r)=>{let n=(2<<Math.log(e.length-1)/Math.LN2)-1,i=-~(1.6*n*t/e.length);return(s=t)=>{let o="";for(;;){let t=r(i),a=i;for(;a--;)if(o+=e[t[a]&n]||"",o.length===s)return o}}};t.exports={nanoid:(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),""),customAlphabet:(e,t=21)=>s(e,t,i),customRandom:s,urlAlphabet:n,random:i}}}},{package:"@metamask/snaps-controllers>nanoid",file:"node_modules/@metamask/snaps-controllers/node_modules/nanoid/index.browser.cjs"}],[1832,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={urlAlphabet:"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"}}}},{package:"@metamask/snaps-controllers>nanoid",file:"node_modules/@metamask/snaps-controllers/node_modules/nanoid/url-alphabet/index.cjs"}],[1833,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n={};function i(e,t,r){r||(r=Error);var i=function(e){var r,n;function i(r,n,i){return e.call(this,function(e,r,n){return"string"==typeof t?t:t(e,r,n)}(r,n,i))||this}return n=e,(r=i).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,i}(r);i.prototype.name=r.name,i.prototype.code=e,n[e]=i}function s(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}i("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(e,t,r){var n,i,o,a;if("string"==typeof t&&(i="not ",t.substr(!o||o<0?0:+o,i.length)===i)?(n="must not be",t=t.replace(/^not /,"")):n="must be",function(e,t,r){return(r===undefined||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))a="The ".concat(e," ").concat(n," ").concat(s(t,"type"));else{var l=function(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}(e,".")?"property":"argument";a='The "'.concat(e,'" ').concat(l," ").concat(n," ").concat(s(t,"type"))}return a+=". Received type ".concat(typeof r)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=n}}},{package:"@metamask/snaps-controllers>readable-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/readable-stream/errors-browser.js"}],[1834,{"./_stream_readable":1836,"./_stream_writable":1838,_process:3738,inherits:3367},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};t.exports=c;var i=e("./_stream_readable"),s=e("./_stream_writable");e("inherits")(c,i);for(var o=n(s.prototype),a=0;a<o.length;a++){var l=o[a];c.prototype[l]||(c.prototype[l]=s.prototype[l])}function c(e){if(!(this instanceof c))return new c(e);i.call(this,e),s.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",u)))}function u(){this._writableState.ended||r.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/snaps-controllers>readable-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/_stream_duplex.js"}],[1835,{"./_stream_transform":1837,inherits:3367},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=i;var n=e("./_stream_transform");function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}e("inherits")(i,n),i.prototype._transform=function(e,t,r){r(null,e)}}}},{package:"@metamask/snaps-controllers>readable-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/_stream_passthrough.js"}],[1836,{"../errors":1833,"./_stream_duplex":1834,"./internal/streams/async_iterator":1839,"./internal/streams/buffer_list":1840,"./internal/streams/destroy":1841,"./internal/streams/from":1843,"./internal/streams/state":1845,"./internal/streams/stream":1846,_process:3738,buffer:2744,events:3046,inherits:3367,"string_decoder/":4138,util:2709},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n;t.exports=E,E.ReadableState=S;e("events").EventEmitter;var i=function(e,t){return e.listeners(t).length},s=e("./internal/streams/stream"),o=e("buffer").Buffer,a=("undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var l,c=e("util");l=c&&c.debuglog?c.debuglog("stream"):function(){};var u,d,h,f=e("./internal/streams/buffer_list"),p=e("./internal/streams/destroy"),m=e("./internal/streams/state").getHighWaterMark,g=e("../errors").codes,v=g.ERR_INVALID_ARG_TYPE,y=g.ERR_STREAM_PUSH_AFTER_EOF,b=g.ERR_METHOD_NOT_IMPLEMENTED,w=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(E,s);var _=p.errorOrDestroy,k=["error","close","destroy","pause","resume"];function S(t,r,i){n=n||e("./_stream_duplex"),t=t||{},"boolean"!=typeof i&&(i=r instanceof n),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=m(this,t,"readableHighWaterMark",i),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(u||(u=e("string_decoder/").StringDecoder),this.decoder=new u(t.encoding),this.encoding=t.encoding)}function E(t){if(n=n||e("./_stream_duplex"),!(this instanceof E))return new E(t);var r=this instanceof n;this._readableState=new S(t,this,r),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),s.call(this)}function T(e,t,r,n,i){l("readableAddChunk",t);var s,c=e._readableState;if(null===t)c.reading=!1,function(e,t){if(l("onEofChunk"),t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?C(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,x(e)))}(e,c);else if(i||(s=function(e,t){var r;n=t,o.isBuffer(n)||n instanceof a||"string"==typeof t||t===undefined||e.objectMode||(r=new v("chunk",["string","Buffer","Uint8Array"],t));var n;return r}(c,t)),s)_(e,s);else if(c.objectMode||t&&t.length>0)if("string"==typeof t||c.objectMode||Object.getPrototypeOf(t)===o.prototype||(t=function(e){return o.from(e)}(t)),n)c.endEmitted?_(e,new w):j(e,c,t,!0);else if(c.ended)_(e,new y);else{if(c.destroyed)return!1;c.reading=!1,c.decoder&&!r?(t=c.decoder.write(t),c.objectMode||0!==t.length?j(e,c,t,!1):O(e,c)):j(e,c,t,!1)}else n||(c.reading=!1,O(e,c));return!c.ended&&(c.length<c.highWaterMark||0===c.length)}function j(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&C(e)),O(e,t)}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),E.prototype.destroy=p.destroy,E.prototype._undestroy=p.undestroy,E.prototype._destroy=function(e,t){t(e)},E.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=o.from(e,t),t=""),r=!0),T(this,e,t,!1,r)},E.prototype.unshift=function(e){return T(this,e,null,!0,!1)},E.prototype.isPaused=function(){return!1===this._readableState.flowing},E.prototype.setEncoding=function(t){u||(u=e("string_decoder/").StringDecoder);var r=new u(t);this._readableState.decoder=r,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=r.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var A=1073741824;function P(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=A?e=A:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function C(e){var t=e._readableState;l("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(l("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(x,e))}function x(e){var t=e._readableState;l("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,N(e)}function O(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(M,e,t))}function M(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(l("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function B(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function I(e){l("readable nexttick read 0"),e.read(0)}function R(e,t){l("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),N(e),t.flowing&&!t.reading&&e.read(0)}function N(e){var t=e._readableState;for(l("flow",t.flowing);t.flowing&&null!==e.read(););}function L(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function D(e){var t=e._readableState;l("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(F,t,e))}function F(e,t){if(l("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function U(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}E.prototype.read=function(e){l("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return l("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?D(this):C(this),null;if(0===(e=P(e,t))&&t.ended)return 0===t.length&&D(this),null;var n,i=t.needReadable;return l("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&l("length less than watermark",i=!0),t.ended||t.reading?l("reading or ended",i=!1):i&&(l("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=P(r,t))),null===(n=e>0?L(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&D(this)),null!==n&&this.emit("data",n),n},E.prototype._read=function(e){_(this,new b("_read()"))},E.prototype.pipe=function(e,t){var n=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=e;break;case 1:s.pipes=[s.pipes,e];break;default:s.pipes.push(e)}s.pipesCount+=1,l("pipe count=%d opts=%j",s.pipesCount,t);var o=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?c:g;function a(t,r){l("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,l("cleanup"),e.removeListener("close",p),e.removeListener("finish",m),e.removeListener("drain",u),e.removeListener("error",f),e.removeListener("unpipe",a),n.removeListener("end",c),n.removeListener("end",g),n.removeListener("data",h),d=!0,!s.awaitDrain||e._writableState&&!e._writableState.needDrain||u())}function c(){l("onend"),e.end()}s.endEmitted?r.nextTick(o):n.once("end",o),e.on("unpipe",a);var u=function(e){return function(){var t=e._readableState;l("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,N(e))}}(n);e.on("drain",u);var d=!1;function h(t){l("ondata");var r=e.write(t);l("dest.write",r),!1===r&&((1===s.pipesCount&&s.pipes===e||s.pipesCount>1&&-1!==U(s.pipes,e))&&!d&&(l("false write response, pause",s.awaitDrain),s.awaitDrain++),n.pause())}function f(t){l("onerror",t),g(),e.removeListener("error",f),0===i(e,"error")&&_(e,t)}function p(){e.removeListener("finish",m),g()}function m(){l("onfinish"),e.removeListener("close",p),g()}function g(){l("unpipe"),n.unpipe(e)}return n.on("data",h),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",f),e.once("close",p),e.once("finish",m),e.emit("pipe",n),s.flowing||(l("pipe resume"),n.resume()),e},E.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=U(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},E.prototype.on=function(e,t){var n=s.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,l("on readable",i.length,i.reading),i.length?C(this):i.reading||r.nextTick(I,this))),n},E.prototype.addListener=E.prototype.on,E.prototype.removeListener=function(e,t){var n=s.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(B,this),n},E.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&e!==undefined||r.nextTick(B,this),t},E.prototype.resume=function(){var e=this._readableState;return e.flowing||(l("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(R,e,t))}(this,e)),e.paused=!1,this},E.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},E.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(l("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(l("wrapped data"),r.decoder&&(i=r.decoder.write(i)),!r.objectMode||null!==i&&i!==undefined)&&((r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause())))})),e)this[i]===undefined&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var s=0;s<k.length;s++)e.on(k[s],this.emit.bind(this,k[s]));return this._read=function(t){l("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(E.prototype[Symbol.asyncIterator]=function(){return d===undefined&&(d=e("./internal/streams/async_iterator")),d(this)}),Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(E.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(E.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),E._fromList=L,Object.defineProperty(E.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(E.from=function(t,r){return h===undefined&&(h=e("./internal/streams/from")),h(E,t,r)})}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/snaps-controllers>readable-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/_stream_readable.js"}],[1837,{"../errors":1833,"./_stream_duplex":1834,inherits:3367},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=u;var n=e("../errors").codes,i=n.ERR_METHOD_NOT_IMPLEMENTED,s=n.ERR_MULTIPLE_CALLBACK,o=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=n.ERR_TRANSFORM_WITH_LENGTH_0,l=e("./_stream_duplex");function c(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new s);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function u(e){if(!(this instanceof u))return new u(e);l.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function d(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,r){h(e,t,r)}))}function h(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new a;if(e._transformState.transforming)throw new o;return e.push(null)}e("inherits")(u,l),u.prototype.push=function(e,t){return this._transformState.needTransform=!1,l.prototype.push.call(this,e,t)},u.prototype._transform=function(e,t,r){r(new i("_transform()"))},u.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},u.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},u.prototype._destroy=function(e,t){l.prototype._destroy.call(this,e,(function(e){t(e)}))}}}},{package:"@metamask/snaps-controllers>readable-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/_stream_transform.js"}],[1838,{"../errors":1833,"./_stream_duplex":1834,"./internal/streams/destroy":1841,"./internal/streams/state":1845,"./internal/streams/stream":1846,_process:3738,buffer:2744,inherits:3367,"util-deprecate":4204},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){function n(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}var i;t.exports=E,E.WritableState=S;var s={deprecate:e("util-deprecate")},o=e("./internal/streams/stream"),a=e("buffer").Buffer,l=("undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var c,u=e("./internal/streams/destroy"),d=e("./internal/streams/state").getHighWaterMark,h=e("../errors").codes,f=h.ERR_INVALID_ARG_TYPE,p=h.ERR_METHOD_NOT_IMPLEMENTED,m=h.ERR_MULTIPLE_CALLBACK,g=h.ERR_STREAM_CANNOT_PIPE,v=h.ERR_STREAM_DESTROYED,y=h.ERR_STREAM_NULL_VALUES,b=h.ERR_STREAM_WRITE_AFTER_END,w=h.ERR_UNKNOWN_ENCODING,_=u.errorOrDestroy;function k(){}function S(t,s,o){i=i||e("./_stream_duplex"),t=t||{},"boolean"!=typeof o&&(o=s instanceof i),this.objectMode=!!t.objectMode,o&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=d(this,t,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,s=n.writecb;if("function"!=typeof s)throw new m;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,s){--t.pendingcb,n?(r.nextTick(s,i),r.nextTick(x,e,t),e._writableState.errorEmitted=!0,_(e,i)):(s(i),e._writableState.errorEmitted=!0,_(e,i),x(e,t))}(e,n,i,t,s);else{var o=P(n)||e.destroyed;o||n.corked||n.bufferProcessing||!n.bufferedRequest||A(e,n),i?r.nextTick(j,e,n,o,s):j(e,n,o,s)}}(s,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function E(t){var r=this instanceof(i=i||e("./_stream_duplex"));if(!r&&!c.call(E,this))return new E(t);this._writableState=new S(t,this,r),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),o.call(this)}function T(e,t,r,n,i,s,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new v("write")):r?e._writev(i,t.onwrite):e._write(i,s,t.onwrite),t.sync=!1}function j(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),x(e,t)}function A(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=t.bufferedRequestCount,s=new Array(i),o=t.corkedRequestsFree;o.entry=r;for(var a=0,l=!0;r;)s[a]=r,r.isBuf||(l=!1),r=r.next,a+=1;s.allBuffers=l,T(e,t,!0,t.length,s,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new n(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,u=r.encoding,d=r.callback;if(T(e,t,!1,t.objectMode?1:c.length,c,u,d),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function P(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function C(e,t){e._final((function(r){t.pendingcb--,r&&_(e,r),t.prefinished=!0,e.emit("prefinish"),x(e,t)}))}function x(e,t){var n=P(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,r.nextTick(C,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return n}e("inherits")(E,o),S.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(S.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(E,Symbol.hasInstance,{value:function(e){return!!c.call(this,e)||this===E&&(e&&e._writableState instanceof S)}})):c=function(e){return e instanceof this},E.prototype.pipe=function(){_(this,new g)},E.prototype.write=function(e,t,n){var i,s=this._writableState,o=!1,c=!s.objectMode&&(i=e,a.isBuffer(i)||i instanceof l);return c&&!a.isBuffer(e)&&(e=function(e){return a.from(e)}(e)),"function"==typeof t&&(n=t,t=null),c?t="buffer":t||(t=s.defaultEncoding),"function"!=typeof n&&(n=k),s.ending?function(e,t){var n=new b;_(e,n),r.nextTick(t,n)}(this,n):(c||function(e,t,n,i){var s;return null===n?s=new y:"string"==typeof n||t.objectMode||(s=new f("chunk",["string","Buffer"],n)),!s||(_(e,s),r.nextTick(i,s),!1)}(this,s,e,n))&&(s.pendingcb++,o=function(e,t,r,n,i,s){if(!r){var o=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=a.from(t,r));return t}(t,n,i);n!==o&&(r=!0,i="buffer",n=o)}var l=t.objectMode?1:n.length;t.length+=l;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else T(e,t,!1,l,n,i,s);return c}(this,s,c,e,t,n)),o},E.prototype.cork=function(){this._writableState.corked++},E.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||A(this,e))},E.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new w(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(E.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),E.prototype._write=function(e,t,r){r(new p("_write()"))},E.prototype._writev=null,E.prototype.end=function(e,t,n){var i=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&e!==undefined&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,n){t.ending=!0,x(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,i,n),this},Object.defineProperty(E.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==undefined&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),E.prototype.destroy=u.destroy,E.prototype._undestroy=u.undestroy,E.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/snaps-controllers>readable-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/_stream_writable.js"}],[1839,{"./end-of-stream":1842,_process:3738},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n;function i(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=e("./end-of-stream"),o=Symbol("lastResolve"),a=Symbol("lastReject"),l=Symbol("error"),c=Symbol("ended"),u=Symbol("lastPromise"),d=Symbol("handlePromise"),h=Symbol("stream");function f(e,t){return{value:e,done:t}}function p(e){var t=e[o];if(null!==t){var r=e[h].read();null!==r&&(e[u]=null,e[o]=null,e[a]=null,t(f(r,!1)))}}function m(e){r.nextTick(p,e)}var g=Object.getPrototypeOf((function(){})),v=Object.setPrototypeOf((i(n={get stream(){return this[h]},next:function(){var e=this,t=this[l];if(null!==t)return Promise.reject(t);if(this[c])return Promise.resolve(f(undefined,!0));if(this[h].destroyed)return new Promise((function(t,n){r.nextTick((function(){e[l]?n(e[l]):t(f(undefined,!0))}))}));var n,i=this[u];if(i)n=new Promise(function(e,t){return function(r,n){e.then((function(){t[c]?r(f(undefined,!0)):t[d](r,n)}),n)}}(i,this));else{var s=this[h].read();if(null!==s)return Promise.resolve(f(s,!1));n=new Promise(this[d])}return this[u]=n,n}},Symbol.asyncIterator,(function(){return this})),i(n,"return",(function(){var e=this;return new Promise((function(t,r){e[h].destroy(null,(function(e){e?r(e):t(f(undefined,!0))}))}))})),n),g);t.exports=function(e){var t,r=Object.create(v,(i(t={},h,{value:e,writable:!0}),i(t,o,{value:null,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,l,{value:null,writable:!0}),i(t,c,{value:e._readableState.endEmitted,writable:!0}),i(t,d,{value:function(e,t){var n=r[h].read();n?(r[u]=null,r[o]=null,r[a]=null,e(f(n,!1))):(r[o]=e,r[a]=t)},writable:!0}),t));return r[u]=null,s(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[a];return null!==t&&(r[u]=null,r[o]=null,r[a]=null,t(e)),void(r[l]=e)}var n=r[o];null!==n&&(r[u]=null,r[o]=null,r[a]=null,n(f(undefined,!0))),r[c]=!0})),e.on("readable",m.bind(null,r)),r}}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/snaps-controllers>readable-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/internal/streams/async_iterator.js"}],[184,{"@metamask/utils":2021,lodash:3587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=s,t.data=function(e){if(!(0,i.isObject)(e.NetworkController)){var t,r;return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController)),e}const{NetworkController:n}=e;if(!(0,i.isObject)(n.networkConfigurations)){var s,o;return null===(s=global.sentry)||void 0===s||null===(o=s.captureException)||void 0===o||o.call(s,new Error("typeof NetworkController.networkConfigurations is "+typeof n.networkConfigurations)),e}const{networkConfigurations:a}=n,l={};for(const t of Object.keys(a)){const r=a[t];if(!(0,i.isObject)(r))return e;l[t]={...r,id:t}}return{...e,NetworkController:{...n,networkConfigurations:l}}}(t.data),t},r.version=void 0;var n=e("lodash"),i=e("@metamask/utils");const s=r.version=83}}},{package:"$root$",file:"app/scripts/migrations/083.ts"}],[1840,{buffer:2744,util:2709},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return(t=a(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var l=e("buffer").Buffer,c=e("util").inspect,u=c&&c.custom||"inspect";t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,r,n;return t=e,(r=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return l.alloc(0);for(var t,r,n,i=l.allocUnsafe(e>>>0),s=this.head,o=0;s;)t=s.data,r=i,n=o,l.prototype.copy.call(t,r,n),o+=s.data.length,s=s.next;return i}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,s=e>i.length?i.length:e;if(s===i.length?n+=i:n+=i.slice(0,e),0==(e-=s)){s===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(s));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=l.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,s=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,s),0==(e-=s)){s===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(s));break}++n}return this.length-=n,t}},{key:u,value:function(e,t){return c(this,i(i({},t),{},{depth:0,customInspect:!1}))}}])&&o(t.prototype,r),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()}}},{package:"@metamask/snaps-controllers>readable-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/internal/streams/buffer_list.js"}],[1841,{_process:3738},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){function r(e,t){i(e,t),n(e)}function n(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}t.exports={destroy:function(t,s){var o=this,a=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return a||l?(s?s(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(i,this,t)):e.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!s&&t?o._writableState?o._writableState.errorEmitted?e.nextTick(n,o):(o._writableState.errorEmitted=!0,e.nextTick(r,o,t)):e.nextTick(r,o,t):s?(e.nextTick(n,o),s(t)):e.nextTick(n,o)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/snaps-controllers>readable-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/internal/streams/destroy.js"}],[1842,{"../../../errors":1833},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function e(t,r,s){if("function"==typeof r)return e(t,null,r);r||(r={}),s=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}(s||i);var o=r.readable||!1!==r.readable&&t.readable,a=r.writable||!1!==r.writable&&t.writable,l=function(){t.writable||u()},c=t._writableState&&t._writableState.finished,u=function(){a=!1,c=!0,o||s.call(t)},d=t._readableState&&t._readableState.endEmitted,h=function(){o=!1,d=!0,a||s.call(t)},f=function(e){s.call(t,e)},p=function(){var e;return o&&!d?(t._readableState&&t._readableState.ended||(e=new n),s.call(t,e)):a&&!c?(t._writableState&&t._writableState.ended||(e=new n),s.call(t,e)):void 0},m=function(){t.req.on("finish",u)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?a&&!t._writableState&&(t.on("end",l),t.on("close",l)):(t.on("complete",u),t.on("abort",p),t.req?m():t.on("request",m)),t.on("end",h),t.on("finish",u),!1!==r.error&&t.on("error",f),t.on("close",p),function(){t.removeListener("complete",u),t.removeListener("abort",p),t.removeListener("request",m),t.req&&t.req.removeListener("finish",u),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",u),t.removeListener("end",h),t.removeListener("error",f),t.removeListener("close",p)}}}}},{package:"@metamask/snaps-controllers>readable-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/internal/streams/end-of-stream.js"}],[1843,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(){throw new Error("Readable.from is not available in the browser")}}}},{package:"@metamask/snaps-controllers>readable-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/internal/streams/from-browser.js"}],[1844,{"../../../errors":1833,"./end-of-stream":1842},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n;var i=e("../../../errors").codes,s=i.ERR_MISSING_ARGS,o=i.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function l(e){e()}function c(e,t){return e.pipe(t)}t.exports=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var u,d=function(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}(r);if(Array.isArray(r[0])&&(r=r[0]),r.length<2)throw new s("streams");var h=r.map((function(t,i){var s=i<r.length-1;return function(t,r,i,s){s=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(s);var a=!1;t.on("close",(function(){a=!0})),n===undefined&&(n=e("./end-of-stream")),n(t,{readable:r,writable:i},(function(e){if(e)return s(e);a=!0,s()}));var l=!1;return function(e){if(!a&&!l)return l=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void s(e||new o("pipe"))}}(t,s,i>0,(function(e){u||(u=e),e&&h.forEach(l),s||(h.forEach(l),d(u))}))}));return r.reduce(c)}}}},{package:"@metamask/snaps-controllers>readable-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/internal/streams/pipeline.js"}],[1845,{"../../../errors":1833},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,r,i){var s=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,i,r);if(null!=s){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new n(i?r:"highWaterMark",s);return Math.floor(s)}return e.objectMode?16:16384}}}}},{package:"@metamask/snaps-controllers>readable-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/internal/streams/state.js"}],[1846,{events:3046},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=e("events").EventEmitter}}},{package:"@metamask/snaps-controllers>readable-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/internal/streams/stream-browser.js"}],[1847,{"./lib/_stream_duplex.js":1834,"./lib/_stream_passthrough.js":1835,"./lib/_stream_readable.js":1836,"./lib/_stream_transform.js":1837,"./lib/_stream_writable.js":1838,"./lib/internal/streams/end-of-stream.js":1842,"./lib/internal/streams/pipeline.js":1844},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(r=t.exports=e("./lib/_stream_readable.js")).Stream=r,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js"),r.finished=e("./lib/internal/streams/end-of-stream.js"),r.pipeline=e("./lib/internal/streams/pipeline.js")}}},{package:"@metamask/snaps-controllers>readable-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/readable-stream/readable-browser.js"}],[185,{"@metamask/utils":2021,lodash:3587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=s,t.data=function(e){if(!(0,i.hasProperty)(e,"NetworkController")||!(0,i.isObject)(e.NetworkController)){var t,r;return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController)),e}if(!(0,i.hasProperty)(e.NetworkController,"network")){var n,s;if(e.NetworkController.networkId===undefined)null===(n=global.sentry)||void 0===n||null===(s=n.captureException)||void 0===s||s.call(n,new Error("typeof state.NetworkController.network is "+typeof e.NetworkController.network));return e}const o={...e.NetworkController};"loading"===o.network?(o.networkId=null,o.networkStatus="unknown"):(o.networkId=o.network,o.networkStatus="available");return delete o.network,{...e,NetworkController:o}}(t.data),t},r.version=void 0;var n=e("lodash"),i=e("@metamask/utils");const s=r.version=84}}},{package:"$root$",file:"app/scripts/migrations/084.ts"}],[1853,{"./verify":1854,"@metamask/utils":2021,superstruct:4142},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.SnapsRegistryDatabaseStruct=r.BlockedSnapStruct=r.BlockReasonStruct=r.VerifiedSnapStruct=r.ImagePathStruct=r.AdditionalSourceCodeStruct=r.SupportStruct=r.AuditStruct=r.AuthorStruct=void 0;const s=e("@metamask/utils"),o=e("superstruct"),a=(0,o.refine)((0,o.string)(),"Npm ID",(e=>e.startsWith("npm:"))),l=(0,o.object)({checksum:s.ChecksumStruct});r.AuthorStruct=(0,o.object)({name:(0,o.string)(),website:(0,o.string)()}),r.AuditStruct=(0,o.object)({auditor:(0,o.string)(),report:(0,o.string)()}),r.SupportStruct=(0,o.object)({knowledgeBase:(0,o.optional)((0,o.string)()),faq:(0,o.optional)((0,o.string)()),contact:(0,o.optional)((0,o.string)()),keyRecovery:(0,o.optional)((0,o.string)())}),r.AdditionalSourceCodeStruct=(0,o.object)({name:(0,o.string)(),url:(0,o.string)()}),r.ImagePathStruct=(0,o.pattern)((0,o.string)(),/\.\/images\/.*\/\d+\.(?:png|jpe?g)$/u),r.VerifiedSnapStruct=(0,o.object)({id:a,metadata:(0,o.object)({name:(0,o.string)(),type:(0,o.optional)((0,o.enums)(["account"])),author:(0,o.optional)(r.AuthorStruct),website:(0,o.optional)((0,o.string)()),onboard:(0,o.optional)((0,o.boolean)()),summary:(0,o.optional)((0,o.string)()),description:(0,o.optional)((0,o.string)()),audits:(0,o.optional)((0,o.array)(r.AuditStruct)),category:(0,o.optional)((0,o.enums)(["interoperability","notifications","transaction insights","account management"])),tags:(0,o.optional)((0,o.array)((0,o.string)())),support:(0,o.optional)(r.SupportStruct),sourceCode:(0,o.optional)((0,o.string)()),hidden:(0,o.optional)((0,o.boolean)()),privateCode:(0,o.optional)((0,o.boolean)()),privacyPolicy:(0,o.optional)((0,o.string)()),termsOfUse:(0,o.optional)((0,o.string)()),additionalSourceCode:(0,o.optional)((0,o.array)(r.AdditionalSourceCodeStruct)),screenshots:(0,o.optional)((0,o.size)((0,o.array)(r.ImagePathStruct),3,3))}),versions:(0,o.record)(s.VersionStruct,l)}),r.BlockReasonStruct=(0,o.object)({explanation:(0,o.optional)((0,o.string)()),url:(0,o.optional)((0,o.string)())}),r.BlockedSnapStruct=(0,o.union)([(0,o.object)({id:a,versionRange:s.VersionRangeStruct,reason:(0,o.optional)(r.BlockReasonStruct)}),(0,o.object)({checksum:s.ChecksumStruct,reason:(0,o.optional)(r.BlockReasonStruct)})]),r.SnapsRegistryDatabaseStruct=(0,o.object)({verifiedSnaps:(0,o.record)(a,r.VerifiedSnapStruct),blockedSnaps:(0,o.array)(r.BlockedSnapStruct)}),i(e("./verify"),r)}}},{package:"@metamask/snaps-utils>@metamask/snaps-registry",file:"node_modules/@metamask/snaps-registry/dist/index.js"}],[1854,{"@metamask/utils":2021,"@noble/curves/secp256k1":2048,"@noble/hashes/sha256":2057,superstruct:4142},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.verify=r.SignatureStruct=void 0;const n=e("@metamask/utils"),i=e("@noble/curves/secp256k1"),s=e("@noble/hashes/sha256"),o=e("superstruct");r.SignatureStruct=(0,o.object)({signature:n.StrictHexStruct,curve:(0,o.literal)("secp256k1"),format:(0,o.literal)("DER")}),r.verify=function({registry:e,signature:t,publicKey:o}){(0,n.assertStruct)(t,r.SignatureStruct,"Invalid signature object");const a=(0,n.hexToBytes)(o);return i.secp256k1.verify((0,n.remove0x)(t.signature),(0,s.sha256)((0,n.stringToBytes)(e)),a)}}}},{package:"@metamask/snaps-utils>@metamask/snaps-registry",file:"node_modules/@metamask/snaps-registry/dist/verify.js"}],[186,{"@metamask/utils":2021,lodash:3587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=s,t.data=function(e){if(!(0,i.isObject)(e.NetworkController)){var t,r;return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController)),e}return delete e.NetworkController.previousProviderStore,e}(t.data),t},r.version=void 0;var n=e("lodash"),i=e("@metamask/utils");const s=r.version=85}}},{package:"$root$",file:"app/scripts/migrations/085.ts"}],[187,{"@metamask/utils":2021,lodash:3587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=s,t.data=function(e){if((0,n.hasProperty)(e,"NetworkController")&&(0,n.isObject)(e.NetworkController)&&(0,n.hasProperty)(e.NetworkController,"provider")){const t=e.NetworkController;return t.providerConfig=t.provider,delete t.provider,{...e,NetworkController:t}}var t,r;if((0,n.isObject)(e.NetworkController)){if(!(0,n.hasProperty)(e.NetworkController,"provider")){var i,s;if(e.NetworkController.providerConfig===undefined)null===(i=global.sentry)||void 0===i||null===(s=i.captureException)||void 0===s||s.call(i,new Error("typeof state.NetworkController.provider is "+typeof e.NetworkController.provider))}}else null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController));return e}(t.data),t},r.version=void 0;var n=e("@metamask/utils"),i=e("lodash");const s=r.version=86}}},{package:"$root$",file:"app/scripts/migrations/086.ts"}],[188,{"@metamask/utils":2021,lodash:3587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=s,t.data=function(e){if(!(0,n.isObject)(e.TokensController)){var t,r;return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.TokensController is "+typeof e.TokensController)),e}return delete e.TokensController.suggestedAssets,e}(t.data),t},r.version=void 0;var n=e("@metamask/utils"),i=e("lodash");const s=r.version=87}}},{package:"$root$",file:"app/scripts/migrations/087.ts"}],[189,{"@metamask/utils":2021,"ethereumjs-util":3006,lodash:3587,loglevel:3593},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,o.cloneDeep)(e);return t.meta.version=l,function(e){if((0,i.hasProperty)(e,"NftController")&&(0,i.isObject)(e.NftController)){const l=e.NftController;if((0,i.hasProperty)(l,"allNftContracts")&&(0,i.isObject)(l.allNftContracts)){const{allNftContracts:e}=l;Object.keys(e).every((t=>(0,i.isObject)(e[t])))&&Object.keys(e).forEach((t=>{const r=e[t];if((0,i.isObject)(r)){for(const e of Object.keys(r))"undefined"!==e&&e!==undefined||delete r[e];e[t]=(0,o.mapKeys)(r,((e,t)=>c(t)))}}))}else if((0,i.hasProperty)(l,"allNftContracts")){var t,r;null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NftController.allNftContracts is "+typeof l.allNftContracts))}else a.default.warn("typeof state.NftController.allNftContracts is "+typeof l.allNftContracts);if((0,i.hasProperty)(l,"allNfts")&&(0,i.isObject)(l.allNfts)){const{allNfts:e}=l;Object.keys(e).every((t=>(0,i.isObject)(e[t])))&&Object.keys(e).forEach((t=>{const r=e[t];if((0,i.isObject)(r)){for(const e of Object.keys(r))"undefined"!==e&&e!==undefined||delete r[e];e[t]=(0,o.mapKeys)(r,((e,t)=>c(t)))}}))}else if((0,i.hasProperty)(l,"allNfts")){var n,s;null===(n=global.sentry)||void 0===n||null===(s=n.captureException)||void 0===s||s.call(n,new Error("typeof state.NftController.allNfts is "+typeof l.allNfts))}else a.default.warn("typeof state.NftController.allNfts is "+typeof l.allNfts);e.NftController=l}else if((0,i.hasProperty)(e,"NftController")){var l,u;null===(l=global.sentry)||void 0===l||null===(u=l.captureException)||void 0===u||u.call(l,new Error("typeof state.NftController is "+typeof e.NftController))}else a.default.warn("typeof state.NftController is undefined");if((0,i.hasProperty)(e,"TokenListController")&&(0,i.isObject)(e.TokenListController)){const t=e.TokenListController;if((0,i.hasProperty)(t,"tokensChainsCache")&&(0,i.isObject)(t.tokensChainsCache)){for(const e of Object.keys(t.tokensChainsCache))"undefined"!==e&&e!==undefined||delete t.tokensChainsCache[e];t.tokensChainsCache=(0,o.mapKeys)(t.tokensChainsCache,((e,t)=>c(t)))}else if((0,i.hasProperty)(t,"tokensChainsCache")){var d,h;null===(d=global.sentry)||void 0===d||null===(h=d.captureException)||void 0===h||h.call(d,new Error("typeof state.TokenListController.tokensChainsCache is "+typeof e.TokenListController.tokensChainsCache))}else a.default.warn("typeof state.TokenListController.tokensChainsCache is undefined")}else a.default.warn("typeof state.TokenListController is "+typeof e.TokenListController);if((0,i.hasProperty)(e,"TokensController")&&(0,i.isObject)(e.TokensController)){const t=e.TokensController;if((0,i.hasProperty)(t,"allTokens")&&(0,i.isObject)(t.allTokens)){const{allTokens:e}=t;for(const t of Object.keys(e))"undefined"!==t&&t!==undefined||delete e[t];t.allTokens=(0,o.mapKeys)(e,((e,t)=>c(t)))}else if((0,i.hasProperty)(t,"allTokens")){var f,p;null===(f=global.sentry)||void 0===f||null===(p=f.captureException)||void 0===p||p.call(f,new Error("typeof state.TokensController.allTokens is "+typeof t.allTokens))}else a.default.warn("typeof state.TokensController.allTokens is "+typeof t.allTokens);if((0,i.hasProperty)(t,"allIgnoredTokens")&&(0,i.isObject)(t.allIgnoredTokens)){const{allIgnoredTokens:e}=t;for(const t of Object.keys(e))"undefined"!==t&&t!==undefined||delete e[t];t.allIgnoredTokens=(0,o.mapKeys)(e,((e,t)=>c(t)))}else if((0,i.hasProperty)(t,"allIgnoredTokens")){var m,g;null===(m=global.sentry)||void 0===m||null===(g=m.captureException)||void 0===g||g.call(m,new Error("typeof state.TokensController.allIgnoredTokens is "+typeof t.allIgnoredTokens))}else a.default.warn("typeof state.TokensController.allIgnoredTokens is "+typeof t.allIgnoredTokens);if((0,i.hasProperty)(t,"allDetectedTokens")&&(0,i.isObject)(t.allDetectedTokens)){const{allDetectedTokens:e}=t;for(const t of Object.keys(e))"undefined"!==t&&t!==undefined||delete e[t];t.allDetectedTokens=(0,o.mapKeys)(e,((e,t)=>c(t)))}else if((0,i.hasProperty)(t,"allDetectedTokens")){var v,y;null===(v=global.sentry)||void 0===v||null===(y=v.captureException)||void 0===y||y.call(v,new Error("typeof state.TokensController.allDetectedTokens is "+typeof t.allDetectedTokens))}else a.default.warn("typeof state.TokensController.allDetectedTokens is "+typeof t.allDetectedTokens);e.TokensController=t}else{var b,w;null===(b=global.sentry)||void 0===b||null===(w=b.captureException)||void 0===w||w.call(b,new Error("typeof state.TokensController is "+typeof e.TokensController))}}(t.data),t},r.version=void 0;var n,i=e("@metamask/utils"),s=e("ethereumjs-util"),o=e("lodash"),a=(n=e("loglevel"))&&n.__esModule?n:{default:n};const l=r.version=88;function c(e){if("string"==typeof e&&(0,i.isStrictHexString)(e))return e;return`0x${s.BN.isBN(e)?e.toString(16):new s.BN(e.toString(),10).toString(16)}`}}}},{package:"$root$",file:"app/scripts/migrations/088.ts"}],[19,{"../../../../shared/constants/permissions":4308,"@metamask/permission-controller":1519,"ethereumjs-util":3006},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CaveatMutatorFactories=void 0;var n=e("@metamask/permission-controller"),i=e("ethereumjs-util"),s=e("../../../../shared/constants/permissions");r.CaveatMutatorFactories={[s.CaveatTypes.restrictReturnedAccounts]:{removeAccount:function(e,t){const r=(0,i.toChecksumAddress)(e),s=t.filter((e=>(0,i.toChecksumAddress)(e)!==r));if(s.length===t.length)return{operation:n.CaveatMutatorOperation.noop};if(s.length>0)return{operation:n.CaveatMutatorOperation.updateValue,value:s};return{operation:n.CaveatMutatorOperation.revokePermission}}}}}}},{package:"$root$",file:"app/scripts/controllers/permissions/caveat-mutators.js"}],[190,{"@metamask/utils":2021,lodash:3587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=s,t.data=function(e){if((0,n.hasProperty)(e,"NetworkController")&&(0,n.isObject)(e.NetworkController)&&(0,n.hasProperty)(e.NetworkController,"providerConfig")&&(0,n.isObject)(e.NetworkController.providerConfig)){const{networkConfigurations:t,providerConfig:r}=e.NetworkController;if(!(0,n.isObject)(t))return e;if(r.id)return e;let i;for(const s of Object.keys(t)){const o=t[s];if(!(0,n.isObject)(o))return e;if(o.rpcUrl===r.rpcUrl){i=o.id;break}}return i?(e.NetworkController.providerConfig={...r,id:i},{...e,NetworkController:e.NetworkController}):e}var t,r;if((0,n.isObject)(e.NetworkController)){if(!(0,n.isObject)(e.NetworkController.providerConfig)){var i,s;null===(i=global.sentry)||void 0===i||null===(s=i.captureException)||void 0===s||s.call(i,new Error("typeof state.NetworkController.providerConfig is "+typeof e.NetworkController.providerConfig))}}else null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController));return e}(t.data),t},r.version=void 0;var n=e("@metamask/utils"),i=e("lodash");const s=r.version=89}}},{package:"$root$",file:"app/scripts/migrations/089.ts"}],[191,{"@metamask/utils":2021,lodash:3587,loglevel:3593},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=a,t.data=function(e){if(!(0,s.hasProperty)(e,"PhishingController"))return o.default.warn("typeof state.PhishingController is undefined"),e;if(!(0,s.isObject)(e.PhishingController)){var t,r;return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.PhishingController is "+typeof e.PhishingController)),e}if(!(0,s.hasProperty)(e.PhishingController,"listState"))return o.default.warn("typeof state.PhishingController.listState is "+typeof e.PhishingController),e;return delete e.PhishingController.listState,e}(t.data),t},r.version=void 0;var n,i=e("lodash"),s=e("@metamask/utils"),o=(n=e("loglevel"))&&n.__esModule?n:{default:n};const a=r.version=90}}},{package:"$root$",file:"app/scripts/migrations/090.ts"}],[192,{"@metamask/utils":2021,lodash:3587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=s,t.data=function(e){if((0,n.hasProperty)(e,"NetworkController")&&(0,n.isObject)(e.NetworkController)&&(0,n.hasProperty)(e.NetworkController,"networkConfigurations")&&(0,n.isObject)(e.NetworkController.networkConfigurations)){const{networkConfigurations:t}=e.NetworkController;for(const[e,r]of Object.entries(t))(0,n.isObject)(r)&&(r.chainId||delete t[e]);return e.NetworkController={...e.NetworkController,networkConfigurations:t},{...e,NetworkController:e.NetworkController}}var t,r;if((0,n.isObject)(e.NetworkController)){if(!(0,n.isObject)(e.NetworkController.networkConfigurations)){var i,s;null===(i=global.sentry)||void 0===i||null===(s=i.captureException)||void 0===s||s.call(i,new Error("typeof state.NetworkController.networkConfigurations is "+typeof e.NetworkController.networkConfigurations))}}else null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController));return e}(t.data),t},r.version=void 0;var n=e("@metamask/utils"),i=e("lodash");const s=r.version=91}}},{package:"$root$",file:"app/scripts/migrations/091.ts"}],[193,{"@metamask/utils":2021,lodash:3587,loglevel:3593},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=a,t.data=function(e){if(!(0,s.hasProperty)(e,"TokenListController"))return o.default.warn("Skipping migration, TokenListController state is missing"),e;var t,r;if(!(0,s.isObject)(e.TokenListController))return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.TokenListController is "+typeof e.TokenListController)),e;if(!(0,s.hasProperty)(e.TokenListController,"tokensChainsCache"))return o.default.warn("Skipping migration, TokenListController.tokensChainsCache state is missing"),e;e.TokenListController.tokensChainsCache===undefined&&delete e.TokenListController.tokensChainsCache;return e}(t.data),t},r.version=void 0;var n,i=e("lodash"),s=e("@metamask/utils"),o=(n=e("loglevel"))&&n.__esModule?n:{default:n};const a=r.version=92.1}}},{package:"$root$",file:"app/scripts/migrations/092.1.ts"}],[194,{"@metamask/utils":2021,"@sentry/browser":2128,lodash:3587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=o,t.data=function(e){return function(e){const t=["networkId","networkStatus","providerConfig","networkDetails","networkConfigurations"];if(!(0,n.hasProperty)(e,"NetworkController")||!(0,s.isObject)(e.NetworkController))return(0,i.captureException)(`Migration ${o}: Invalid NetworkController state: ${typeof e.NetworkController}`),e;const r=e.NetworkController,a=(0,s.pick)(r,t);return{...e,NetworkController:a}}(e)}(t.data),t},r.version=void 0;var n=e("@metamask/utils"),i=e("@sentry/browser"),s=e("lodash");const o=r.version=92.2}}},{package:"$root$",file:"app/scripts/migrations/092.2.ts"}],[195,{"@metamask/utils":2021,lodash:3587,loglevel:3593},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=a,function(e){!function(e){if((0,i.isNullOrUndefined)(e.PreferencesController))return void o.default.warn(`Migration #${a}: preferences controller null or undefined, skipping migration`);if((0,i.hasProperty)(e,"AppStateController")&&(0,i.isObject)(e.AppStateController)&&(0,i.hasProperty)(e,"PreferencesController")&&(0,i.isObject)(e.PreferencesController)){var t;const r=null===(t=e.PreferencesController)||void 0===t?void 0:t.advancedGasFee,n=(0,i.isObject)(r)&&l(r);e.AppStateController.hadAdvancedGasFeesSetPriorToMigration92_3=n,(null===e.PreferencesController.advancedGasFee||(0,i.isObject)(e.PreferencesController.advancedGasFee)&&l(e.PreferencesController.advancedGasFee))&&(e.PreferencesController.advancedGasFee={})}else if(!1===(0,i.isObject)(e.AppStateController)){var r,n;null===(r=global.sentry)||void 0===r||null===(n=r.captureException)||void 0===n||n.call(r,new Error("typeof state.AppStateController is "+typeof e.AppStateController))}else if(!1===(0,i.isObject)(e.PreferencesController)){var s,c;null===(s=global.sentry)||void 0===s||null===(c=s.captureException)||void 0===c||c.call(s,new Error("typeof state.PreferencesController is "+typeof e.PreferencesController))}}(e)}(t.data),t},r.version=void 0;var n,i=e("@metamask/utils"),s=e("lodash"),o=(n=e("loglevel"))&&n.__esModule?n:{default:n};const a=r.version=92.3;function l(e){const t=Object.keys(e);return!(!t.includes("maxBaseFee")&&!t.includes("priorityFee"))}}}},{package:"$root$",file:"app/scripts/migrations/092.3.ts"}],[196,{"@metamask/utils":2021,lodash:3587,loglevel:3593},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=a,t.data=function(e){if((0,s.hasProperty)(e,"PhishingController")&&(0,s.isObject)(e.PhishingController))delete e.PhishingController.stalelistLastFetched,delete e.PhishingController.hotlistLastFetched;else if((0,s.hasProperty)(e,"PhishingController")){var t,r;null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.PhishingController is "+typeof e.PhishingController))}else o.default.warn("typeof state.PhishingController is undefined");return e}(t.data),t},r.version=void 0;var n,i=e("lodash"),s=e("@metamask/utils"),o=(n=e("loglevel"))&&n.__esModule?n:{default:n};const a=r.version=92}}},{package:"$root$",file:"app/scripts/migrations/092.ts"}],[197,{"@metamask/utils":2021,lodash:3587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=s,t.data=function(e){if((0,i.hasProperty)(e,"NetworkController")&&(0,i.isObject)(e.NetworkController)&&(0,i.hasProperty)(e.NetworkController,"providerConfig")&&(0,i.isObject)(e.NetworkController.providerConfig)){const{providerConfig:t}=e.NetworkController;return t.ticker?e:(e.NetworkController.providerConfig={ticker:"ETH",...t},{...e,NetworkController:e.NetworkController})}var t,r;if((0,i.isObject)(e.NetworkController)){if((0,i.isObject)(e.NetworkController)&&!(0,i.isObject)(e.NetworkController.providerConfig)){var n,s;null===(n=global.sentry)||void 0===n||null===(s=n.captureException)||void 0===s||s.call(n,new Error("typeof state.NetworkController.providerConfig is "+typeof e.NetworkController.providerConfig))}}else null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController));return e}(t.data),t},r.version=void 0;var n=e("lodash"),i=e("@metamask/utils");const s=r.version=93}}},{package:"$root$",file:"app/scripts/migrations/093.ts"}],[198,{"@metamask/controller-utils":1094,"@metamask/network-controller":1435,"@metamask/utils":2021,lodash:3587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=a,t.data=function(e){if((0,i.hasProperty)(e,"NetworkController")&&(0,i.isObject)(e.NetworkController)&&(0,i.hasProperty)(e.NetworkController,"providerConfig")&&(0,i.isObject)(e.NetworkController.providerConfig)&&((0,i.hasProperty)(e.NetworkController.providerConfig,"id")||(0,i.hasProperty)(e.NetworkController.providerConfig,"type")&&e.NetworkController.providerConfig.type!==o.NetworkType.rpc)){const t=e.NetworkController.providerConfig.id||e.NetworkController.providerConfig.type;if(!t||"string"!=typeof t)return e;const r={[t]:{EIPS:{},status:s.NetworkStatus.Unknown}};if((0,i.hasProperty)(e.NetworkController,"networkDetails")&&(0,i.isObject)(e.NetworkController.networkDetails)){const{networkDetails:n}=e.NetworkController;n.EIPS&&(0,i.isObject)(n.EIPS)&&(r[t].EIPS={...n.EIPS}),delete e.NetworkController.networkDetails}return(0,i.hasProperty)(e.NetworkController,"networkStatus")&&"string"==typeof e.NetworkController.networkStatus&&(r[t].status=e.NetworkController.networkStatus,delete e.NetworkController.networkStatus),{...e,NetworkController:{...e.NetworkController,networksMetadata:r,selectedNetworkClientId:t}}}var t,r;if((0,i.isObject)(e.NetworkController)){if((0,i.isObject)(e.NetworkController)&&!(0,i.isObject)(e.NetworkController.providerConfig)){var n,a;null===(n=global.sentry)||void 0===n||null===(a=n.captureException)||void 0===a||a.call(n,new Error("typeof state.NetworkController.providerConfig is "+typeof e.NetworkController.providerConfig))}else if((0,i.isObject)(e.NetworkController)&&(0,i.isObject)(e.NetworkController.providerConfig)){var l,c;null===(l=global.sentry)||void 0===l||null===(c=l.captureException)||void 0===c||c.call(l,new Error(`typeof state.NetworkController.providerConfig.id is ${typeof e.NetworkController.providerConfig.id} and state.NetworkController.providerConfig.type is ${e.NetworkController.providerConfig.type}`))}}else null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController));return e}(t.data),t},r.version=void 0;var n=e("lodash"),i=e("@metamask/utils"),s=e("@metamask/network-controller"),o=e("@metamask/controller-utils");const a=r.version=94}}},{package:"$root$",file:"app/scripts/migrations/094.ts"}],[1981,{"./chunk-BTR56Y3F.js":1983,"./chunk-K6XMMCKJ.js":1984,"./chunk-KQMYR73X.js":1985,"@metamask/controller-utils":1094,"@metamask/utils":2021,"bn.js":2696},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i=e("./chunk-K6XMMCKJ.js"),s=e("./chunk-KQMYR73X.js"),o=e("./chunk-BTR56Y3F.js"),a=e("@metamask/controller-utils"),l=e("@metamask/utils"),c=e("bn.js"),u=(n=c)&&n.__esModule?n:{default:n},d=s.createModuleLogger.call(void 0,s.projectLogger,"gas"),h=1.5;function f(e){const t=("string"==typeof e?a.hexToBN.call(void 0,e):new(0,u.default)(e)).muln(h);return l.add0x.call(void 0,t.toString(16))}r.updateGas=async function(e,t,r){const{userOperation:n}=e;if(t.gas)return n.callGasLimit=t.gas.callGasLimit,n.preVerificationGas=t.gas.preVerificationGas,n.verificationGasLimit=t.gas.verificationGasLimit,void d("Using gas values from smart contract account",{callGasLimit:n.callGasLimit,preVerificationGas:n.preVerificationGas,verificationGasLimit:n.verificationGasLimit});const s={...n,maxFeePerGas:o.VALUE_ZERO,maxPriorityFeePerGas:o.VALUE_ZERO,callGasLimit:o.VALUE_ZERO,preVerificationGas:o.VALUE_ZERO,verificationGasLimit:"0xF4240"},a=new(0,i.Bundler)(e.bundlerUrl),l=await a.estimateUserOperationGas(s,r);n.callGasLimit=f(l.callGasLimit),n.preVerificationGas=f(l.preVerificationGas),n.verificationGasLimit=f(l.verificationGasLimit??l.verificationGas),d("Using buffered gas values from bundler estimate",{callGasLimit:n.callGasLimit,preVerificationGas:n.preVerificationGas,verificationGasLimit:n.verificationGasLimit,multiplier:h,estimate:l})}}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/chunk-7JPKNM2X.js"}],[1982,{"./chunk-K6XMMCKJ.js":1984,"./chunk-KQMYR73X.js":1985,"./chunk-Z4BLTVTB.js":1992,"@metamask/controller-utils":1094,"@metamask/eth-query":1188,"@metamask/polling-controller":1550,"@metamask/utils":2021,events:3046},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i,s,o,a,l,c,u,d,h,f,p,m,g,v,y,b,w=e("./chunk-K6XMMCKJ.js"),_=e("./chunk-KQMYR73X.js"),k=e("./chunk-Z4BLTVTB.js"),S=e("@metamask/controller-utils"),E=n(e("@metamask/eth-query")),T=e("@metamask/polling-controller"),j=e("@metamask/utils"),A=n(e("events")),P=j.createModuleLogger.call(void 0,_.projectLogger,"pending-user-operations"),C=class extends T.BlockTrackerPollingControllerOnly{constructor({getUserOperations:e,messenger:t}){super(),k.__privateAdd.call(void 0,this,o),k.__privateAdd.call(void 0,this,l),k.__privateAdd.call(void 0,this,u),k.__privateAdd.call(void 0,this,h),k.__privateAdd.call(void 0,this,p),k.__privateAdd.call(void 0,this,g),k.__privateAdd.call(void 0,this,y),k.__privateAdd.call(void 0,this,i,void 0),k.__privateAdd.call(void 0,this,s,void 0),this.hub=new(0,A.default),k.__privateSet.call(void 0,this,i,e),k.__privateSet.call(void 0,this,s,t)}async _executePoll(e,t){try{const{blockTracker:t,configuration:r,provider:n}=this._getNetworkClientById(e);P("Polling",{blockNumber:t.getCurrentBlock(),chainId:r.chainId}),await k.__privateMethod.call(void 0,this,o,a).call(this,r.chainId,n)}catch(e){P("Failed to check user operations",e)}}_getNetworkClientById(e){return k.__privateGet.call(void 0,this,s).call("NetworkController:getNetworkClientById",e)}};i=new WeakMap,s=new WeakMap,o=new WeakSet,a=async function(e,t){const r=k.__privateMethod.call(void 0,this,p,m).call(this).filter((t=>t.chainId===e));r.length?(P("Found pending user operations to check",{count:r.length,ids:r.map((e=>e.id))}),await Promise.all(r.map((e=>k.__privateMethod.call(void 0,this,l,c).call(this,e,t))))):P("No pending user operations to check")},l=new WeakSet,c=async function(e,t){const{bundlerUrl:r,hash:n,id:i}=e;if(n&&r)try{const s=await k.__privateMethod.call(void 0,this,y,b).call(this,n,r),o=s?.success;if(s&&!o)return void k.__privateMethod.call(void 0,this,h,f).call(this,e,s);if(o)return void await k.__privateMethod.call(void 0,this,u,d).call(this,e,s,t);P("No receipt found for user operation",{id:i,hash:n})}catch(e){P("Failed to check user operation",i,e)}else P("Skipping user operation as missing hash or bundler",i)},u=new WeakSet,d=async function(e,t,r){const{id:n}=e,{actualGasCost:i,actualGasUsed:s,receipt:{blockHash:o,transactionHash:a}}=t;P("User operation confirmed",n,a);const{baseFeePerGas:l}=await S.query.call(void 0,new(0,E.default)(r),"getBlockByHash",[o,!1]);e.actualGasCost=i,e.actualGasUsed=s,e.baseFeePerGas=l,e.status="confirmed",e.transactionHash=a,k.__privateMethod.call(void 0,this,g,v).call(this,e),this.hub.emit("user-operation-confirmed",e)},h=new WeakSet,f=function(e,t){const{id:r}=e;P("User operation failed",r),e.status="failed",k.__privateMethod.call(void 0,this,g,v).call(this,e),this.hub.emit("user-operation-failed",e,new Error("User operation receipt has failed status"))},p=new WeakSet,m=function(){return k.__privateGet.call(void 0,this,i).call(this).filter((e=>"submitted"===e.status))},g=new WeakSet,v=function(e){this.hub.emit("user-operation-updated",e)},y=new WeakSet,b=async function(e,t){return new(0,w.Bundler)(t).getUserOperationReceipt(e)},r.PendingUserOperationTracker=C}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/chunk-B7GI5EWI.js"}],[1983,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});r.EMPTY_BYTES="0x",r.ADDRESS_ZERO="0x0000000000000000000000000000000000000000",r.VALUE_ZERO="0x0"}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/chunk-BTR56Y3F.js"}],[1984,{"./chunk-KQMYR73X.js":1985,"./chunk-Z4BLTVTB.js":1992},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i,s,o=e("./chunk-KQMYR73X.js"),a=e("./chunk-Z4BLTVTB.js"),l=o.createModuleLogger.call(void 0,o.projectLogger,"bundler");n=new WeakMap,i=new WeakSet,s=async function(e,t){const r={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:1,method:e,params:t})},i=await fetch(a.__privateGet.call(void 0,this,n),r),s=await i.json();if(s.error){const e=new Error(s.error.message||s.error);throw e.code=s.error.code,e}return s.result},r.Bundler=class{constructor(e){a.__privateAdd.call(void 0,this,i),a.__privateAdd.call(void 0,this,n,void 0),a.__privateSet.call(void 0,this,n,e)}async estimateUserOperationGas(e,t){l("Estimating gas",{url:a.__privateGet.call(void 0,this,n),userOperation:e,entrypoint:t});const r=await a.__privateMethod.call(void 0,this,i,s).call(this,"eth_estimateUserOperationGas",[e,t]);return l("Estimated gas",{response:r}),r}async getUserOperationReceipt(e){return l("Getting user operation receipt",{url:a.__privateGet.call(void 0,this,n),hash:e}),await a.__privateMethod.call(void 0,this,i,s).call(this,"eth_getUserOperationReceipt",[e])}async sendUserOperation(e,t){l("Sending user operation",{url:a.__privateGet.call(void 0,this,n),userOperation:e,entrypoint:t});const r=await a.__privateMethod.call(void 0,this,i,s).call(this,"eth_sendUserOperation",[e,t]);return l("Sent user operation",r),r}}}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/chunk-K6XMMCKJ.js"}],[1985,{"@metamask/utils":2021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("@metamask/utils"),i=n.createProjectLogger.call(void 0,"user-operation-controller");r.createModuleLogger=n.createModuleLogger,r.projectLogger=i}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/chunk-KQMYR73X.js"}],[1986,{"./chunk-BTR56Y3F.js":1983,"@metamask/transaction-controller":1974,"@metamask/utils":2021,superstruct:4142},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-BTR56Y3F.js"),i=e("@metamask/transaction-controller"),s=e("@metamask/utils"),o=e("superstruct");function a(e,t,r){try{o.assert.call(void 0,e,t,r)}catch(e){const t=e.failures().map((e=>e.path.length?`${e.path.join(".")} - ${e.message}`:e.message)).join("\n");throw new Error(`${r}\n${t}`)}}function l(){return o.define.call(void 0,"Hexadecimal String",(e=>s.isStrictHexString.call(void 0,e)))}function c(){return o.define.call(void 0,"Hexadecimal String or 0x",(e=>s.isStrictHexString.call(void 0,e)||e===n.EMPTY_BYTES))}r.validateAddUserOperationRequest=function(e){const t=l(),r=c();a(e,o.object.call(void 0,{data:o.optional.call(void 0,r),from:t,maxFeePerGas:o.optional.call(void 0,t),maxPriorityFeePerGas:o.optional.call(void 0,t),to:o.optional.call(void 0,t),value:o.optional.call(void 0,t)}),"Invalid request to add user operation")},r.validateAddUserOperationOptions=function(e){a(e,o.object.call(void 0,{networkClientId:o.string.call(void 0),origin:o.string.call(void 0),requireApproval:o.optional.call(void 0,o.boolean.call(void 0)),smartContractAccount:o.optional.call(void 0,o.object.call(void 0,{prepareUserOperation:o.func.call(void 0),updateUserOperation:o.func.call(void 0),signUserOperation:o.func.call(void 0)})),swaps:o.optional.call(void 0,o.object.call(void 0,{approvalTxId:o.optional.call(void 0,o.string.call(void 0)),destinationTokenAddress:o.optional.call(void 0,o.string.call(void 0)),destinationTokenDecimals:o.optional.call(void 0,o.number.call(void 0)),destinationTokenSymbol:o.optional.call(void 0,o.string.call(void 0)),estimatedBaseFee:o.optional.call(void 0,o.string.call(void 0)),sourceTokenSymbol:o.optional.call(void 0,o.string.call(void 0)),swapMetaData:o.optional.call(void 0,o.object.call(void 0)),swapTokenValue:o.optional.call(void 0,o.string.call(void 0))})),type:o.optional.call(void 0,o.enums.call(void 0,Object.values(i.TransactionType)))}),"Invalid options to add user operation")},r.validatePrepareUserOperationResponse=function(e){const t=l(),r=c();a(e,o.refine.call(void 0,o.object.call(void 0,{bundler:o.string.call(void 0),callData:t,dummyPaymasterAndData:o.optional.call(void 0,r),dummySignature:o.optional.call(void 0,r),gas:o.optional.call(void 0,o.object.call(void 0,{callGasLimit:t,preVerificationGas:t,verificationGasLimit:t})),initCode:o.optional.call(void 0,r),nonce:t,sender:t}),"ValidPrepareUserOperationResponse",(({gas:e,dummySignature:t})=>!!(e||t&&t!==n.EMPTY_BYTES)||"Must specify dummySignature if not specifying gas")),"Invalid response when preparing user operation")},r.validateUpdateUserOperationResponse=function(e){const t=l();a(e,o.optional.call(void 0,o.object.call(void 0,{paymasterAndData:o.optional.call(void 0,t)})),"Invalid response when updating user operation")},r.validateSignUserOperationResponse=function(e){const t=l();a(e,o.object.call(void 0,{signature:t}),"Invalid response when signing user operation")}}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/chunk-OH6WM4Z6.js"}],[1987,{"./chunk-BTR56Y3F.js":1983,"./chunk-Z4BLTVTB.js":1992},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i=e("./chunk-BTR56Y3F.js"),s=e("./chunk-Z4BLTVTB.js");n=new WeakMap,r.SnapSmartContractAccount=class{constructor(e){s.__privateAdd.call(void 0,this,n,void 0),s.__privateSet.call(void 0,this,n,e)}async prepareUserOperation(e){const{data:t,from:r,to:o,value:a}=e,l=t??i.EMPTY_BYTES,c=o??i.ADDRESS_ZERO,u=a??i.VALUE_ZERO,d=await s.__privateGet.call(void 0,this,n).call("KeyringController:prepareUserOperation",r,[{data:l,to:c,value:u}]),{bundlerUrl:h,callData:f,dummyPaymasterAndData:p,dummySignature:m,gasLimits:g,initCode:v,nonce:y}=d;return{bundler:h,callData:f,dummyPaymasterAndData:p,dummySignature:m,gas:g,initCode:v,nonce:y,sender:r}}async updateUserOperation(e){const{userOperation:t}=e,{sender:r}=t,{paymasterAndData:o}=await s.__privateGet.call(void 0,this,n).call("KeyringController:patchUserOperation",r,t);return{paymasterAndData:o===i.EMPTY_BYTES?void 0:o}}async signUserOperation(e){const{userOperation:t}=e,{sender:r}=t;return{signature:await s.__privateGet.call(void 0,this,n).call("KeyringController:signUserOperation",r,t)}}}}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/chunk-QVY5Q2VX.js"}],[1988,{"./chunk-BTR56Y3F.js":1983,"./chunk-KQMYR73X.js":1985,"@metamask/controller-utils":1094,"@metamask/eth-query":1188,"@metamask/gas-fee-controller":1280,"@metamask/transaction-controller":1974,"@metamask/utils":2021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i=e("./chunk-KQMYR73X.js"),s=e("./chunk-BTR56Y3F.js"),o=e("@metamask/controller-utils"),a=e("@metamask/eth-query"),l=(n=a)&&n.__esModule?n:{default:n},c=e("@metamask/gas-fee-controller"),u=e("@metamask/transaction-controller"),d=e("@metamask/utils"),h=i.createModuleLogger.call(void 0,i.projectLogger,"gas-fees");function f(e){return o.toHex.call(void 0,o.gweiDecToWEIBN.call(void 0,e))}function p(e){return!e||e===s.EMPTY_BYTES}r.updateGasFees=async function(e){const{metadata:t,originalRequest:r,transaction:n}=e,{userOperation:i}=t;let s;const a=async()=>(s||(s=await async function(e){const{getGasFeeEstimates:t,provider:r}=e;try{const{gasFeeEstimates:e,gasEstimateType:r}=await t();if(r===c.GAS_ESTIMATE_TYPES.FEE_MARKET){const{medium:{suggestedMaxPriorityFeePerGas:t,suggestedMaxFeePerGas:r}={}}=e;if(t&&r){const e={maxFeePerGas:f(r),maxPriorityFeePerGas:f(t)};return h("Using medium values from fee market estimate",e),e}}if(r===c.GAS_ESTIMATE_TYPES.LEGACY){const t=f(e.medium);return h("Using medium value from legacy estimate",t),{maxFeePerGas:t}}if(r===c.GAS_ESTIMATE_TYPES.ETH_GASPRICE){const t=f(e.gasPrice);return h("Using gasPrice from estimate",t),{maxFeePerGas:t}}}catch(e){h("Failed to get estimate",e)}const n=await o.query.call(void 0,new(0,l.default)(r),"gasPrice");if(!n)return{};const i=d.add0x.call(void 0,n.toString(16));return h("Using gasPrice from network as fallback",i),{maxFeePerGas:i}}(e)),s);i.maxFeePerGas=await async function(e,t,r){const{maxFeePerGas:n,maxPriorityFeePerGas:i}=e,{gasPrice:s}=r??{};if(!p(n))return h("Using maxFeePerGas from request",n),n;if(p(i)&&s)return h("Setting maxFeePerGas to transaction gasPrice",s),s;const{maxFeePerGas:o}=await t();if(!o)throw new Error("Failed to get gas fee estimate for maxFeePerGas");return h("Using maxFeePerGas from estimate",o),o}(r,a,n),i.maxPriorityFeePerGas=await async function(e,t,r,n){const{maxFeePerGas:i,maxPriorityFeePerGas:s}=e,{gasPrice:o}=n??{},{maxFeePerGas:a}=r;if(!p(s))return h("Using maxPriorityFeePerGas from request",s),s;if(p(i)&&o)return h("Setting maxPriorityFeePerGas to transaction gasPrice",o),o;const{maxPriorityFeePerGas:l}=await t();if(l)return h("Using maxPriorityFeePerGas from estimate",l),l;return h("Setting maxPriorityFeePerGas to maxFeePerGas",a),a}(r,a,i,n),t.userFeeLevel=function(e,t,r,n){const{origin:i}=e,{maxFeePerGas:s,maxPriorityFeePerGas:a}=t,{maxFeePerGas:l,maxPriorityFeePerGas:c}=r||{};if(p(s)&&p(a)&&n?.gasPrice)return i===o.ORIGIN_METAMASK?u.UserFeeLevel.CUSTOM:u.UserFeeLevel.DAPP_SUGGESTED;if(p(s)&&p(a)&&l&&c)return u.UserFeeLevel.MEDIUM;if(i===o.ORIGIN_METAMASK)return u.UserFeeLevel.CUSTOM;return u.UserFeeLevel.DAPP_SUGGESTED}(t,r,s,n)}}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/chunk-SSHRMBLI.js"}],[1989,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e=>(e.Unapproved="unapproved",e.Approved="approved",e.Signed="signed",e.Submitted="submitted",e.Failed="failed",e.Confirmed="confirmed",e))(n||{});r.UserOperationStatus=n}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/chunk-W4DFKKZT.js"}],[199,{lodash:3587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=i,function(e){(function(e){var t,r;const n=(null===(t=e.IncomingTransactionsController)||void 0===t?void 0:t.incomingTransactions)||{};if(0===Object.keys(n).length)return;const i=(null===(r=e.TransactionController)||void 0===r?void 0:r.transactions)||{},s=Object.values(n).reduce(((e,t)=>(e[t.id]=t,e)),i);e.TransactionController={...e.TransactionController||{},transactions:s}})(e),function(e){var t;const r=(null===(t=e.IncomingTransactionsController)||void 0===t?void 0:t.incomingTransactions)||{};if(0===Object.keys(r).length)return;const n={};for(const e of Object.values(r)){if(!e.blockNumber||!e.chainId||!e.txParams.to)continue;const t=parseInt(e.blockNumber,10),r=`${e.chainId}#${e.txParams.to.toLowerCase()}`,i=n[r]||-1;n[r]=Math.max(i,t)}e.TransactionController={...e.TransactionController,lastFetchedBlockNumbers:n}}(e),function(e){delete e.IncomingTransactionsController}(e)}(t.data),t},r.version=void 0;var n=e("lodash");const i=r.version=95}}},{package:"$root$",file:"app/scripts/migrations/095.ts"}],[1990,{"./chunk-7JPKNM2X.js":1981,"./chunk-B7GI5EWI.js":1982,"./chunk-BTR56Y3F.js":1983,"./chunk-K6XMMCKJ.js":1984,"./chunk-KQMYR73X.js":1985,"./chunk-OH6WM4Z6.js":1986,"./chunk-QVY5Q2VX.js":1987,"./chunk-SSHRMBLI.js":1988,"./chunk-WF3VLEGJ.js":1991,"./chunk-Z4BLTVTB.js":1992,"@metamask/base-controller":1999,"@metamask/controller-utils":1094,"@metamask/eth-query":1188,"@metamask/rpc-errors":1621,"@metamask/transaction-controller":1974,"@metamask/utils":2021,events:3046,lodash:3587,uuid:4208},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i,s,o,a,l,c,u,d,h,f,p,m,g,v,y,b,w,_,k,S,E,T,j,A,P,C,x,O,M,B,I,R,N,L,D,F,U,G,H,W,$,q,V,K=e("./chunk-SSHRMBLI.js"),Y=e("./chunk-7JPKNM2X.js"),z=e("./chunk-WF3VLEGJ.js"),Z=e("./chunk-OH6WM4Z6.js"),J=e("./chunk-B7GI5EWI.js"),X=e("./chunk-K6XMMCKJ.js"),Q=e("./chunk-KQMYR73X.js"),ee=e("./chunk-QVY5Q2VX.js"),te=e("./chunk-BTR56Y3F.js"),re=e("./chunk-Z4BLTVTB.js"),ne=e("@metamask/base-controller"),ie=e("@metamask/controller-utils"),se=n(e("@metamask/eth-query")),oe=e("@metamask/rpc-errors"),ae=e("@metamask/transaction-controller"),le=e("@metamask/utils"),ce=n(e("events")),ue=e("lodash"),de=e("uuid"),he={userOperations:{persist:!0,anonymous:!1}},fe=class extends ne.BaseController{constructor({entrypoint:e,getGasFeeEstimates:t,messenger:r,state:n}){super({name:"UserOperationController",metadata:he,messenger:r,state:{userOperations:{},...n}}),re.__privateAdd.call(void 0,this,a),re.__privateAdd.call(void 0,this,c),re.__privateAdd.call(void 0,this,d),re.__privateAdd.call(void 0,this,f),re.__privateAdd.call(void 0,this,m),re.__privateAdd.call(void 0,this,v),re.__privateAdd.call(void 0,this,b),re.__privateAdd.call(void 0,this,_),re.__privateAdd.call(void 0,this,S),re.__privateAdd.call(void 0,this,T),re.__privateAdd.call(void 0,this,A),re.__privateAdd.call(void 0,this,C),re.__privateAdd.call(void 0,this,O),re.__privateAdd.call(void 0,this,B),re.__privateAdd.call(void 0,this,R),re.__privateAdd.call(void 0,this,L),re.__privateAdd.call(void 0,this,F),re.__privateAdd.call(void 0,this,G),re.__privateAdd.call(void 0,this,W),re.__privateAdd.call(void 0,this,q),re.__privateAdd.call(void 0,this,i,void 0),re.__privateAdd.call(void 0,this,s,void 0),re.__privateAdd.call(void 0,this,o,void 0),this.hub=new(0,ce.default),re.__privateSet.call(void 0,this,i,e),re.__privateSet.call(void 0,this,s,t),re.__privateSet.call(void 0,this,o,new(0,J.PendingUserOperationTracker)({getUserOperations:()=>ue.cloneDeep.call(void 0,Object.values(this.state.userOperations)),messenger:r})),re.__privateMethod.call(void 0,this,R,N).call(this)}async addUserOperation(e,t){return Z.validateAddUserOperationRequest.call(void 0,e),Z.validateAddUserOperationOptions.call(void 0,t),await re.__privateMethod.call(void 0,this,a,l).call(this,e,t)}async addUserOperationFromTransaction(e,t){Z.validateAddUserOperationOptions.call(void 0,t);const{data:r,from:n,maxFeePerGas:i,maxPriorityFeePerGas:s,to:o,value:c}=e,u={data:""===r?void 0:r,from:n,maxFeePerGas:i,maxPriorityFeePerGas:s,to:o,value:c};return Z.validateAddUserOperationRequest.call(void 0,u),await re.__privateMethod.call(void 0,this,a,l).call(this,u,{...t,transaction:e})}startPollingByNetworkClientId(e){return re.__privateGet.call(void 0,this,o).startPollingByNetworkClientId(e)}};i=new WeakMap,s=new WeakMap,o=new WeakMap,a=new WeakSet,l=async function(e,t){Q.projectLogger.call(void 0,"Adding user operation",{request:e,options:t});const{networkClientId:r,origin:n,smartContractAccount:i,swaps:s,transaction:o}=t,{chainId:a,provider:l}=await re.__privateMethod.call(void 0,this,G,H).call(this,r),m=await re.__privateMethod.call(void 0,this,f,p).call(this,a,n,o,s),g=i??new(0,ee.SnapSmartContractAccount)(this.messagingSystem),v={chainId:a,metadata:m,options:{...t,smartContractAccount:g},provider:l,request:e,transaction:o},{id:y}=m;let b=!1;const w=(async()=>{try{return await re.__privateMethod.call(void 0,this,c,u).call(this,v)}catch(e){if(re.__privateMethod.call(void 0,this,T,j).call(this,m,e),b)throw e;return}})(),_=async()=>(b=!0,await w);return{id:y,hash:_,transactionHash:async()=>{await _();const{transactionHash:e}=await re.__privateMethod.call(void 0,this,d,h).call(this,m);return e}}},c=new WeakSet,u=async function(e){const{metadata:t,options:r}=e,{requireApproval:n,smartContractAccount:i}=r;let s;try{return await re.__privateMethod.call(void 0,this,m,g).call(this,e),await re.__privateMethod.call(void 0,this,v,y).call(this,t,i),this.hub.emit("user-operation-added",t),!1!==n&&(s=await re.__privateMethod.call(void 0,this,b,w).call(this,e)),await re.__privateMethod.call(void 0,this,_,k).call(this,t,i),await re.__privateMethod.call(void 0,this,S,E).call(this,t),s?.success(),t.hash}catch(e){throw s?.error(e),e}},d=new WeakSet,h=async function(e){const{id:t,hash:r}=e;return Q.projectLogger.call(void 0,"Waiting for confirmation",t,r),new Promise(((e,r)=>{this.hub.once(`${t}:confirmed`,(t=>{e(t)})),this.hub.once(`${t}:failed`,((e,t)=>{r(t)}))}))},f=new WeakSet,p=async function(e,t,r,n){const i={actualGasCost:null,actualGasUsed:null,baseFeePerGas:null,bundlerUrl:null,chainId:e,error:null,hash:null,id:de.v1.call(void 0),origin:t,status:"unapproved",swapsMetadata:n?{approvalTxId:n.approvalTxId??null,destinationTokenAddress:n.destinationTokenAddress??null,destinationTokenDecimals:n.destinationTokenDecimals??null,destinationTokenSymbol:n.destinationTokenSymbol??null,estimatedBaseFee:n.estimatedBaseFee??null,sourceTokenSymbol:n.sourceTokenSymbol??null,swapMetaData:n.swapMetaData??null,swapTokenValue:n.swapTokenValue??null}:null,time:Date.now(),transactionHash:null,transactionParams:r??null,transactionType:null,userFeeLevel:null,userOperation:re.__privateMethod.call(void 0,this,A,P).call(this,r)};return re.__privateMethod.call(void 0,this,C,x).call(this,i),Q.projectLogger.call(void 0,"Added user operation",i.id),i},m=new WeakSet,g=async function(e){const{chainId:t,metadata:r,options:n,provider:o,request:a,transaction:l}=e,{data:c,from:u,to:d,value:h}=a,{id:f,transactionParams:p,userOperation:m}=r,{smartContractAccount:g}=n;Q.projectLogger.call(void 0,"Preparing user operation",{id:f});const v=await re.__privateMethod.call(void 0,this,F,U).call(this,l,o,n);r.transactionType=v??null,Q.projectLogger.call(void 0,"Determined transaction type",v),await K.updateGasFees.call(void 0,{getGasFeeEstimates:re.__privateGet.call(void 0,this,s),metadata:r,originalRequest:a,provider:o,transaction:p??void 0});const y=await g.prepareUserOperation({chainId:t,data:c,from:u,to:d,value:h});Z.validatePrepareUserOperationResponse.call(void 0,y);const{bundler:b,callData:w,dummyPaymasterAndData:_,dummySignature:k,initCode:S,nonce:E,sender:T}=y;m.callData=w,m.initCode=S??te.EMPTY_BYTES,m.nonce=E,m.paymasterAndData=_??te.EMPTY_BYTES,m.sender=T,m.signature=k??te.EMPTY_BYTES,r.bundlerUrl=b,await Y.updateGas.call(void 0,r,y,re.__privateGet.call(void 0,this,i)),re.__privateMethod.call(void 0,this,C,x).call(this,r)},v=new WeakSet,y=async function(e,t){const{id:r,userOperation:n}=e;Q.projectLogger.call(void 0,"Requesting paymaster data",{id:r});const i=await t.updateUserOperation({userOperation:n});Z.validateUpdateUserOperationResponse.call(void 0,i),n.paymasterAndData=i.paymasterAndData??te.EMPTY_BYTES,re.__privateMethod.call(void 0,this,C,x).call(this,e)},b=new WeakSet,w=async function(e){Q.projectLogger.call(void 0,"Requesting approval");const{metadata:t}=e,{resultCallbacks:r,value:n}=await re.__privateMethod.call(void 0,this,L,D).call(this,t),i=n?.txMeta;return i&&await re.__privateMethod.call(void 0,this,W,$).call(this,e,i),t.status="approved",re.__privateMethod.call(void 0,this,C,x).call(this,t),r},_=new WeakSet,k=async function(e,t){const{id:r,chainId:n,userOperation:i}=e;Q.projectLogger.call(void 0,"Signing user operation",r,i);const s=await t.signUserOperation({userOperation:i,chainId:n});Z.validateSignUserOperationResponse.call(void 0,s);const{signature:o}=s;i.signature=o,Q.projectLogger.call(void 0,"Signed user operation",o),e.status="signed",re.__privateMethod.call(void 0,this,C,x).call(this,e)},S=new WeakSet,E=async function(e){const{userOperation:t}=e;Q.projectLogger.call(void 0,"Submitting user operation",t);const r=new(0,X.Bundler)(e.bundlerUrl),n=await r.sendUserOperation(t,re.__privateGet.call(void 0,this,i));e.hash=n,e.status="submitted",re.__privateMethod.call(void 0,this,C,x).call(this,e)},T=new WeakSet,j=function(e,t){const{id:r}=e,n=t;Q.projectLogger.call(void 0,"User operation failed",r,t),e.error={name:n.name,message:n.message,stack:n.stack,code:n.code,rpc:n.value},e.status="failed",re.__privateMethod.call(void 0,this,C,x).call(this,e),String(n.code)===String(oe.errorCodes.provider.userRejectedRequest)&&re.__privateMethod.call(void 0,this,O,M).call(this,r)},A=new WeakSet,P=function(e){return{callData:te.EMPTY_BYTES,callGasLimit:te.EMPTY_BYTES,initCode:te.EMPTY_BYTES,maxFeePerGas:e?.maxFeePerGas??te.EMPTY_BYTES,maxPriorityFeePerGas:e?.maxPriorityFeePerGas??te.EMPTY_BYTES,nonce:te.EMPTY_BYTES,paymasterAndData:te.EMPTY_BYTES,preVerificationGas:te.EMPTY_BYTES,sender:te.ADDRESS_ZERO,signature:te.EMPTY_BYTES,verificationGasLimit:te.EMPTY_BYTES}},C=new WeakSet,x=function(e){const{id:t}=e;this.update((r=>{r.userOperations[t]=ue.cloneDeep.call(void 0,e)})),re.__privateMethod.call(void 0,this,B,I).call(this,e)},O=new WeakSet,M=function(e){this.update((t=>{delete t.userOperations[e]}))},B=new WeakSet,I=function(e){if(!e.transactionParams)return;const t=z.getTransactionMetadata.call(void 0,e);this.hub.emit("transaction-updated",t)},R=new WeakSet,N=function(){re.__privateGet.call(void 0,this,o).hub.on("user-operation-confirmed",(e=>{Q.projectLogger.call(void 0,"In listener..."),this.hub.emit("user-operation-confirmed",e),this.hub.emit(`${e.id}:confirmed`,e)})),re.__privateGet.call(void 0,this,o).hub.on("user-operation-failed",((e,t)=>{this.hub.emit("user-operation-failed",e,t),this.hub.emit(`${e.id}:failed`,e,t)})),re.__privateGet.call(void 0,this,o).hub.on("user-operation-updated",(e=>{re.__privateMethod.call(void 0,this,C,x).call(this,e)}))},L=new WeakSet,D=async function(e){const{id:t,origin:r}=e,n=ie.ApprovalType.Transaction,i={txId:t};return await this.messagingSystem.call("ApprovalController:addRequest",{id:t,origin:r,type:n,requestData:i,expectsResult:!0},!0)},F=new WeakSet,U=async function(e,t,r){if(!e)return;if(r.type)return r.type;const n=new(0,se.default)(t),i=ae.determineTransactionType.call(void 0,e,n);return(await i).type},G=new WeakSet,H=async function(e){const{provider:t,configuration:r}=this.messagingSystem.call("NetworkController:getNetworkClientById",e),{chainId:n}=r;return{provider:t,chainId:n}},W=new WeakSet,$=async function(e,t){Q.projectLogger.call(void 0,"Found updated transaction in approval",{updatedTransaction:t});const{metadata:r,request:n}=e,{userOperation:i}=r,s=i.paymasterAndData!==te.EMPTY_BYTES,o=le.add0x.call(void 0,t.txParams.maxFeePerGas),a=le.add0x.call(void 0,t.txParams.maxPriorityFeePerGas);let l=!1;const c=i.maxFeePerGas,u=i.maxPriorityFeePerGas;c===o&&u===a||(Q.projectLogger.call(void 0,"Gas fees updated during approval",{previousMaxFeePerGas:c,previousMaxPriorityFeePerGas:u,updatedMaxFeePerGas:o,updatedMaxPriorityFeePerGas:a}),i.maxFeePerGas=o,i.maxPriorityFeePerGas=a,l=s);const d=n.data??te.EMPTY_BYTES,h=t.txParams.data??te.EMPTY_BYTES;d!==h&&(Q.projectLogger.call(void 0,"Data updated during approval",{previousData:d,updatedData:h}),l=!0);const f=n.value??te.VALUE_ZERO,p=t.txParams.value??te.VALUE_ZERO;if(f!==p&&(Q.projectLogger.call(void 0,"Value updated during approval",{previousValue:f,updatedValue:p}),l=!0),l){const t={...n,data:h,maxFeePerGas:o,maxPriorityFeePerGas:a,value:p};await re.__privateMethod.call(void 0,this,q,V).call(this,{...e,request:t})}},q=new WeakSet,V=async function(e){Q.projectLogger.call(void 0,"Regenerating user operation as parameters were updated during approval");const{options:{smartContractAccount:t},metadata:r}=e;await re.__privateMethod.call(void 0,this,m,g).call(this,e),await re.__privateMethod.call(void 0,this,v,y).call(this,r,t),Q.projectLogger.call(void 0,"Regenerated user operation",r.userOperation)},r.UserOperationController=fe}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/chunk-W63SSGH2.js"}],[1991,{"./chunk-BTR56Y3F.js":1983,"@metamask/transaction-controller":1974,"@metamask/utils":2021,"bn.js":2696},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i=e("./chunk-BTR56Y3F.js"),s=e("@metamask/transaction-controller"),o=e("@metamask/utils"),a=e("bn.js"),l=(n=a)&&n.__esModule?n:{default:n};r.getTransactionMetadata=function(e){const{actualGasCost:t,actualGasUsed:r,baseFeePerGas:n,chainId:a,error:c,origin:u,transactionHash:d,id:h,swapsMetadata:f,time:p,transactionParams:m,transactionType:g,userFeeLevel:v,userOperation:y}=e;if(!m)return;const b=t&&r?o.add0x.call(void 0,new(0,l.default)(o.remove0x.call(void 0,t),16).div(new(0,l.default)(o.remove0x.call(void 0,r),16)).toString(16)):void 0,w=c?{name:c.name,message:c.message,stack:c.stack,code:c.code,rpc:c.rpc}:void 0,_={unapproved:s.TransactionStatus.unapproved,approved:s.TransactionStatus.approved,signed:s.TransactionStatus.signed,submitted:s.TransactionStatus.submitted,confirmed:s.TransactionStatus.confirmed,failed:s.TransactionStatus.failed}[e.status],k=function(...e){const t=new(0,l.default)(0);for(const r of e)r&&t.iadd(new(0,l.default)(o.remove0x.call(void 0,r),16));return o.add0x.call(void 0,t.toString(16))}(y.preVerificationGas,y.verificationGasLimit,y.callGasLimit),S=y.paymasterAndData!==i.EMPTY_BYTES,E=S?i.VALUE_ZERO:y.maxFeePerGas,T=S?i.VALUE_ZERO:y.maxPriorityFeePerGas,j=y.nonce===i.EMPTY_BYTES?void 0:y.nonce,A={...m,from:y.sender,gas:k,nonce:j,maxFeePerGas:E,maxPriorityFeePerGas:T};delete A.gasPrice;const P={approvalTxId:f?.approvalTxId??void 0,destinationTokenAddress:f?.destinationTokenAddress??void 0,destinationTokenDecimals:f?.destinationTokenDecimals??void 0,destinationTokenSymbol:f?.destinationTokenSymbol??void 0,estimatedBaseFee:f?.estimatedBaseFee??void 0,sourceTokenSymbol:f?.sourceTokenSymbol??void 0,swapMetaData:f?.swapMetaData??void 0,swapTokenValue:f?.swapTokenValue??void 0};return{baseFeePerGas:n??void 0,chainId:a,error:w,hash:d??void 0,id:h,isUserOperation:!0,origin:u,status:_,time:p,txParams:A,txReceipt:{effectiveGasPrice:b??void 0,gasUsed:r??void 0},type:g??void 0,userFeeLevel:S?s.UserFeeLevel.CUSTOM:v,...P}}}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/chunk-WF3VLEGJ.js"}],[1992,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__privateGet=(e,t,r)=>(n(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,i)=>(n(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(n(e,t,"access private method"),r)}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/chunk-Z4BLTVTB.js"}],[1993,{"./chunk-7JPKNM2X.js":1981,"./chunk-B7GI5EWI.js":1982,"./chunk-BTR56Y3F.js":1983,"./chunk-K6XMMCKJ.js":1984,"./chunk-KQMYR73X.js":1985,"./chunk-OH6WM4Z6.js":1986,"./chunk-QVY5Q2VX.js":1987,"./chunk-SSHRMBLI.js":1988,"./chunk-W4DFKKZT.js":1989,"./chunk-W63SSGH2.js":1990,"./chunk-WF3VLEGJ.js":1991,"./chunk-Z4BLTVTB.js":1992},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-W63SSGH2.js");e("./chunk-SSHRMBLI.js"),e("./chunk-7JPKNM2X.js"),e("./chunk-WF3VLEGJ.js"),e("./chunk-OH6WM4Z6.js"),e("./chunk-B7GI5EWI.js");var i=e("./chunk-W4DFKKZT.js");e("./chunk-K6XMMCKJ.js"),e("./chunk-KQMYR73X.js"),e("./chunk-QVY5Q2VX.js"),e("./chunk-BTR56Y3F.js"),e("./chunk-Z4BLTVTB.js"),r.UserOperationController=n.UserOperationController,r.UserOperationStatus=i.UserOperationStatus}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/index.js"}],[1994,{"./chunk-UJFCPTF3.js":1996,"./chunk-Z4BLTVTB.js":1997},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i,s,o,a=e("./chunk-UJFCPTF3.js"),l=e("./chunk-Z4BLTVTB.js");n=new WeakMap,i=new WeakMap,s=new WeakMap,o=new WeakMap,r.ControllerMessenger=class{constructor(){l.__privateAdd.call(void 0,this,n,new Map),l.__privateAdd.call(void 0,this,i,new Map),l.__privateAdd.call(void 0,this,s,new Map),l.__privateAdd.call(void 0,this,o,new Map)}registerActionHandler(e,t){if(l.__privateGet.call(void 0,this,n).has(e))throw new Error(`A handler for ${e} has already been registered`);l.__privateGet.call(void 0,this,n).set(e,t)}unregisterActionHandler(e){l.__privateGet.call(void 0,this,n).delete(e)}clearActions(){l.__privateGet.call(void 0,this,n).clear()}call(e,...t){const r=l.__privateGet.call(void 0,this,n).get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}registerInitialEventPayload({eventType:e,getPayload:t}){l.__privateGet.call(void 0,this,s).set(e,t)}publish(e,...t){const r=l.__privateGet.call(void 0,this,i).get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=l.__privateGet.call(void 0,this,o).get(e),i=n(...t);i!==r&&(l.__privateGet.call(void 0,this,o).set(e,i),e(i,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=l.__privateGet.call(void 0,this,i).get(e);if(n||(n=new Map,l.__privateGet.call(void 0,this,i).set(e,n)),n.set(t,r),r){const n=l.__privateGet.call(void 0,this,s).get(e);if(n){const e=r(...n());l.__privateGet.call(void 0,this,o).set(t,e)}}}unsubscribe(e,t){const r=l.__privateGet.call(void 0,this,i).get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&l.__privateGet.call(void 0,this,o).delete(t),r.delete(t)}clearEventSubscriptions(e){l.__privateGet.call(void 0,this,i).delete(e)}clearSubscriptions(){l.__privateGet.call(void 0,this,i).clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new(0,a.RestrictedControllerMessenger)({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/user-operation-controller>@metamask/base-controller",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/base-controller/dist/chunk-G42723LG.js"}],[1995,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=class{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e of Object.keys(this.internalConfig)){const t=this.internalConfig[e];void 0!==t&&(this[e]=t)}}else for(const t of Object.keys(e))if(void 0!==this.internalConfig[t]){const r=e[t];this.internalConfig[t]=r,this[t]=r}}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}},i=n;r.BaseControllerV1=n,r.BaseControllerV1_default=i}}},{package:"@metamask/user-operation-controller>@metamask/base-controller",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/base-controller/dist/chunk-NINOM2XQ.js"}],[1996,{"./chunk-Z4BLTVTB.js":1997},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i,s,o,a,l,c,u,d,h,f=e("./chunk-Z4BLTVTB.js");n=new WeakMap,i=new WeakMap,s=new WeakMap,o=new WeakMap,a=new WeakSet,l=function(e){const t=f.__privateGet.call(void 0,this,o);return f.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},c=new WeakSet,u=function(e){const t=f.__privateGet.call(void 0,this,s);return f.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},d=new WeakSet,h=function(e){return e.startsWith(`${f.__privateGet.call(void 0,this,i)}:`)},r.RestrictedControllerMessenger=class{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:l}){f.__privateAdd.call(void 0,this,a),f.__privateAdd.call(void 0,this,c),f.__privateAdd.call(void 0,this,d),f.__privateAdd.call(void 0,this,n,void 0),f.__privateAdd.call(void 0,this,i,void 0),f.__privateAdd.call(void 0,this,s,void 0),f.__privateAdd.call(void 0,this,o,void 0),f.__privateSet.call(void 0,this,n,e),f.__privateSet.call(void 0,this,i,t),f.__privateSet.call(void 0,this,s,r),f.__privateSet.call(void 0,this,o,l)}registerActionHandler(e,t){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed registering action handlers prefixed by '${f.__privateGet.call(void 0,this,i)}:'`);f.__privateGet.call(void 0,this,n).registerActionHandler(e,t)}unregisterActionHandler(e){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed unregistering action handlers prefixed by '${f.__privateGet.call(void 0,this,i)}:'`);f.__privateGet.call(void 0,this,n).unregisterActionHandler(e)}call(e,...t){if(!f.__privateMethod.call(void 0,this,c,u).call(this,e))throw new Error(`Action missing from allow list: ${e}`);return f.__privateGet.call(void 0,this,n).call(e,...t)}registerInitialEventPayload({eventType:e,getPayload:t}){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${f.__privateGet.call(void 0,this,i)}:'`);f.__privateGet.call(void 0,this,n).registerInitialEventPayload({eventType:e,getPayload:t})}publish(e,...t){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${f.__privateGet.call(void 0,this,i)}:'`);f.__privateGet.call(void 0,this,n).publish(e,...t)}subscribe(e,t,r){if(!f.__privateMethod.call(void 0,this,a,l).call(this,e))throw new Error(`Event missing from allow list: ${e}`);return r?f.__privateGet.call(void 0,this,n).subscribe(e,t,r):f.__privateGet.call(void 0,this,n).subscribe(e,t)}unsubscribe(e,t){if(!f.__privateMethod.call(void 0,this,a,l).call(this,e))throw new Error(`Event missing from allow list: ${e}`);f.__privateGet.call(void 0,this,n).unsubscribe(e,t)}clearEventSubscriptions(e){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed clearing events prefixed by '${f.__privateGet.call(void 0,this,i)}:'`);f.__privateGet.call(void 0,this,n).clearEventSubscriptions(e)}}}}},{package:"@metamask/user-operation-controller>@metamask/base-controller",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/base-controller/dist/chunk-UJFCPTF3.js"}],[1997,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__privateGet=(e,t,r)=>(n(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,i)=>(n(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(n(e,t,"access private method"),r)}}},{package:"@metamask/user-operation-controller>@metamask/base-controller",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/base-controller/dist/chunk-Z4BLTVTB.js"}],[1998,{"./chunk-Z4BLTVTB.js":1997,immer:3366},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i=e("./chunk-Z4BLTVTB.js"),s=e("immer");s.enablePatches.call(void 0);function o(e,t,r){return Object.keys(e).reduce(((n,i)=>{try{const s=t[i];if(!s)throw new Error(`No metadata found for '${String(i)}'`);const o=s[r],a=e[i];return"function"==typeof o?n[i]=o(a):o&&(n[i]=a),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}n=new WeakMap,r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:o}){i.__privateAdd.call(void 0,this,n,void 0),this.messagingSystem=e,this.name=r,i.__privateSet.call(void 0,this,n,s.freeze.call(void 0,o,!0)),this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state)),this.messagingSystem.registerInitialEventPayload({eventType:`${r}:stateChange`,getPayload:()=>[this.state,[]]})}get state(){return i.__privateGet.call(void 0,this,n)}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,o]=s.produceWithPatches.call(void 0,i.__privateGet.call(void 0,this,n),e);return i.__privateSet.call(void 0,this,n,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:o}}applyPatches(e){const t=s.applyPatches.call(void 0,i.__privateGet.call(void 0,this,n),e);i.__privateSet.call(void 0,this,n,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return o(e,t,"anonymous")},r.getPersistentState=function(e,t){return o(e,t,"persist")}}}},{package:"@metamask/user-operation-controller>@metamask/base-controller",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/base-controller/dist/chunk-ZNOPSWMU.js"}],[1999,{"./chunk-G42723LG.js":1994,"./chunk-NINOM2XQ.js":1995,"./chunk-UJFCPTF3.js":1996,"./chunk-Z4BLTVTB.js":1997,"./chunk-ZNOPSWMU.js":1998},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-NINOM2XQ.js"),i=e("./chunk-ZNOPSWMU.js"),s=e("./chunk-G42723LG.js"),o=e("./chunk-UJFCPTF3.js");e("./chunk-Z4BLTVTB.js"),r.BaseController=i.BaseController,r.BaseControllerV1=n.BaseControllerV1,r.ControllerMessenger=s.ControllerMessenger,r.RestrictedControllerMessenger=o.RestrictedControllerMessenger,r.getAnonymizedState=i.getAnonymizedState,r.getPersistentState=i.getPersistentState}}},{package:"@metamask/user-operation-controller>@metamask/base-controller",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/base-controller/dist/index.js"}],[20,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.NOTIFICATION_NAMES=void 0;r.NOTIFICATION_NAMES={accountsChanged:"metamask_accountsChanged",unlockStateChanged:"metamask_unlockStateChanged",chainChanged:"metamask_chainChanged"}}}},{package:"$root$",file:"app/scripts/controllers/permissions/enums.js"}],[200,{"../../../shared/constants/network":4304,"@metamask/utils":2021,lodash:3587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=o,function(e){if(!((0,i.hasProperty)(e,"PreferencesController")&&(0,i.isObject)(e.PreferencesController)&&(0,i.isObject)(e.NetworkController)&&(0,i.hasProperty)(e.PreferencesController,"featureFlags")&&(0,i.hasProperty)(e.NetworkController,"networkConfigurations")))return e;const{PreferencesController:t,NetworkController:r}=e,{featureFlags:o}=t,{showIncomingTransactions:a}=o,{networkConfigurations:l}=r,c=Object.values(l).map((e=>e.chainId)),u=[s.CHAIN_IDS.MAINNET,s.CHAIN_IDS.LINEA_MAINNET],d=[s.CHAIN_IDS.GOERLI,s.CHAIN_IDS.SEPOLIA,s.CHAIN_IDS.LINEA_GOERLI],h=[...u,...c,...d],f=(0,n.fromPairs)((0,n.map)(h,(e=>[e,a])));(null==o?void 0:o.showIncomingTransactions)!==undefined&&delete o.showIncomingTransactions;e.PreferencesController.incomingTransactionsPreferences=f}(t.data),t},r.version=void 0;var n=e("lodash"),i=e("@metamask/utils"),s=e("../../../shared/constants/network");const o=r.version=96}}},{package:"$root$",file:"app/scripts/migrations/096.ts"}],[201,{lodash:3587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=i,function(e){const t=(null==e?void 0:e.TransactionController)||{},r=(null==t?void 0:t.transactions)||{};if((0,n.isEmpty)(r))return;const i=Object.keys(r).reduce(((e,t)=>{const n=r[t];return null!=n&&n.nonceDetails&&delete n.nonceDetails,{...e,[t]:n}}),{});e.TransactionController={...t,transactions:i}}(t.data),t},r.version=void 0;var n=e("lodash");const i=r.version=97}}},{package:"$root$",file:"app/scripts/migrations/097.ts"}],[202,{lodash:3587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=i,function(e){const t=(null==e?void 0:e.TransactionController)||{},r=(null==t?void 0:t.transactions)||{};if((0,n.isEmpty)(r))return;const i=Object.keys(r).reduce(((e,t)=>{const n=r[t];return n.verifiedOnBlockchain=Boolean(n.txReceipt),{...e,[t]:n}}),{});e.TransactionController={...t,transactions:i}}(t.data),t},r.version=void 0;var n=e("lodash");const i=r.version=98}}},{package:"$root$",file:"app/scripts/migrations/098.ts"}],[2022,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var i=e.charAt(n),s=i.charCodeAt(0);if(255!==t[s])throw new TypeError(i+" is ambiguous");t[s]=n}var o=e.length,a=e.charAt(0),l=Math.log(o)/Math.log(256),c=Math.log(256)/Math.log(o);function u(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var r=0;if(" "!==e[r]){for(var n=0,i=0;e[r]===a;)n++,r++;for(var s=(e.length-r)*l+1>>>0,c=new Uint8Array(s);e[r];){var u=t[e.charCodeAt(r)];if(255===u)return;for(var d=0,h=s-1;(0!==u||d<i)&&-1!==h;h--,d++)u+=o*c[h]>>>0,c[h]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");i=d,r++}if(" "!==e[r]){for(var f=s-i;f!==s&&0===c[f];)f++;for(var p=new Uint8Array(n+(s-f)),m=n;f!==s;)p[m++]=c[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var l=(s-i)*c+1>>>0,u=new Uint8Array(l);i!==s;){for(var d=t[i],h=0,f=l-1;(0!==d||h<n)&&-1!==f;f--,h++)d+=256*u[f]>>>0,u[f]=d%o>>>0,d=d/o>>>0;if(0!==d)throw new Error("Non-zero carry");n=h,i++}for(var p=l-n;p!==l&&0===u[p];)p++;for(var m=a.repeat(r);p<l;++p)m+=e.charAt(u[p]);return m},decodeUnsafe:u,decode:function(e){var t=u(e);if(t)return t;throw new Error("Non-base"+o+" character")}}}}}},{package:"@ensdomains/content-hash>cids>multibase>@multiformats/base-x",file:"node_modules/@multiformats/base-x/src/index.js"}],[203,{lodash:3587,uuid:4208},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=s,function(e){const t=(null==e?void 0:e.TransactionController)||{},r=(null==t?void 0:t.transactions)||{};if((0,n.isEmpty)(r))return;const s=Object.keys(r).reduce(((e,t)=>{const s=(0,n.cloneDeep)(r[t]),o=(0,i.v1)();return s.id=o,{...e,[o]:s}}),{});e.TransactionController={...t,transactions:s}}(t.data),t},r.version=void 0;var n=e("lodash"),i=e("uuid");const s=r.version=99}}},{package:"$root$",file:"app/scripts/migrations/099.ts"}],[2036,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function i(e){if("boolean"!=typeof e)throw new Error(`boolean expected, not ${e}`)}function s(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function o(e,...t){if(!s(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function a(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("hash must be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}function l(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function c(e,t){o(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}Object.defineProperty(r,"__esModule",{value:!0}),r.output=r.exists=r.hash=r.bytes=r.bool=r.number=r.isBytes=void 0,r.number=n,r.bool=i,r.isBytes=s,r.bytes=o,r.hash=a,r.exists=l,r.output=c;const u={number:n,bool:i,bytes:o,hash:a,exists:l,output:c};r.default=u}}},{package:"@noble/ciphers",file:"node_modules/@noble/ciphers/_assert.js"}],[2037,{"./_assert.js":2036,"./utils.js":2040},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.polyval=r.ghash=r._toGHASHKey=void 0;const n=e("./utils.js"),i=e("./_assert.js"),s=16,o=new Uint8Array(16),a=(0,n.u32)(o),l=e=>(e>>>0&255)<<24|(e>>>8&255)<<16|(e>>>16&255)<<8|e>>>24&255;function c(e){e.reverse();const t=1&e[15];let r=0;for(let t=0;t<e.length;t++){const n=e[t];e[t]=n>>>1|r,r=(1&n)<<7}return e[0]^=225&-t,e}r._toGHASHKey=c;class u{constructor(e,t){this.blockLen=s,this.outputLen=s,this.s0=0,this.s1=0,this.s2=0,this.s3=0,this.finished=!1,e=(0,n.toBytes)(e),(0,i.bytes)(e,16);const r=(0,n.createView)(e);let o=r.getUint32(0,!1),a=r.getUint32(4,!1),c=r.getUint32(8,!1),u=r.getUint32(12,!1);const d=[];for(let e=0;e<128;e++)d.push({s0:l(o),s1:l(a),s2:l(c),s3:l(u)}),({s0:o,s1:a,s2:c,s3:u}={s3:(p=c)<<31|(m=u)>>>1,s2:(f=a)<<31|p>>>1,s1:(h=o)<<31|f>>>1,s0:h>>>1^225<<24&-(1&m)});var h,f,p,m;const g=(v=t||1024)>65536?8:v>1024?4:2;var v;if(![1,2,4,8].includes(g))throw new Error(`ghash: wrong window size=${g}, should be 2, 4 or 8`);this.W=g;const y=128/g,b=this.windowSize=2**g,w=[];for(let e=0;e<y;e++)for(let t=0;t<b;t++){let r=0,n=0,i=0,s=0;for(let o=0;o<g;o++){if(!(t>>>g-o-1&1))continue;const{s0:a,s1:l,s2:c,s3:u}=d[g*e+o];r^=a,n^=l,i^=c,s^=u}w.push({s0:r,s1:n,s2:i,s3:s})}this.t=w}_updateBlock(e,t,r,n){e^=this.s0,t^=this.s1,r^=this.s2,n^=this.s3;const{W:i,t:s,windowSize:o}=this;let a=0,l=0,c=0,u=0;const d=(1<<i)-1;let h=0;for(const f of[e,t,r,n])for(let e=0;e<4;e++){const t=f>>>8*e&255;for(let e=8/i-1;e>=0;e--){const r=t>>>i*e&d,{s0:n,s1:f,s2:p,s3:m}=s[h*o+r];a^=n,l^=f,c^=p,u^=m,h+=1}}this.s0=a,this.s1=l,this.s2=c,this.s3=u}update(e){e=(0,n.toBytes)(e),(0,i.exists)(this);const t=(0,n.u32)(e),r=Math.floor(e.length/s),l=e.length%s;for(let e=0;e<r;e++)this._updateBlock(t[4*e+0],t[4*e+1],t[4*e+2],t[4*e+3]);return l&&(o.set(e.subarray(r*s)),this._updateBlock(a[0],a[1],a[2],a[3]),a.fill(0)),this}destroy(){const{t:e}=this;for(const t of e)t.s0=0,t.s1=0,t.s2=0,t.s3=0}digestInto(e){(0,i.exists)(this),(0,i.output)(e,this),this.finished=!0;const{s0:t,s1:r,s2:s,s3:o}=this,a=(0,n.u32)(e);return a[0]=t,a[1]=r,a[2]=s,a[3]=o,e}digest(){const e=new Uint8Array(s);return this.digestInto(e),this.destroy(),e}}class d extends u{constructor(e,t){const r=c((e=(0,n.toBytes)(e)).slice());super(r,t),r.fill(0)}update(e){e=(0,n.toBytes)(e),(0,i.exists)(this);const t=(0,n.u32)(e),r=e.length%s,c=Math.floor(e.length/s);for(let e=0;e<c;e++)this._updateBlock(l(t[4*e+3]),l(t[4*e+2]),l(t[4*e+1]),l(t[4*e+0]));return r&&(o.set(e.subarray(c*s)),this._updateBlock(l(a[3]),l(a[2]),l(a[1]),l(a[0])),a.fill(0)),this}digestInto(e){(0,i.exists)(this),(0,i.output)(e,this),this.finished=!0;const{s0:t,s1:r,s2:s,s3:o}=this,a=(0,n.u32)(e);return a[0]=t,a[1]=r,a[2]=s,a[3]=o,e.reverse()}}function h(e){const t=(t,r)=>e(r,t.length).update((0,n.toBytes)(t)).digest(),r=e(new Uint8Array(16),0);return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=(t,r)=>e(t,r),t}r.ghash=h(((e,t)=>new u(e,t))),r.polyval=h(((e,t)=>new d(e,t)))}}},{package:"@noble/ciphers",file:"node_modules/@noble/ciphers/_polyval.js"}],[2038,{"./_assert.js":2036,"./_polyval.js":2037,"./utils.js":2040},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.unsafe=r.siv=r.gcm=r.cfb=r.cbc=r.ecb=r.ctr=r.expandKeyDecLE=r.expandKeyLE=void 0;const n=e("./utils.js"),i=e("./_polyval.js"),s=e("./_assert.js"),o=16,a=new Uint8Array(o),l=283;function c(e){return e<<1^l&-(e>>7)}function u(e,t){let r=0;for(;t>0;t>>=1)r^=e&-(1&t),e=c(e);return r}const d=(()=>{let e=new Uint8Array(256);for(let t=0,r=1;t<256;t++,r^=c(r))e[t]=r;const t=new Uint8Array(256);t[0]=99;for(let r=0;r<255;r++){let n=e[255-r];n|=n<<8,t[e[r]]=255&(n^n>>4^n>>5^n>>6^n>>7^99)}return t})(),h=d.map(((e,t)=>d.indexOf(t))),f=e=>e<<24|e>>>8,p=e=>e<<8|e>>>24;function m(e,t){if(256!==e.length)throw new Error("Wrong sbox length");const r=new Uint32Array(256).map(((r,n)=>t(e[n]))),n=r.map(p),i=n.map(p),s=i.map(p),o=new Uint32Array(65536),a=new Uint32Array(65536),l=new Uint16Array(65536);for(let t=0;t<256;t++)for(let c=0;c<256;c++){const u=256*t+c;o[u]=r[t]^n[c],a[u]=i[t]^s[c],l[u]=e[t]<<8|e[c]}return{sbox:e,sbox2:l,T0:r,T1:n,T2:i,T3:s,T01:o,T23:a}}const g=m(d,(e=>u(e,3)<<24|e<<16|e<<8|u(e,2))),v=m(h,(e=>u(e,11)<<24|u(e,13)<<16|u(e,9)<<8|u(e,14))),y=(()=>{const e=new Uint8Array(16);for(let t=0,r=1;t<16;t++,r=c(r))e[t]=r;return e})();function b(e){(0,s.bytes)(e);const t=e.length;if(![16,24,32].includes(t))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${t}`);const{sbox2:r}=g,i=(0,n.u32)(e),o=i.length,a=e=>k(r,e,e,e,e),l=new Uint32Array(t+28);l.set(i);for(let e=o;e<l.length;e++){let t=l[e-1];e%o==0?t=a(f(t))^y[e/o-1]:o>6&&e%o==4&&(t=a(t)),l[e]=l[e-o]^t}return l}function w(e){const t=b(e),r=t.slice(),n=t.length,{sbox2:i}=g,{T0:s,T1:o,T2:a,T3:l}=v;for(let e=0;e<n;e+=4)for(let i=0;i<4;i++)r[e+i]=t[n-e-4+i];t.fill(0);for(let e=4;e<n-4;e++){const t=r[e],n=k(i,t,t,t,t);r[e]=s[255&n]^o[n>>>8&255]^a[n>>>16&255]^l[n>>>24]}return r}function _(e,t,r,n,i,s){return e[r<<8&65280|n>>>8&255]^t[i>>>8&65280|s>>>24&255]}function k(e,t,r,n,i){return e[255&t|65280&r]|e[n>>>16&255|i>>>16&65280]<<16}function S(e,t,r,n,i){const{sbox2:s,T01:o,T23:a}=g;let l=0;t^=e[l++],r^=e[l++],n^=e[l++],i^=e[l++];const c=e.length/4-2;for(let s=0;s<c;s++){const s=e[l++]^_(o,a,t,r,n,i),c=e[l++]^_(o,a,r,n,i,t),u=e[l++]^_(o,a,n,i,t,r),d=e[l++]^_(o,a,i,t,r,n);t=s,r=c,n=u,i=d}return{s0:e[l++]^k(s,t,r,n,i),s1:e[l++]^k(s,r,n,i,t),s2:e[l++]^k(s,n,i,t,r),s3:e[l++]^k(s,i,t,r,n)}}function E(e,t,r,n,i){const{sbox2:s,T01:o,T23:a}=v;let l=0;t^=e[l++],r^=e[l++],n^=e[l++],i^=e[l++];const c=e.length/4-2;for(let s=0;s<c;s++){const s=e[l++]^_(o,a,t,i,n,r),c=e[l++]^_(o,a,r,t,i,n),u=e[l++]^_(o,a,n,r,t,i),d=e[l++]^_(o,a,i,n,r,t);t=s,r=c,n=u,i=d}return{s0:e[l++]^k(s,t,i,n,r),s1:e[l++]^k(s,r,t,i,n),s2:e[l++]^k(s,n,r,t,i),s3:e[l++]^k(s,i,n,r,t)}}function T(e,t){if(!t)return new Uint8Array(e);if((0,s.bytes)(t),t.length<e)throw new Error(`aes: wrong destination length, expected at least ${e}, got: ${t.length}`);return t}function j(e,t,r,i){(0,s.bytes)(t,o),(0,s.bytes)(r);const a=r.length;i=T(a,i);const l=t,c=(0,n.u32)(l);let{s0:u,s1:d,s2:h,s3:f}=S(e,c[0],c[1],c[2],c[3]);const p=(0,n.u32)(r),m=(0,n.u32)(i);for(let t=0;t+4<=p.length;t+=4){m[t+0]=p[t+0]^u,m[t+1]=p[t+1]^d,m[t+2]=p[t+2]^h,m[t+3]=p[t+3]^f;let r=1;for(let e=l.length-1;e>=0;e--)r=r+(255&l[e])|0,l[e]=255&r,r>>>=8;({s0:u,s1:d,s2:h,s3:f}=S(e,c[0],c[1],c[2],c[3]))}const g=o*Math.floor(p.length/4);if(g<a){const e=new Uint32Array([u,d,h,f]),t=(0,n.u8)(e);for(let e=g,n=0;e<a;e++,n++)i[e]=r[e]^t[n]}return i}function A(e,t,r,i,a){(0,s.bytes)(r,o),(0,s.bytes)(i),a=T(i.length,a);const l=r,c=(0,n.u32)(l),u=(0,n.createView)(l),d=(0,n.u32)(i),h=(0,n.u32)(a),f=t?0:12,p=i.length;let m=u.getUint32(f,t),{s0:g,s1:v,s2:y,s3:b}=S(e,c[0],c[1],c[2],c[3]);for(let r=0;r+4<=d.length;r+=4)h[r+0]=d[r+0]^g,h[r+1]=d[r+1]^v,h[r+2]=d[r+2]^y,h[r+3]=d[r+3]^b,m=m+1>>>0,u.setUint32(f,m,t),({s0:g,s1:v,s2:y,s3:b}=S(e,c[0],c[1],c[2],c[3]));const w=o*Math.floor(d.length/4);if(w<p){const e=new Uint32Array([g,v,y,b]),t=(0,n.u8)(e);for(let e=w,r=0;e<p;e++,r++)a[e]=i[e]^t[r]}return a}function P(e){if((0,s.bytes)(e),e.length%o!=0)throw new Error("aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size 16")}function C(e,t,r){let i=e.length;const s=i%o;if(!t&&0!==s)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");const a=(0,n.u32)(e);if(t){let e=o-s;e||(e=o),i+=e}const l=T(i,r);return{b:a,o:(0,n.u32)(l),out:l}}function x(e,t){if(!t)return e;const r=e.length;if(!r)throw new Error("aes/pcks5: empty ciphertext not allowed");const n=e[r-1];if(n<=0||n>16)throw new Error(`aes/pcks5: wrong padding byte: ${n}`);const i=e.subarray(0,-n);for(let t=0;t<n;t++)if(e[r-t-1]!==n)throw new Error("aes/pcks5: wrong padding");return i}function O(e){const t=new Uint8Array(16),r=(0,n.u32)(t);t.set(e);const i=o-e.length;for(let e=o-i;e<o;e++)t[e]=i;return r}function M(e,t,r,i,s){const o=e.create(r,i.length+(s?.length||0));s&&o.update(s),o.update(i);const a=new Uint8Array(16),l=(0,n.createView)(a);return s&&(0,n.setBigUint64)(l,0,BigInt(8*s.length),t),(0,n.setBigUint64)(l,8,BigInt(8*i.length),t),o.update(a),o.digest()}r.expandKeyLE=b,r.expandKeyDecLE=w,r.ctr=(0,n.wrapCipher)({blockSize:16,nonceLength:16},(function(e,t){function r(r,n){const i=b(e),s=t.slice(),o=j(i,s,r,n);return i.fill(0),s.fill(0),o}return(0,s.bytes)(e),(0,s.bytes)(t,o),{encrypt:(e,t)=>r(e,t),decrypt:(e,t)=>r(e,t)}})),r.ecb=(0,n.wrapCipher)({blockSize:16},(function(e,t={}){(0,s.bytes)(e);const r=!t.disablePadding;return{encrypt:(t,n)=>{(0,s.bytes)(t);const{b:i,o:o,out:a}=C(t,r,n),l=b(e);let c=0;for(;c+4<=i.length;){const{s0:e,s1:t,s2:r,s3:n}=S(l,i[c+0],i[c+1],i[c+2],i[c+3]);o[c++]=e,o[c++]=t,o[c++]=r,o[c++]=n}if(r){const e=O(t.subarray(4*c)),{s0:r,s1:n,s2:i,s3:s}=S(l,e[0],e[1],e[2],e[3]);o[c++]=r,o[c++]=n,o[c++]=i,o[c++]=s}return l.fill(0),a},decrypt:(t,i)=>{P(t);const s=w(e),o=T(t.length,i),a=(0,n.u32)(t),l=(0,n.u32)(o);for(let e=0;e+4<=a.length;){const{s0:t,s1:r,s2:n,s3:i}=E(s,a[e+0],a[e+1],a[e+2],a[e+3]);l[e++]=t,l[e++]=r,l[e++]=n,l[e++]=i}return s.fill(0),x(o,r)}}})),r.cbc=(0,n.wrapCipher)({blockSize:16,nonceLength:16},(function(e,t,r={}){(0,s.bytes)(e),(0,s.bytes)(t,16);const i=!r.disablePadding;return{encrypt:(r,s)=>{const o=b(e),{b:a,o:l,out:c}=C(r,i,s),u=(0,n.u32)(t);let d=u[0],h=u[1],f=u[2],p=u[3],m=0;for(;m+4<=a.length;)d^=a[m+0],h^=a[m+1],f^=a[m+2],p^=a[m+3],({s0:d,s1:h,s2:f,s3:p}=S(o,d,h,f,p)),l[m++]=d,l[m++]=h,l[m++]=f,l[m++]=p;if(i){const e=O(r.subarray(4*m));d^=e[0],h^=e[1],f^=e[2],p^=e[3],({s0:d,s1:h,s2:f,s3:p}=S(o,d,h,f,p)),l[m++]=d,l[m++]=h,l[m++]=f,l[m++]=p}return o.fill(0),c},decrypt:(r,s)=>{P(r);const o=w(e),a=(0,n.u32)(t),l=T(r.length,s),c=(0,n.u32)(r),u=(0,n.u32)(l);let d=a[0],h=a[1],f=a[2],p=a[3];for(let e=0;e+4<=c.length;){const t=d,r=h,n=f,i=p;d=c[e+0],h=c[e+1],f=c[e+2],p=c[e+3];const{s0:s,s1:a,s2:l,s3:m}=E(o,d,h,f,p);u[e++]=s^t,u[e++]=a^r,u[e++]=l^n,u[e++]=m^i}return o.fill(0),x(l,i)}}})),r.cfb=(0,n.wrapCipher)({blockSize:16,nonceLength:16},(function(e,t){function r(r,i,s){const a=b(e),l=r.length;s=T(l,s);const c=(0,n.u32)(r),u=(0,n.u32)(s),d=i?u:c,h=(0,n.u32)(t);let f=h[0],p=h[1],m=h[2],g=h[3];for(let e=0;e+4<=c.length;){const{s0:t,s1:r,s2:n,s3:i}=S(a,f,p,m,g);u[e+0]=c[e+0]^t,u[e+1]=c[e+1]^r,u[e+2]=c[e+2]^n,u[e+3]=c[e+3]^i,f=d[e++],p=d[e++],m=d[e++],g=d[e++]}const v=o*Math.floor(c.length/4);if(v<l){({s0:f,s1:p,s2:m,s3:g}=S(a,f,p,m,g));const e=(0,n.u8)(new Uint32Array([f,p,m,g]));for(let t=v,n=0;t<l;t++,n++)s[t]=r[t]^e[n];e.fill(0)}return a.fill(0),s}return(0,s.bytes)(e),(0,s.bytes)(t,16),{encrypt:(e,t)=>r(e,!0,t),decrypt:(e,t)=>r(e,!1,t)}})),r.gcm=(0,n.wrapCipher)({blockSize:16,nonceLength:12,tagLength:16},(function(e,t,r){if((0,s.bytes)(t),0===t.length)throw new Error("aes/gcm: empty nonce");const o=16;function l(e,t,n){const s=M(i.ghash,!1,e,n,r);for(let e=0;e<t.length;e++)s[e]^=t[e];return s}function c(){const r=b(e),s=a.slice(),o=a.slice();if(A(r,!1,o,o,s),12===t.length)o.set(t);else{const e=a.slice(),r=(0,n.createView)(e);(0,n.setBigUint64)(r,8,BigInt(8*t.length),!1),i.ghash.create(s).update(t).update(e).digestInto(o)}return{xk:r,authKey:s,counter:o,tagMask:A(r,!1,o,a)}}return{encrypt:e=>{(0,s.bytes)(e);const{xk:t,authKey:r,counter:n,tagMask:i}=c(),a=new Uint8Array(e.length+o);A(t,!1,n,e,a);const u=l(r,i,a.subarray(0,a.length-o));return a.set(u,e.length),t.fill(0),a},decrypt:e=>{if((0,s.bytes)(e),e.length<o)throw new Error("aes/gcm: ciphertext less than tagLen (16)");const{xk:t,authKey:r,counter:i,tagMask:a}=c(),u=e.subarray(0,-16),d=e.subarray(-16),h=l(r,a,u);if(!(0,n.equalBytes)(h,d))throw new Error("aes/gcm: invalid ghash tag");const f=A(t,!1,i,u);return r.fill(0),a.fill(0),t.fill(0),f}}}));const B=(e,t,r)=>n=>{if(!Number.isSafeInteger(n)||t>n||n>r)throw new Error(`${e}: invalid value=${n}, must be [${t}..${r}]`)};function I(e){return null!=e&&"object"==typeof e&&(e instanceof Uint32Array||"Uint32Array"===e.constructor.name)}r.siv=(0,n.wrapCipher)({blockSize:16,nonceLength:12,tagLength:16},(function(e,t,r){const o=B("AAD",0,2**36),a=B("plaintext",0,2**36),l=B("nonce",12,12),c=B("ciphertext",16,2**36+16);function u(){const r=e.length;if(16!==r&&24!==r&&32!==r)throw new Error(`key length must be 16, 24 or 32 bytes, got: ${r} bytes`);const i=b(e),s=new Uint8Array(r),o=new Uint8Array(16),a=(0,n.u32)(t);let l=0,c=a[0],u=a[1],d=a[2],h=0;for(const e of[o,s].map(n.u32)){const t=(0,n.u32)(e);for(let e=0;e<t.length;e+=2){const{s0:r,s1:n}=S(i,l,c,u,d);t[e+0]=r,t[e+1]=n,l=++h}}return i.fill(0),{authKey:o,encKey:b(s)}}function d(e,s,o){const a=M(i.polyval,!0,s,o,r);for(let e=0;e<12;e++)a[e]^=t[e];a[15]&=127;const l=(0,n.u32)(a);let c=l[0],u=l[1],d=l[2],h=l[3];return({s0:c,s1:u,s2:d,s3:h}=S(e,c,u,d,h)),l[0]=c,l[1]=u,l[2]=d,l[3]=h,a}function h(e,t,r){let n=t.slice();return n[15]|=128,A(e,!0,n,r)}return(0,s.bytes)(t),l(t.length),r&&((0,s.bytes)(r),o(r.length)),{encrypt:e=>{(0,s.bytes)(e),a(e.length);const{encKey:t,authKey:r}=u(),n=d(t,r,e),i=new Uint8Array(e.length+16);return i.set(n,e.length),i.set(h(t,n,e)),t.fill(0),r.fill(0),i},decrypt:e=>{(0,s.bytes)(e),c(e.length);const t=e.subarray(-16),{encKey:r,authKey:i}=u(),o=h(r,t,e.subarray(0,-16)),a=d(r,i,o);if(r.fill(0),i.fill(0),!(0,n.equalBytes)(t,a))throw new Error("invalid polyval tag");return o}}})),r.unsafe={expandKeyLE:b,expandKeyDecLE:w,encrypt:S,decrypt:E,encryptBlock:function(e,t){if((0,s.bytes)(t,16),!I(e))throw new Error("_encryptBlock accepts result of expandKeyLE");const r=(0,n.u32)(t);let{s0:i,s1:o,s2:a,s3:l}=S(e,r[0],r[1],r[2],r[3]);return r[0]=i,r[1]=o,r[2]=a,r[3]=l,t},decryptBlock:function(e,t){if((0,s.bytes)(t,16),!I(e))throw new Error("_decryptBlock accepts result of expandKeyLE");const r=(0,n.u32)(t);let{s0:i,s1:o,s2:a,s3:l}=E(e,r[0],r[1],r[2],r[3]);return r[0]=i,r[1]=o,r[2]=a,r[3]=l,t},ctrCounter:j,ctr32:A}}}},{package:"@noble/ciphers",file:"node_modules/@noble/ciphers/aes.js"}],[2039,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getWebcryptoSubtle=r.randomBytes=void 0;const n="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:undefined;r.randomBytes=function(e=32){if(n&&"function"==typeof n.getRandomValues)return n.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")},r.getWebcryptoSubtle=function(){if(n&&"object"==typeof n.subtle&&null!=n.subtle)return n.subtle;throw new Error("crypto.subtle must be defined")}}}},{package:"@noble/ciphers",file:"node_modules/@noble/ciphers/crypto.js"}],[204,{lodash:3587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=i,function(e){var t,r;const i=(null==e||null===(t=e.AddressBookController)||void 0===t?void 0:t.addressBook)??{},s=(null==e||null===(r=e.NameController)||void 0===r||null===(r=r.names)||void 0===r?void 0:r.ethereumAddress)??{};if((0,n.isEmpty)(Object.keys(i)))return;for(const e of Object.keys(i)){const t=i[e];for(const r of Object.keys(t)){var o,a;const n=t[r],i=r.toLowerCase(),l=s[i]??{};null!==(o=(l[e]??{}).name)&&void 0!==o&&o.length||null===(a=n.name)||void 0===a||!a.length||null==i||!i.length||(s[i]=l,l[e]={name:n.name,sourceId:n.isEns?"ens":null,proposedNames:{}})}}e.NameController={...e.NameController,names:{ethereumAddress:s}}}(t.data),t},r.version=void 0;var n=e("lodash");const i=r.version=100}}},{package:"$root$",file:"app/scripts/migrations/100.ts"}],[2040,{"./_assert.js":2036},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.u64Lengths=r.setBigUint64=r.wrapCipher=r.Hash=r.equalBytes=r.checkOpts=r.concatBytes=r.toBytes=r.bytesToUtf8=r.utf8ToBytes=r.asyncLoop=r.nextTick=r.numberToBytesBE=r.bytesToNumberBE=r.hexToNumber=r.hexToBytes=r.bytesToHex=r.isLE=r.createView=r.u32=r.u16=r.u8=void 0;
/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */
const n=e("./_assert.js");r.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);r.u16=e=>new Uint16Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/2));r.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));if(r.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),r.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!r.isLE)throw new Error("Non little-endian hardware is not supported");const i=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function s(e){(0,n.bytes)(e);let t="";for(let r=0;r<e.length;r++)t+=i[e[r]];return t}r.bytesToHex=s;const o={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function a(e){return e>=o._0&&e<=o._9?e-o._0:e>=o._A&&e<=o._F?e-(o._A-10):e>=o._a&&e<=o._f?e-(o._a-10):void 0}function l(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){const r=a(e.charCodeAt(i)),s=a(e.charCodeAt(i+1));if(r===undefined||s===undefined){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}n[t]=16*r+s}return n}function c(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}r.hexToBytes=l,r.hexToNumber=c,r.bytesToNumberBE=function(e){return c(s(e))},r.numberToBytesBE=function(e,t){return l(e.toString(16).padStart(2*t,"0"))};function u(e){if("string"!=typeof e)throw new Error("string expected, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}r.nextTick=async()=>{},r.asyncLoop=async function(e,t,n){let i=Date.now();for(let s=0;s<e;s++){n(s);const e=Date.now()-i;e>=0&&e<t||(await(0,r.nextTick)(),i+=e)}},r.utf8ToBytes=u,r.bytesToUtf8=function(e){return(new TextDecoder).decode(e)},r.toBytes=function(e){if("string"==typeof e)e=u(e);else{if(!(0,n.isBytes)(e))throw new Error("Uint8Array expected, got "+typeof e);e=e.slice()}return e},r.concatBytes=function(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];(0,n.bytes)(i),t+=i.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r},r.checkOpts=function(e,t){if(null==t||"object"!=typeof t)throw new Error("options must be defined");return Object.assign(e,t)},r.equalBytes=function(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r};r.Hash=class{};function d(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),l=n?4:0,c=n?0:4;e.setUint32(t+l,o,n),e.setUint32(t+c,a,n)}r.wrapCipher=(e,t)=>(Object.assign(t,e),t),r.setBigUint64=d,r.u64Lengths=function(e,t){const n=new Uint8Array(16),i=(0,r.createView)(n);return d(i,0,BigInt(t?t.length:0),!0),d(i,8,BigInt(e.length),!0),n}}}},{package:"@noble/ciphers",file:"node_modules/@noble/ciphers/utils.js"}],[2041,{"./_assert.js":2036,"./utils.js":2040,"@noble/ciphers/crypto":2039},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.gcm=r.ctr=r.cbc=r.utils=r.managedNonce=r.getWebcryptoSubtle=r.randomBytes=void 0;const n=e("@noble/ciphers/crypto");Object.defineProperty(r,"randomBytes",{enumerable:!0,get:function(){return n.randomBytes}}),Object.defineProperty(r,"getWebcryptoSubtle",{enumerable:!0,get:function(){return n.getWebcryptoSubtle}});const i=e("./utils.js"),s=e("./_assert.js");r.managedNonce=function(e){return(0,s.number)(e.nonceLength),(t,...r)=>({encrypt:(s,...o)=>{const{nonceLength:a}=e,l=(0,n.randomBytes)(a),c=e(t,l,...r).encrypt(s,...o),u=(0,i.concatBytes)(l,c);return c.fill(0),u},decrypt:(n,...i)=>{const{nonceLength:s}=e,o=n.subarray(0,s),a=n.subarray(s);return e(t,o,...r).decrypt(a,...i)}})},r.utils={async encrypt(e,t,r,i){const s=(0,n.getWebcryptoSubtle)(),o=await s.importKey("raw",e,t,!0,["encrypt"]),a=await s.encrypt(r,o,i);return new Uint8Array(a)},async decrypt(e,t,r,i){const s=(0,n.getWebcryptoSubtle)(),o=await s.importKey("raw",e,t,!0,["decrypt"]),a=await s.decrypt(r,o,i);return new Uint8Array(a)}};const o={CBC:"AES-CBC",CTR:"AES-CTR",GCM:"AES-GCM"};function a(e){return(t,n,i)=>{(0,s.bytes)(t),(0,s.bytes)(n);const a={name:e,length:8*t.length},l=function(e,t,r){if(e===o.CBC)return{name:o.CBC,iv:t};if(e===o.CTR)return{name:o.CTR,counter:t,length:64};if(e===o.GCM)return r?{name:o.GCM,iv:t,additionalData:r}:{name:o.GCM,iv:t};throw new Error("unknown aes block mode")}(e,n,i);return{encrypt:e=>((0,s.bytes)(e),r.utils.encrypt(t,a,l,e)),decrypt:e=>((0,s.bytes)(e),r.utils.decrypt(t,a,l,e))}}}r.cbc=a(o.CBC),r.ctr=a(o.CTR),r.gcm=a(o.GCM)}}},{package:"@noble/ciphers",file:"node_modules/@noble/ciphers/webcrypto.js"}],[2042,{"./abstract/weierstrass.js":2047,"@noble/hashes/hmac":2054,"@noble/hashes/utils":2060},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createCurve=r.getHash=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const n=e("@noble/hashes/hmac"),i=e("@noble/hashes/utils"),s=e("./abstract/weierstrass.js");function o(e){return{hash:e,hmac:(t,...r)=>(0,n.hmac)(e,t,(0,i.concatBytes)(...r)),randomBytes:i.randomBytes}}r.getHash=o,r.createCurve=function(e,t){const r=t=>(0,s.weierstrass)({...e,...o(t)});return Object.freeze({...r(t),create:r})}}}},{package:"@metamask/message-signing-snap>@noble/curves",file:"node_modules/@noble/curves/_shortw_utils.js"}],[2043,{"./modular.js":2045,"./utils.js":2046},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.validateBasic=r.wNAF=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const n=e("./modular.js"),i=e("./utils.js"),s=BigInt(0),o=BigInt(1);r.wNAF=function(e,t){const r=(e,t)=>{const r=t.negate();return e?r:t},n=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:r,unsafeLadder(t,r){let n=e.ZERO,i=t;for(;r>s;)r&o&&(n=n.add(i)),i=i.double(),r>>=o;return n},precomputeWindow(e,t){const{windows:r,windowSize:i}=n(t),s=[];let o=e,a=o;for(let e=0;e<r;e++){a=o,s.push(a);for(let e=1;e<i;e++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(t,i,s){const{windows:a,windowSize:l}=n(t);let c=e.ZERO,u=e.BASE;const d=BigInt(2**t-1),h=2**t,f=BigInt(t);for(let e=0;e<a;e++){const t=e*l;let n=Number(s&d);s>>=f,n>l&&(n-=h,s+=o);const a=t,p=t+Math.abs(n)-1,m=e%2!=0,g=n<0;0===n?u=u.add(r(m,i[a])):c=c.add(r(g,i[p]))}return{p:c,f:u}},wNAFCached(e,t,r,n){const i=e._WINDOW_SIZE||1;let s=t.get(e);return s||(s=this.precomputeWindow(e,i),1!==i&&t.set(e,n(s))),this.wNAF(i,s,r)}}},r.validateBasic=function(e){return(0,n.validateField)(e.Fp),(0,i.validateObject)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,n.nLength)(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}}}},{package:"@metamask/message-signing-snap>@noble/curves",file:"node_modules/@noble/curves/abstract/curve.js"}],[2044,{"./modular.js":2045,"./utils.js":2046},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createHasher=r.isogenyMap=r.hash_to_field=r.expand_message_xof=r.expand_message_xmd=void 0;const n=e("./modular.js"),i=e("./utils.js"),s=i.bytesToNumberBE;function o(e,t){if(e<0||e>=1<<8*t)throw new Error(`bad I2OSP call: value=${e} length=${t}`);const r=Array.from({length:t}).fill(0);for(let n=t-1;n>=0;n--)r[n]=255&e,e>>>=8;return new Uint8Array(r)}function a(e,t){const r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]^t[n];return r}function l(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function c(e,t,r,n){(0,i.abytes)(e),(0,i.abytes)(t),l(r),t.length>255&&(t=n((0,i.concatBytes)((0,i.utf8ToBytes)("H2C-OVERSIZE-DST-"),t)));const{outputLen:s,blockLen:c}=n,u=Math.ceil(r/s);if(u>255)throw new Error("Invalid xmd length");const d=(0,i.concatBytes)(t,o(t.length,1)),h=o(0,c),f=o(r,2),p=new Array(u),m=n((0,i.concatBytes)(h,e,f,o(0,1),d));p[0]=n((0,i.concatBytes)(m,o(1,1),d));for(let e=1;e<=u;e++){const t=[a(m,p[e-1]),o(e+1,1),d];p[e]=n((0,i.concatBytes)(...t))}return(0,i.concatBytes)(...p).slice(0,r)}function u(e,t,r,n,s){if((0,i.abytes)(e),(0,i.abytes)(t),l(r),t.length>255){const e=Math.ceil(2*n/8);t=s.create({dkLen:e}).update((0,i.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()}if(r>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return s.create({dkLen:r}).update(e).update(o(r,2)).update(t).update(o(t.length,1)).digest()}function d(e,t,r){(0,i.validateObject)(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:o,k:a,m:d,hash:h,expand:f,DST:p}=r;(0,i.abytes)(e),l(t);const m="string"==typeof p?(0,i.utf8ToBytes)(p):p,g=o.toString(2).length,v=Math.ceil((g+a)/8),y=t*d*v;let b;if("xmd"===f)b=c(e,m,y,h);else if("xof"===f)b=u(e,m,y,a,h);else{if("_internal_pass"!==f)throw new Error('expand must be "xmd" or "xof"');b=e}const w=new Array(t);for(let e=0;e<t;e++){const t=new Array(d);for(let r=0;r<d;r++){const i=v*(r+e*d),a=b.subarray(i,i+v);t[r]=(0,n.mod)(s(a),o)}w[e]=t}return w}r.expand_message_xmd=c,r.expand_message_xof=u,r.hash_to_field=d,r.isogenyMap=function(e,t){const r=t.map((e=>Array.from(e).reverse()));return(t,n)=>{const[i,s,o,a]=r.map((r=>r.reduce(((r,n)=>e.add(e.mul(r,t),n)))));return t=e.div(i,s),n=e.mul(n,e.div(o,a)),{x:t,y:n}}},r.createHasher=function(e,t,r){if("function"!=typeof t)throw new Error("mapToCurve() must be defined");return{hashToCurve(n,i){const s=d(n,2,{...r,DST:r.DST,...i}),o=e.fromAffine(t(s[0])),a=e.fromAffine(t(s[1])),l=o.add(a).clearCofactor();return l.assertValidity(),l},encodeToCurve(n,i){const s=d(n,1,{...r,DST:r.encodeDST,...i}),o=e.fromAffine(t(s[0])).clearCofactor();return o.assertValidity(),o}}}}}},{package:"@metamask/message-signing-snap>@noble/curves",file:"node_modules/@noble/curves/abstract/hash-to-curve.js"}],[2045,{"./utils.js":2046},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.mapHashToField=r.getMinHashLength=r.getFieldBytesLength=r.hashToPrivateScalar=r.FpSqrtEven=r.FpSqrtOdd=r.Field=r.nLength=r.FpIsSquare=r.FpDiv=r.FpInvertBatch=r.FpPow=r.validateField=r.isNegativeLE=r.FpSqrt=r.tonelliShanks=r.invert=r.pow2=r.pow=r.mod=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const n=e("./utils.js"),i=BigInt(0),s=BigInt(1),o=BigInt(2),a=BigInt(3),l=BigInt(4),c=BigInt(5),u=BigInt(8);BigInt(9),BigInt(16);function d(e,t){const r=e%t;return r>=i?r:t+r}function h(e,t,r){if(r<=i||t<i)throw new Error("Expected power/modulo > 0");if(r===s)return i;let n=s;for(;t>i;)t&s&&(n=n*e%r),e=e*e%r,t>>=s;return n}function f(e,t){if(e===i||t<=i)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=d(e,t),n=t,o=i,a=s,l=s,c=i;for(;r!==i;){const e=n/r,t=n%r,i=o-l*e,s=a-c*e;n=r,r=t,o=l,a=c,l=i,c=s}if(n!==s)throw new Error("invert: does not exist");return d(o,t)}function p(e){const t=(e-s)/o;let r,n,a;for(r=e-s,n=0;r%o===i;r/=o,n++);for(a=o;a<e&&h(a,t,e)!==e-s;a++);if(1===n){const t=(e+s)/l;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}const c=(r+s)/o;return function(e,i){if(e.pow(i,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let o=n,l=e.pow(e.mul(e.ONE,a),r),u=e.pow(i,c),d=e.pow(i,r);for(;!e.eql(d,e.ONE);){if(e.eql(d,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(d);t<o&&!e.eql(r,e.ONE);t++)r=e.sqr(r);const r=e.pow(l,s<<BigInt(o-t-1));l=e.sqr(r),u=e.mul(u,r),d=e.mul(d,l),o=t}return u}}function m(e){if(e%l===a){const t=(e+s)/l;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}if(e%u===c){const t=(e-c)/u;return function(e,r){const n=e.mul(r,o),i=e.pow(n,t),s=e.mul(r,i),a=e.mul(e.mul(s,o),i),l=e.mul(s,e.sub(a,e.ONE));if(!e.eql(e.sqr(l),r))throw new Error("Cannot find square root");return l}}return p(e)}r.mod=d,r.pow=h,r.pow2=function(e,t,r){let n=e;for(;t-- >i;)n*=n,n%=r;return n},r.invert=f,r.tonelliShanks=p,r.FpSqrt=m;r.isNegativeLE=(e,t)=>(d(e,t)&s)===s;const g=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function v(e,t,r){if(r<i)throw new Error("Expected power > 0");if(r===i)return e.ONE;if(r===s)return t;let n=e.ONE,o=t;for(;r>i;)r&s&&(n=e.mul(n,o)),o=e.sqr(o),r>>=s;return n}function y(e,t){const r=new Array(t.length),n=t.reduce(((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n))),e.ONE),i=e.inv(n);return t.reduceRight(((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n))),i),r}function b(e,t){const r=t!==undefined?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function w(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function _(e){const t=w(e);return t+Math.ceil(t/2)}r.validateField=function(e){const t=g.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,n.validateObject)(e,t)},r.FpPow=v,r.FpInvertBatch=y,r.FpDiv=function(e,t,r){return e.mul(t,"bigint"==typeof r?f(r,e.ORDER):e.inv(r))},r.FpIsSquare=function(e){const t=(e.ORDER-s)/o;return r=>{const n=e.pow(r,t);return e.eql(n,e.ZERO)||e.eql(n,e.ONE)}},r.nLength=b,r.Field=function(e,t,r=!1,o={}){if(e<=i)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:a,nByteLength:l}=b(e,t);if(l>2048)throw new Error("Field lengths over 2048 bytes are not supported");const c=m(e),u=Object.freeze({ORDER:e,BITS:a,BYTES:l,MASK:(0,n.bitMask)(a),ZERO:i,ONE:s,create:t=>d(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return i<=t&&t<e},is0:e=>e===i,isOdd:e=>(e&s)===s,neg:t=>d(-t,e),eql:(e,t)=>e===t,sqr:t=>d(t*t,e),add:(t,r)=>d(t+r,e),sub:(t,r)=>d(t-r,e),mul:(t,r)=>d(t*r,e),pow:(e,t)=>v(u,e,t),div:(t,r)=>d(t*f(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>f(t,e),sqrt:o.sqrt||(e=>c(u,e)),invertBatch:e=>y(u,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?(0,n.numberToBytesLE)(e,l):(0,n.numberToBytesBE)(e,l),fromBytes:e=>{if(e.length!==l)throw new Error(`Fp.fromBytes: expected ${l}, got ${e.length}`);return r?(0,n.bytesToNumberLE)(e):(0,n.bytesToNumberBE)(e)}});return Object.freeze(u)},r.FpSqrtOdd=function(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const r=e.sqrt(t);return e.isOdd(r)?r:e.neg(r)},r.FpSqrtEven=function(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const r=e.sqrt(t);return e.isOdd(r)?e.neg(r):r},r.hashToPrivateScalar=function(e,t,r=!1){const i=(e=(0,n.ensureBytes)("privateHash",e)).length,o=b(t).nByteLength+8;if(o<24||i<o||i>1024)throw new Error(`hashToPrivateScalar: expected ${o}-1024 bytes of input, got ${i}`);return d(r?(0,n.bytesToNumberLE)(e):(0,n.bytesToNumberBE)(e),t-s)+s},r.getFieldBytesLength=w,r.getMinHashLength=_,r.mapHashToField=function(e,t,r=!1){const i=e.length,o=w(t),a=_(t);if(i<16||i<a||i>1024)throw new Error(`expected ${a}-1024 bytes of input, got ${i}`);const l=d(r?(0,n.bytesToNumberBE)(e):(0,n.bytesToNumberLE)(e),t-s)+s;return r?(0,n.numberToBytesLE)(l,o):(0,n.numberToBytesBE)(l,o)}}}},{package:"@metamask/message-signing-snap>@noble/curves",file:"node_modules/@noble/curves/abstract/modular.js"}],[2046,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.validateObject=r.createHmacDrbg=r.bitMask=r.bitSet=r.bitGet=r.bitLen=r.utf8ToBytes=r.equalBytes=r.concatBytes=r.ensureBytes=r.numberToVarBytesBE=r.numberToBytesLE=r.numberToBytesBE=r.bytesToNumberLE=r.bytesToNumberBE=r.hexToBytes=r.hexToNumber=r.numberToHexUnpadded=r.bytesToHex=r.abytes=r.isBytes=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const n=BigInt(0),i=BigInt(1),s=BigInt(2);function o(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function a(e){if(!o(e))throw new Error("Uint8Array expected")}r.isBytes=o,r.abytes=a;const l=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function c(e){a(e);let t="";for(let r=0;r<e.length;r++)t+=l[e[r]];return t}function u(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function d(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}r.bytesToHex=c,r.numberToHexUnpadded=u,r.hexToNumber=d;const h={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function f(e){return e>=h._0&&e<=h._9?e-h._0:e>=h._A&&e<=h._F?e-(h._A-10):e>=h._a&&e<=h._f?e-(h._a-10):void 0}function p(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){const r=f(e.charCodeAt(i)),s=f(e.charCodeAt(i+1));if(r===undefined||s===undefined){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}n[t]=16*r+s}return n}function m(e,t){return p(e.toString(16).padStart(2*t,"0"))}function g(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];a(n),t+=n.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}r.hexToBytes=p,r.bytesToNumberBE=function(e){return d(c(e))},r.bytesToNumberLE=function(e){return a(e),d(c(Uint8Array.from(e).reverse()))},r.numberToBytesBE=m,r.numberToBytesLE=function(e,t){return m(e,t).reverse()},r.numberToVarBytesBE=function(e){return p(u(e))},r.ensureBytes=function(e,t,r){let n;if("string"==typeof t)try{n=p(t)}catch(r){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${r}`)}else{if(!o(t))throw new Error(`${e} must be hex string or Uint8Array`);n=Uint8Array.from(t)}const i=n.length;if("number"==typeof r&&i!==r)throw new Error(`${e} expected ${r} bytes, got ${i}`);return n},r.concatBytes=g,r.equalBytes=function(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r},r.utf8ToBytes=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))},r.bitLen=function(e){let t;for(t=0;e>n;e>>=i,t+=1);return t},r.bitGet=function(e,t){return e>>BigInt(t)&i},r.bitSet=function(e,t,r){return e|(r?i:n)<<BigInt(t)};r.bitMask=e=>(s<<BigInt(e-1))-i;const v=e=>new Uint8Array(e),y=e=>Uint8Array.from(e);r.createHmacDrbg=function(e,t,r){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof r)throw new Error("hmacFn must be a function");let n=v(e),i=v(e),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...e)=>r(i,n,...e),l=(e=v())=>{i=a(y([0]),e),n=a(),0!==e.length&&(i=a(y([1]),e),n=a())},c=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const r=[];for(;e<t;){n=a();const t=n.slice();r.push(t),e+=n.length}return g(...r)};return(e,t)=>{o(),l(e);let r=undefined;for(;!(r=t(c()));)l();return o(),r}};const b={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||o(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};r.validateObject=function(e,t,r={}){const n=(t,r,n)=>{const i=b[r];if("function"!=typeof i)throw new Error(`Invalid validator "${r}", expected function`);const s=e[t];if(!(n&&s===undefined||i(s,e)))throw new Error(`Invalid param ${String(t)}=${s} (${typeof s}), expected ${r}`)};for(const[e,r]of Object.entries(t))n(e,r,!1);for(const[e,t]of Object.entries(r))n(e,t,!0);return e}}}},{package:"@metamask/message-signing-snap>@noble/curves",file:"node_modules/@noble/curves/abstract/utils.js"}],[2047,{"./curve.js":2043,"./modular.js":2045,"./utils.js":2046},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.mapToCurveSimpleSWU=r.SWUFpSqrtRatio=r.weierstrass=r.weierstrassPoints=r.DER=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const n=e("./modular.js"),i=e("./utils.js"),s=e("./utils.js"),o=e("./curve.js");const{bytesToNumberBE:a,hexToBytes:l}=i;r.DER={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){const{Err:t}=r.DER;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");const n=e[1],i=e.subarray(2,n+2);if(!n||i.length!==n)throw new t("Invalid signature integer: wrong length");if(128&i[0])throw new t("Invalid signature integer: negative");if(0===i[0]&&!(128&i[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:a(i),l:e.subarray(n+2)}},toSig(e){const{Err:t}=r.DER,n="string"==typeof e?l(e):e;i.abytes(n);let s=n.length;if(s<2||48!=n[0])throw new t("Invalid signature tag");if(n[1]!==s-2)throw new t("Invalid signature: incorrect length");const{d:o,l:a}=r.DER._parseInt(n.subarray(2)),{d:c,l:u}=r.DER._parseInt(a);if(u.length)throw new t("Invalid signature: left bytes after parsing");return{r:o,s:c}},hexFromSig(e){const t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,r=e=>{const t=e.toString(16);return 1&t.length?`0${t}`:t},n=t(r(e.s)),i=t(r(e.r)),s=n.length/2,o=i.length/2,a=r(s),l=r(o);return`30${r(o+s+4)}02${l}${i}02${a}${n}`}};const c=BigInt(0),u=BigInt(1),d=BigInt(2),h=BigInt(3),f=BigInt(4);function p(e){const t=function(e){const t=(0,o.validateBasic)(e);i.validateObject(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:s}=t;if(r){if(!n.eql(s,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=t,a=t.toBytes||((e,t,n)=>{const s=t.toAffine();return i.concatBytes(Uint8Array.from([4]),r.toBytes(s.x),r.toBytes(s.y))}),l=t.fromBytes||(e=>{const t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function d(e){const{a:n,b:i}=t,s=r.sqr(e),o=r.mul(s,e);return r.add(r.add(o,r.mul(e,n)),i)}if(!r.eql(r.sqr(t.Gy),d(t.Gx)))throw new Error("bad generator point: equation left != right");function f(e){return"bigint"==typeof e&&c<e&&e<t.n}function p(e){if(!f(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function m(e){const{allowedPrivateKeyLengths:r,nByteLength:o,wrapPrivateKey:a,n:l}=t;if(r&&"bigint"!=typeof e){if(i.isBytes(e)&&(e=i.bytesToHex(e)),"string"!=typeof e||!r.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*o,"0")}let c;try{c="bigint"==typeof e?e:i.bytesToNumberBE((0,s.ensureBytes)("private key",e,o))}catch(t){throw new Error(`private key must be ${o} bytes, hex or bigint, not ${typeof e}`)}return a&&(c=n.mod(c,l)),p(c),c}const g=new Map;function v(e){if(!(e instanceof y))throw new Error("ProjectivePoint expected")}class y{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw new Error("x required");if(null==t||!r.isValid(t))throw new Error("y required");if(null==n||!r.isValid(n))throw new Error("z required")}static fromAffine(e){const{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw new Error("invalid affine point");if(e instanceof y)throw new Error("projective point not allowed");const i=e=>r.eql(e,r.ZERO);return i(t)&&i(n)?y.ZERO:new y(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(y.fromAffine)}static fromHex(e){const t=y.fromAffine(l((0,s.ensureBytes)("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return y.BASE.multiply(m(e))}_setWindowSize(e){this._WINDOW_SIZE=e,g.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:e,y:n}=this.toAffine();if(!r.isValid(e)||!r.isValid(n))throw new Error("bad point: x or y not FE");const i=r.sqr(n),s=d(e);if(!r.eql(i,s))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){v(e);const{px:t,py:n,pz:i}=this,{px:s,py:o,pz:a}=e,l=r.eql(r.mul(t,a),r.mul(s,i)),c=r.eql(r.mul(n,a),r.mul(o,i));return l&&c}negate(){return new y(this.px,r.neg(this.py),this.pz)}double(){const{a:e,b:n}=t,i=r.mul(n,h),{px:s,py:o,pz:a}=this;let l=r.ZERO,c=r.ZERO,u=r.ZERO,d=r.mul(s,s),f=r.mul(o,o),p=r.mul(a,a),m=r.mul(s,o);return m=r.add(m,m),u=r.mul(s,a),u=r.add(u,u),l=r.mul(e,u),c=r.mul(i,p),c=r.add(l,c),l=r.sub(f,c),c=r.add(f,c),c=r.mul(l,c),l=r.mul(m,l),u=r.mul(i,u),p=r.mul(e,p),m=r.sub(d,p),m=r.mul(e,m),m=r.add(m,u),u=r.add(d,d),d=r.add(u,d),d=r.add(d,p),d=r.mul(d,m),c=r.add(c,d),p=r.mul(o,a),p=r.add(p,p),d=r.mul(p,m),l=r.sub(l,d),u=r.mul(p,f),u=r.add(u,u),u=r.add(u,u),new y(l,c,u)}add(e){v(e);const{px:n,py:i,pz:s}=this,{px:o,py:a,pz:l}=e;let c=r.ZERO,u=r.ZERO,d=r.ZERO;const f=t.a,p=r.mul(t.b,h);let m=r.mul(n,o),g=r.mul(i,a),b=r.mul(s,l),w=r.add(n,i),_=r.add(o,a);w=r.mul(w,_),_=r.add(m,g),w=r.sub(w,_),_=r.add(n,s);let k=r.add(o,l);return _=r.mul(_,k),k=r.add(m,b),_=r.sub(_,k),k=r.add(i,s),c=r.add(a,l),k=r.mul(k,c),c=r.add(g,b),k=r.sub(k,c),d=r.mul(f,_),c=r.mul(p,b),d=r.add(c,d),c=r.sub(g,d),d=r.add(g,d),u=r.mul(c,d),g=r.add(m,m),g=r.add(g,m),b=r.mul(f,b),_=r.mul(p,_),g=r.add(g,b),b=r.sub(m,b),b=r.mul(f,b),_=r.add(_,b),m=r.mul(g,_),u=r.add(u,m),m=r.mul(k,_),c=r.mul(w,c),c=r.sub(c,m),m=r.mul(w,g),d=r.mul(k,d),d=r.add(d,m),new y(c,u,d)}subtract(e){return this.add(e.negate())}is0(){return this.equals(y.ZERO)}wNAF(e){return w.wNAFCached(this,g,e,(e=>{const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(y.fromAffine)}))}multiplyUnsafe(e){const n=y.ZERO;if(e===c)return n;if(p(e),e===u)return this;const{endo:i}=t;if(!i)return w.unsafeLadder(this,e);let{k1neg:s,k1:o,k2neg:a,k2:l}=i.splitScalar(e),d=n,h=n,f=this;for(;o>c||l>c;)o&u&&(d=d.add(f)),l&u&&(h=h.add(f)),f=f.double(),o>>=u,l>>=u;return s&&(d=d.negate()),a&&(h=h.negate()),h=new y(r.mul(h.px,i.beta),h.py,h.pz),d.add(h)}multiply(e){p(e);let n,i,s=e;const{endo:o}=t;if(o){const{k1neg:e,k1:t,k2neg:a,k2:l}=o.splitScalar(s);let{p:c,f:u}=this.wNAF(t),{p:d,f:h}=this.wNAF(l);c=w.constTimeNegate(e,c),d=w.constTimeNegate(a,d),d=new y(r.mul(d.px,o.beta),d.py,d.pz),n=c.add(d),i=u.add(h)}else{const{p:e,f:t}=this.wNAF(s);n=e,i=t}return y.normalizeZ([n,i])[0]}multiplyAndAddUnsafe(e,t,r){const n=y.BASE,i=(e,t)=>t!==c&&t!==u&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),s=i(this,t).add(i(e,r));return s.is0()?undefined:s}toAffine(e){const{px:t,py:n,pz:i}=this,s=this.is0();null==e&&(e=s?r.ONE:r.inv(i));const o=r.mul(t,e),a=r.mul(n,e),l=r.mul(i,e);if(s)return{x:r.ZERO,y:r.ZERO};if(!r.eql(l,r.ONE))throw new Error("invZ was invalid");return{x:o,y:a}}isTorsionFree(){const{h:e,isTorsionFree:r}=t;if(e===u)return!0;if(r)return r(y,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:r}=t;return e===u?this:r?r(y,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),a(y,this,e)}toHex(e=!0){return i.bytesToHex(this.toRawBytes(e))}}y.BASE=new y(t.Gx,t.Gy,r.ONE),y.ZERO=new y(r.ZERO,r.ONE,r.ZERO);const b=t.nBitLength,w=(0,o.wNAF)(y,t.endo?Math.ceil(b/2):b);return{CURVE:t,ProjectivePoint:y,normPrivateKeyToScalar:m,weierstrassEquation:d,isWithinCurveOrder:f}}function m(e,t){const r=e.ORDER;let n=c;for(let e=r-u;e%d===c;e/=d)n+=u;const i=n,s=d<<i-u-u,o=s*d,a=(r-u)/o,l=(a-u)/d,p=o-u,m=s,g=e.pow(t,a),v=e.pow(t,(a+u)/d);let y=(t,r)=>{let n=g,s=e.pow(r,p),o=e.sqr(s);o=e.mul(o,r);let a=e.mul(t,o);a=e.pow(a,l),a=e.mul(a,s),s=e.mul(a,r),o=e.mul(a,t);let c=e.mul(o,s);a=e.pow(c,m);let h=e.eql(a,e.ONE);s=e.mul(o,v),a=e.mul(c,n),o=e.cmov(s,o,h),c=e.cmov(a,c,h);for(let t=i;t>u;t--){let r=t-d;r=d<<r-u;let i=e.pow(c,r);const a=e.eql(i,e.ONE);s=e.mul(o,n),n=e.mul(n,n),i=e.mul(c,n),o=e.cmov(s,o,a),c=e.cmov(i,c,a)}return{isValid:h,value:o}};if(e.ORDER%f===h){const r=(e.ORDER-h)/f,n=e.sqrt(e.neg(t));y=(t,i)=>{let s=e.sqr(i);const o=e.mul(t,i);s=e.mul(s,o);let a=e.pow(s,r);a=e.mul(a,o);const l=e.mul(a,n),c=e.mul(e.sqr(a),i),u=e.eql(c,t);return{isValid:u,value:e.cmov(l,a,u)}}}return y}r.weierstrassPoints=p,r.weierstrass=function(e){const t=function(e){const t=(0,o.validateBasic)(e);return i.validateObject(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:a,n:l}=t,d=a.BYTES+1,h=2*a.BYTES+1;function f(e){return n.mod(e,l)}function m(e){return n.invert(e,l)}const{ProjectivePoint:g,normPrivateKeyToScalar:v,weierstrassEquation:y,isWithinCurveOrder:b}=p({...t,toBytes(e,t,r){const n=t.toAffine(),s=a.toBytes(n.x),o=i.concatBytes;return r?o(Uint8Array.from([t.hasEvenY()?2:3]),s):o(Uint8Array.from([4]),s,a.toBytes(n.y))},fromBytes(e){const t=e.length,r=e[0],n=e.subarray(1);if(t!==d||2!==r&&3!==r){if(t===h&&4===r){return{x:a.fromBytes(n.subarray(0,a.BYTES)),y:a.fromBytes(n.subarray(a.BYTES,2*a.BYTES))}}throw new Error(`Point of length ${t} was invalid. Expected ${d} compressed bytes or ${h} uncompressed bytes`)}{const e=i.bytesToNumberBE(n);if(!(c<(s=e)&&s<a.ORDER))throw new Error("Point is not on curve");const t=y(e);let o;try{o=a.sqrt(t)}catch(e){const t=e instanceof Error?": "+e.message:"";throw new Error("Point is not on curve"+t)}return!(1&~r)!==((o&u)===u)&&(o=a.neg(o)),{x:e,y:o}}var s}}),w=e=>i.bytesToHex(i.numberToBytesBE(e,t.nByteLength));function _(e){return e>l>>u}const k=(e,t,r)=>i.bytesToNumberBE(e.slice(t,r));class S{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){const r=t.nByteLength;return e=(0,s.ensureBytes)("compactSignature",e,2*r),new S(k(e,0,r),k(e,r,2*r))}static fromDER(e){const{r:t,s:n}=r.DER.toSig((0,s.ensureBytes)("DER",e));return new S(t,n)}assertValidity(){if(!b(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!b(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new S(this.r,this.s,e)}recoverPublicKey(e){const{r:r,s:n,recovery:i}=this,o=A((0,s.ensureBytes)("msgHash",e));if(null==i||![0,1,2,3].includes(i))throw new Error("recovery id invalid");const l=2===i||3===i?r+t.n:r;if(l>=a.ORDER)throw new Error("recovery id 2 or 3 invalid");const c=1&i?"03":"02",u=g.fromHex(c+w(l)),d=m(l),h=f(-o*d),p=f(n*d),v=g.BASE.multiplyAndAddUnsafe(u,h,p);if(!v)throw new Error("point at infinify");return v.assertValidity(),v}hasHighS(){return _(this.s)}normalizeS(){return this.hasHighS()?new S(this.r,f(-this.s),this.recovery):this}toDERRawBytes(){return i.hexToBytes(this.toDERHex())}toDERHex(){return r.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return i.hexToBytes(this.toCompactHex())}toCompactHex(){return w(this.r)+w(this.s)}}const E={isValidPrivateKey(e){try{return v(e),!0}catch(e){return!1}},normPrivateKeyToScalar:v,randomPrivateKey:()=>{const e=n.getMinHashLength(t.n);return n.mapHashToField(t.randomBytes(e),t.n)},precompute:(e=8,t=g.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function T(e){const t=i.isBytes(e),r="string"==typeof e,n=(t||r)&&e.length;return t?n===d||n===h:r?n===2*d||n===2*h:e instanceof g}const j=t.bits2int||function(e){const r=i.bytesToNumberBE(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},A=t.bits2int_modN||function(e){return f(j(e))},P=i.bitMask(t.nBitLength);function C(e){if("bigint"!=typeof e)throw new Error("bigint expected");if(!(c<=e&&e<P))throw new Error(`bigint expected < 2^${t.nBitLength}`);return i.numberToBytesBE(e,t.nByteLength)}function x(e,r,n=O){if(["recovered","canonical"].some((e=>e in n)))throw new Error("sign() legacy options not supported");const{hash:o,randomBytes:l}=t;let{lowS:d,prehash:h,extraEntropy:p}=n;null==d&&(d=!0),e=(0,s.ensureBytes)("msgHash",e),h&&(e=(0,s.ensureBytes)("prehashed msgHash",o(e)));const y=A(e),w=v(r),k=[C(w),C(y)];if(null!=p&&!1!==p){const e=!0===p?l(a.BYTES):p;k.push((0,s.ensureBytes)("extraEntropy",e))}const E=i.concatBytes(...k),T=y;return{seed:E,k2sig:function(e){const t=j(e);if(!b(t))return;const r=m(t),n=g.BASE.multiply(t).toAffine(),i=f(n.x);if(i===c)return;const s=f(r*f(T+i*w));if(s===c)return;let o=(n.x===i?0:2)|Number(n.y&u),a=s;return d&&_(s)&&(a=function(e){return _(e)?f(-e):e}(s),o^=1),new S(i,a,o)}}}const O={lowS:t.lowS,prehash:!1},M={lowS:t.lowS,prehash:!1};return g.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return g.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(T(e))throw new Error("first arg must be private key");if(!T(t))throw new Error("second arg must be public key");return g.fromHex(t).multiply(v(e)).toRawBytes(r)},sign:function(e,r,n=O){const{seed:s,k2sig:o}=x(e,r,n),a=t;return i.createHmacDrbg(a.hash.outputLen,a.nByteLength,a.hmac)(s,o)},verify:function(e,n,o,a=M){const l=e;if(n=(0,s.ensureBytes)("msgHash",n),o=(0,s.ensureBytes)("publicKey",o),"strict"in a)throw new Error("options.strict was renamed to lowS");const{lowS:c,prehash:u}=a;let d,h=undefined;try{if("string"==typeof l||i.isBytes(l))try{h=S.fromDER(l)}catch(e){if(!(e instanceof r.DER.Err))throw e;h=S.fromCompact(l)}else{if("object"!=typeof l||"bigint"!=typeof l.r||"bigint"!=typeof l.s)throw new Error("PARSE");{const{r:e,s:t}=l;h=new S(e,t)}}d=g.fromHex(o)}catch(e){if("PARSE"===e.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(c&&h.hasHighS())return!1;u&&(n=t.hash(n));const{r:p,s:v}=h,y=A(n),b=m(v),w=f(y*b),_=f(p*b),k=g.BASE.multiplyAndAddUnsafe(d,w,_)?.toAffine();return!!k&&f(k.x)===p},ProjectivePoint:g,Signature:S,utils:E}},r.SWUFpSqrtRatio=m,r.mapToCurveSimpleSWU=function(e,t){if(n.validateField(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const r=m(e,t.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return n=>{let i,s,o,a,l,c,u,d;i=e.sqr(n),i=e.mul(i,t.Z),s=e.sqr(i),s=e.add(s,i),o=e.add(s,e.ONE),o=e.mul(o,t.B),a=e.cmov(t.Z,e.neg(s),!e.eql(s,e.ZERO)),a=e.mul(a,t.A),s=e.sqr(o),c=e.sqr(a),l=e.mul(c,t.A),s=e.add(s,l),s=e.mul(s,o),c=e.mul(c,a),l=e.mul(c,t.B),s=e.add(s,l),u=e.mul(i,o);const{isValid:h,value:f}=r(s,c);d=e.mul(i,n),d=e.mul(d,f),u=e.cmov(u,o,h),d=e.cmov(d,f,h);const p=e.isOdd(n)===e.isOdd(d);return d=e.cmov(e.neg(d),d,p),u=e.div(u,a),{x:u,y:d}}}}}},{package:"@metamask/message-signing-snap>@noble/curves",file:"node_modules/@noble/curves/abstract/weierstrass.js"}],[2048,{"./_shortw_utils.js":2042,"./abstract/hash-to-curve.js":2044,"./abstract/modular.js":2045,"./abstract/utils.js":2046,"./abstract/weierstrass.js":2047,"@noble/hashes/sha256":2057,"@noble/hashes/utils":2060},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.encodeToCurve=r.hashToCurve=r.schnorr=r.secp256k1=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const n=e("@noble/hashes/sha256"),i=e("@noble/hashes/utils"),s=e("./abstract/modular.js"),o=e("./abstract/weierstrass.js"),a=e("./abstract/utils.js"),l=e("./abstract/hash-to-curve.js"),c=e("./_shortw_utils.js"),u=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),d=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h=BigInt(1),f=BigInt(2),p=(e,t)=>(e+t/f)/t;function m(e){const t=u,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),a=BigInt(23),l=BigInt(44),c=BigInt(88),d=e*e*e%t,h=d*d*e%t,p=(0,s.pow2)(h,r,t)*h%t,m=(0,s.pow2)(p,r,t)*h%t,v=(0,s.pow2)(m,f,t)*d%t,y=(0,s.pow2)(v,i,t)*v%t,b=(0,s.pow2)(y,o,t)*y%t,w=(0,s.pow2)(b,l,t)*b%t,_=(0,s.pow2)(w,c,t)*w%t,k=(0,s.pow2)(_,l,t)*b%t,S=(0,s.pow2)(k,r,t)*h%t,E=(0,s.pow2)(S,a,t)*y%t,T=(0,s.pow2)(E,n,t)*d%t,j=(0,s.pow2)(T,f,t);if(!g.eql(g.sqr(j),e))throw new Error("Cannot find square root");return j}const g=(0,s.Field)(u,undefined,undefined,{sqrt:m});r.secp256k1=(0,c.createCurve)({a:BigInt(0),b:BigInt(7),Fp:g,n:d,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=d,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-h*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,a=BigInt("0x100000000000000000000000000000000"),l=p(o*e,t),c=p(-n*e,t);let u=(0,s.mod)(e-l*r-c*i,t),f=(0,s.mod)(-l*n-c*o,t);const m=u>a,g=f>a;if(m&&(u=t-u),g&&(f=t-f),u>a||f>a)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:m,k1:u,k2neg:g,k2:f}}}},n.sha256);const v=BigInt(0),y=e=>"bigint"==typeof e&&v<e&&e<u,b=e=>"bigint"==typeof e&&v<e&&e<d,w={};function _(e,...t){let r=w[e];if(r===undefined){const t=(0,n.sha256)(Uint8Array.from(e,(e=>e.charCodeAt(0))));r=(0,a.concatBytes)(t,t),w[e]=r}return(0,n.sha256)((0,a.concatBytes)(r,...t))}const k=e=>e.toRawBytes(!0).slice(1),S=e=>(0,a.numberToBytesBE)(e,32),E=e=>(0,s.mod)(e,u),T=e=>(0,s.mod)(e,d),j=r.secp256k1.ProjectivePoint,A=(e,t,r)=>j.BASE.multiplyAndAddUnsafe(e,t,r);function P(e){let t=r.secp256k1.utils.normPrivateKeyToScalar(e),n=j.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:T(-t),bytes:k(n)}}function C(e){if(!y(e))throw new Error("bad x: need 0 < x < p");const t=E(e*e);let r=m(E(t*e+BigInt(7)));r%f!==v&&(r=E(-r));const n=new j(e,r,h);return n.assertValidity(),n}function x(...e){return T((0,a.bytesToNumberBE)(_("BIP0340/challenge",...e)))}function O(e){return P(e).bytes}function M(e,t,r=(0,i.randomBytes)(32)){const n=(0,a.ensureBytes)("message",e),{bytes:s,scalar:o}=P(t),l=(0,a.ensureBytes)("auxRand",r,32),c=S(o^(0,a.bytesToNumberBE)(_("BIP0340/aux",l))),u=_("BIP0340/nonce",c,s,n),d=T((0,a.bytesToNumberBE)(u));if(d===v)throw new Error("sign failed: k is zero");const{bytes:h,scalar:f}=P(d),p=x(h,s,n),m=new Uint8Array(64);if(m.set(h,0),m.set(S(T(f+p*o)),32),!B(m,n,s))throw new Error("sign: Invalid signature produced");return m}function B(e,t,r){const n=(0,a.ensureBytes)("signature",e,64),i=(0,a.ensureBytes)("message",t),s=(0,a.ensureBytes)("publicKey",r,32);try{const e=C((0,a.bytesToNumberBE)(s)),t=(0,a.bytesToNumberBE)(n.subarray(0,32));if(!y(t))return!1;const r=(0,a.bytesToNumberBE)(n.subarray(32,64));if(!b(r))return!1;const o=x(S(t),k(e),i),l=A(e,r,T(-o));return!(!l||!l.hasEvenY()||l.toAffine().x!==t)}catch(e){return!1}}r.schnorr={getPublicKey:O,sign:M,verify:B,utils:{randomPrivateKey:r.secp256k1.utils.randomPrivateKey,lift_x:C,pointToBytes:k,numberToBytesBE:a.numberToBytesBE,bytesToNumberBE:a.bytesToNumberBE,taggedHash:_,mod:s.mod}};const I=(()=>(0,l.isogenyMap)(g,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map((e=>e.map((e=>BigInt(e)))))))(),R=(()=>(0,o.mapToCurveSimpleSWU)(g,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:g.create(BigInt("-11"))}))(),N=(()=>(0,l.createHasher)(r.secp256k1.ProjectivePoint,(e=>{const{x:t,y:r}=R(g.create(e[0]));return I(t,r)}),{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:g.ORDER,m:1,k:128,expand:"xmd",hash:n.sha256}))();r.hashToCurve=N.hashToCurve,r.encodeToCurve=N.encodeToCurve}}},{package:"@metamask/message-signing-snap>@noble/curves",file:"node_modules/@noble/curves/secp256k1.js"}],[205,{"@metamask/utils":2021,lodash:3587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=s,function(e){if((0,n.hasProperty)(e,"NetworkController")&&(0,n.isObject)(e.NetworkController)&&(0,n.hasProperty)(e.NetworkController,"networkId")){const t=e.NetworkController;return delete t.networkId,{...e,NetworkController:t}}var t,r;(0,n.isObject)(e.NetworkController)||null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController))}(t.data),t},r.version=void 0;var n=e("@metamask/utils"),i=e("lodash");const s=r.version=101}}},{package:"$root$",file:"app/scripts/migrations/101.ts"}],[2055,{"./_assert.js":2050,"./hmac.js":2054,"./utils.js":2060},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.pbkdf2Async=r.pbkdf2=void 0;const n=e("./_assert.js"),i=e("./hmac.js"),s=e("./utils.js");function o(e,t,r,o){(0,n.hash)(e);const a=(0,s.checkOpts)({dkLen:32,asyncTick:10},o),{c:l,dkLen:c,asyncTick:u}=a;if((0,n.number)(l),(0,n.number)(c),(0,n.number)(u),l<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const d=(0,s.toBytes)(t),h=(0,s.toBytes)(r),f=new Uint8Array(c),p=i.hmac.create(e,d),m=p._cloneInto().update(h);return{c:l,dkLen:c,asyncTick:u,DK:f,PRF:p,PRFSalt:m}}function a(e,t,r,n,i){return e.destroy(),t.destroy(),n&&n.destroy(),i.fill(0),r}r.pbkdf2=function(e,t,r,n){const{c:i,dkLen:l,DK:c,PRF:u,PRFSalt:d}=o(e,t,r,n);let h;const f=new Uint8Array(4),p=(0,s.createView)(f),m=new Uint8Array(u.outputLen);for(let e=1,t=0;t<l;e++,t+=u.outputLen){const r=c.subarray(t,t+u.outputLen);p.setInt32(0,e,!1),(h=d._cloneInto(h)).update(f).digestInto(m),r.set(m.subarray(0,r.length));for(let e=1;e<i;e++){u._cloneInto(h).update(m).digestInto(m);for(let e=0;e<r.length;e++)r[e]^=m[e]}}return a(u,d,c,h,m)},r.pbkdf2Async=async function(e,t,r,n){const{c:i,dkLen:l,asyncTick:c,DK:u,PRF:d,PRFSalt:h}=o(e,t,r,n);let f;const p=new Uint8Array(4),m=(0,s.createView)(p),g=new Uint8Array(d.outputLen);for(let e=1,t=0;t<l;e++,t+=d.outputLen){const r=u.subarray(t,t+d.outputLen);m.setInt32(0,e,!1),(f=h._cloneInto(f)).update(p).digestInto(g),r.set(g.subarray(0,r.length)),await(0,s.asyncLoop)(i-1,c,(()=>{d._cloneInto(f).update(g).digestInto(g);for(let e=0;e<r.length;e++)r[e]^=g[e]}))}return a(d,h,u,f,g)}}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/pbkdf2.js"}],[206,{lodash:3587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=i,function(e){const t=(null==e?void 0:e.TransactionController)||{},r=(null==t?void 0:t.transactions)||{};if((0,n.isEmpty)(r))return;const i=Object.keys(r).reduce(((e,t)=>{const i=(0,n.cloneDeep)(r[t]);return null!=i&&i.err&&(i.error=i.err,delete i.err),{...e,[t]:i}}),{});e.TransactionController={...t,transactions:i}}(t.data),t},r.version=void 0;var n=e("lodash");const i=r.version=102}}},{package:"$root$",file:"app/scripts/migrations/102.ts"}],[207,{"../../../shared/constants/hardware-wallets":4298,"@metamask/utils":2021,lodash:3587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=o,t.data=function(e){if((0,n.hasProperty)(e,"PreferencesController")&&(0,n.isObject)(e.PreferencesController)&&window.navigator.userAgent.includes("Chrome")){const t=e.PreferencesController;return t.ledgerTransportType=s.LedgerTransportTypes.webhid,{...e,PreferencesController:t}}return e}(t.data),t},r.version=void 0;var n=e("@metamask/utils"),i=e("lodash"),s=e("../../../shared/constants/hardware-wallets");const o=r.version=103}}},{package:"$root$",file:"app/scripts/migrations/103.ts"}],[2078,{"@noble/curves/abstract/modular":2082,"@noble/curves/secp256k1":2085,"@noble/hashes/_assert":2086,"@noble/hashes/hmac":2090,"@noble/hashes/ripemd160":2091,"@noble/hashes/sha256":2092,"@noble/hashes/sha512":2093,"@noble/hashes/utils":2094,"@scure/base":2077},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.HDKey=r.HARDENED_OFFSET=void 0;
/*! scure-bip32 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */
const n=e("@noble/hashes/hmac"),i=e("@noble/hashes/ripemd160"),s=e("@noble/hashes/sha256"),o=e("@noble/hashes/sha512"),a=e("@noble/hashes/_assert"),l=e("@noble/hashes/utils"),c=e("@noble/curves/secp256k1"),u=e("@noble/curves/abstract/modular"),d=e("@scure/base"),h=c.secp256k1.ProjectivePoint,f=(0,d.createBase58check)(s.sha256);function p(e){return BigInt(`0x${(0,l.bytesToHex)(e)}`)}const m=(0,l.utf8ToBytes)("Bitcoin seed"),g={private:76066276,public:76067358};r.HARDENED_OFFSET=2147483648;const v=e=>{if(!Number.isSafeInteger(e)||e<0||e>2**32-1)throw new Error(`Invalid number=${e}. Should be from 0 to 2 ** 32 - 1`);const t=new Uint8Array(4);return(0,l.createView)(t).setUint32(0,e,!1),t};class y{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return e=this.pubHash,(0,l.createView)(e).getUint32(0,!1);var e}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const e=this.privateKey;if(!e)throw new Error("No private key");return f.encode(this.serialize(this.versions.private,(0,l.concatBytes)(new Uint8Array([0]),e)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return f.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(e,t=g){if((0,a.bytes)(e),8*e.length<128||8*e.length>512)throw new Error(`HDKey: wrong seed length=${e.length}. Should be between 128 and 512 bits; 256 bits is advised)`);const r=(0,n.hmac)(o.sha512,m,e);return new y({versions:t,chainCode:r.slice(32),privateKey:r.slice(0,32)})}static fromExtendedKey(e,t=g){const r=f.decode(e),n=(0,l.createView)(r),i=n.getUint32(0,!1),s={versions:t,depth:r[4],parentFingerprint:n.getUint32(5,!1),index:n.getUint32(9,!1),chainCode:r.slice(13,45)},o=r.slice(45),a=0===o[0];if(i!==t[a?"private":"public"])throw new Error("Version mismatch");return new y(a?{...s,privateKey:o.slice(1)}:{...s,publicKey:o})}static fromJSON(e){return y.fromExtendedKey(e.xpriv)}constructor(e){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!e||"object"!=typeof e)throw new Error("HDKey.constructor must not be called directly");if(this.versions=e.versions||g,this.depth=e.depth||0,this.chainCode=e.chainCode,this.index=e.index||0,this.parentFingerprint=e.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(e.publicKey&&e.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(e.privateKey){if(!c.secp256k1.utils.isValidPrivateKey(e.privateKey))throw new Error("Invalid private key");this.privKey="bigint"==typeof e.privateKey?e.privateKey:p(e.privateKey),this.privKeyBytes=(t=this.privKey,(0,l.hexToBytes)(t.toString(16).padStart(64,"0"))),this.pubKey=c.secp256k1.getPublicKey(e.privateKey,!0)}else{if(!e.publicKey)throw new Error("HDKey: no public or private key provided");this.pubKey=h.fromHex(e.publicKey).toRawBytes(!0)}var t,r;this.pubHash=(r=this.pubKey,(0,i.ripemd160)((0,s.sha256)(r)))}derive(e){if(!/^[mM]'?/.test(e))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(e))return this;const t=e.replace(/^[mM]'?\//,"").split("/");let n=this;for(const e of t){const t=/^(\d+)('?)$/.exec(e),i=t&&t[1];if(!t||3!==t.length||"string"!=typeof i)throw new Error(`Invalid child index: ${e}`);let s=+i;if(!Number.isSafeInteger(s)||s>=r.HARDENED_OFFSET)throw new Error("Invalid index");"'"===t[2]&&(s+=r.HARDENED_OFFSET),n=n.deriveChild(s)}return n}deriveChild(e){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let t=v(e);if(e>=r.HARDENED_OFFSET){const e=this.privateKey;if(!e)throw new Error("Could not derive hardened child key");t=(0,l.concatBytes)(new Uint8Array([0]),e,t)}else t=(0,l.concatBytes)(this.pubKey,t);const i=(0,n.hmac)(o.sha512,this.chainCode,t),s=p(i.slice(0,32)),a=i.slice(32);if(!c.secp256k1.utils.isValidPrivateKey(s))throw new Error("Tweak bigger than curve order");const d={versions:this.versions,chainCode:a,depth:this.depth+1,parentFingerprint:this.fingerprint,index:e};try{if(this.privateKey){const e=(0,u.mod)(this.privKey+s,c.secp256k1.CURVE.n);if(!c.secp256k1.utils.isValidPrivateKey(e))throw new Error("The tweak was out of range or the resulted private key is invalid");d.privateKey=e}else{const e=h.fromHex(this.pubKey).add(h.fromPrivateKey(s));if(e.equals(h.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");d.publicKey=e.toRawBytes(!0)}return new y(d)}catch(t){return this.deriveChild(e+1)}}sign(e){if(!this.privateKey)throw new Error("No privateKey set!");return(0,a.bytes)(e,32),c.secp256k1.sign(e,this.privKey).toCompactRawBytes()}verify(e,t){if((0,a.bytes)(e,32),(0,a.bytes)(t,64),!this.publicKey)throw new Error("No publicKey set!");let r;try{r=c.secp256k1.Signature.fromCompact(t)}catch(e){return!1}return c.secp256k1.verify(r,e,this.publicKey)}wipePrivateData(){return this.privKey=undefined,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=undefined),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(e,t){if(!this.chainCode)throw new Error("No chainCode set");return(0,a.bytes)(t,33),(0,l.concatBytes)(v(e),new Uint8Array([this.depth]),v(this.parentFingerprint),v(this.index),this.chainCode,t)}}r.HDKey=y}}},{package:"@ethereumjs/tx>ethereum-cryptography>@scure/bip32",file:"node_modules/@scure/bip32/lib/index.js"}],[2079,{"./abstract/weierstrass.js":2084,"@noble/hashes/hmac":2090,"@noble/hashes/utils":2094},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createCurve=r.getHash=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const n=e("@noble/hashes/hmac"),i=e("@noble/hashes/utils"),s=e("./abstract/weierstrass.js");function o(e){return{hash:e,hmac:(t,...r)=>(0,n.hmac)(e,t,(0,i.concatBytes)(...r)),randomBytes:i.randomBytes}}r.getHash=o,r.createCurve=function(e,t){const r=t=>(0,s.weierstrass)({...e,...o(t)});return Object.freeze({...r(t),create:r})}}}},{package:"@ethereumjs/tx>ethereum-cryptography>@scure/bip32>@noble/curves",file:"node_modules/@scure/bip32/node_modules/@noble/curves/_shortw_utils.js"}],[208,{lodash:3587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=i,function(e){const t=null==e?void 0:e.TransactionController;if(!t)return;const r=(null==t?void 0:t.transactions)||{},n=Object.values(r).sort(((e,t)=>e.time>t.time?-1:1));e.TransactionController={...t,transactions:n}}(t.data),t},r.version=void 0;var n=e("lodash");const i=r.version=104}}},{package:"$root$",file:"app/scripts/migrations/104.ts"}],[2080,{"./modular.js":2082,"./utils.js":2083},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.validateBasic=r.wNAF=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const n=e("./modular.js"),i=e("./utils.js"),s=BigInt(0),o=BigInt(1);r.wNAF=function(e,t){const r=(e,t)=>{const r=t.negate();return e?r:t},n=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:r,unsafeLadder(t,r){let n=e.ZERO,i=t;for(;r>s;)r&o&&(n=n.add(i)),i=i.double(),r>>=o;return n},precomputeWindow(e,t){const{windows:r,windowSize:i}=n(t),s=[];let o=e,a=o;for(let e=0;e<r;e++){a=o,s.push(a);for(let e=1;e<i;e++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(t,i,s){const{windows:a,windowSize:l}=n(t);let c=e.ZERO,u=e.BASE;const d=BigInt(2**t-1),h=2**t,f=BigInt(t);for(let e=0;e<a;e++){const t=e*l;let n=Number(s&d);s>>=f,n>l&&(n-=h,s+=o);const a=t,p=t+Math.abs(n)-1,m=e%2!=0,g=n<0;0===n?u=u.add(r(m,i[a])):c=c.add(r(g,i[p]))}return{p:c,f:u}},wNAFCached(e,t,r,n){const i=e._WINDOW_SIZE||1;let s=t.get(e);return s||(s=this.precomputeWindow(e,i),1!==i&&t.set(e,n(s))),this.wNAF(i,s,r)}}},r.validateBasic=function(e){return(0,n.validateField)(e.Fp),(0,i.validateObject)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,n.nLength)(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}}}},{package:"@ethereumjs/tx>ethereum-cryptography>@scure/bip32>@noble/curves",file:"node_modules/@scure/bip32/node_modules/@noble/curves/abstract/curve.js"}],[2081,{"./modular.js":2082,"./utils.js":2083},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createHasher=r.isogenyMap=r.hash_to_field=r.expand_message_xof=r.expand_message_xmd=void 0;const n=e("./modular.js"),i=e("./utils.js");const s=i.bytesToNumberBE;function o(e,t){if(e<0||e>=1<<8*t)throw new Error(`bad I2OSP call: value=${e} length=${t}`);const r=Array.from({length:t}).fill(0);for(let n=t-1;n>=0;n--)r[n]=255&e,e>>>=8;return new Uint8Array(r)}function a(e,t){const r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]^t[n];return r}function l(e){if(!(0,i.isBytes)(e))throw new Error("Uint8Array expected")}function c(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function u(e,t,r,n){l(e),l(t),c(r),t.length>255&&(t=n((0,i.concatBytes)((0,i.utf8ToBytes)("H2C-OVERSIZE-DST-"),t)));const{outputLen:s,blockLen:u}=n,d=Math.ceil(r/s);if(d>255)throw new Error("Invalid xmd length");const h=(0,i.concatBytes)(t,o(t.length,1)),f=o(0,u),p=o(r,2),m=new Array(d),g=n((0,i.concatBytes)(f,e,p,o(0,1),h));m[0]=n((0,i.concatBytes)(g,o(1,1),h));for(let e=1;e<=d;e++){const t=[a(g,m[e-1]),o(e+1,1),h];m[e]=n((0,i.concatBytes)(...t))}return(0,i.concatBytes)(...m).slice(0,r)}function d(e,t,r,n,s){if(l(e),l(t),c(r),t.length>255){const e=Math.ceil(2*n/8);t=s.create({dkLen:e}).update((0,i.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()}if(r>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return s.create({dkLen:r}).update(e).update(o(r,2)).update(t).update(o(t.length,1)).digest()}function h(e,t,r){(0,i.validateObject)(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:o,k:a,m:h,hash:f,expand:p,DST:m}=r;l(e),c(t);const g=function(e){if((0,i.isBytes)(e))return e;if("string"==typeof e)return(0,i.utf8ToBytes)(e);throw new Error("DST must be Uint8Array or string")}(m),v=o.toString(2).length,y=Math.ceil((v+a)/8),b=t*h*y;let w;if("xmd"===p)w=u(e,g,b,f);else if("xof"===p)w=d(e,g,b,a,f);else{if("_internal_pass"!==p)throw new Error('expand must be "xmd" or "xof"');w=e}const _=new Array(t);for(let e=0;e<t;e++){const t=new Array(h);for(let r=0;r<h;r++){const i=y*(r+e*h),a=w.subarray(i,i+y);t[r]=(0,n.mod)(s(a),o)}_[e]=t}return _}r.expand_message_xmd=u,r.expand_message_xof=d,r.hash_to_field=h,r.isogenyMap=function(e,t){const r=t.map((e=>Array.from(e).reverse()));return(t,n)=>{const[i,s,o,a]=r.map((r=>r.reduce(((r,n)=>e.add(e.mul(r,t),n)))));return t=e.div(i,s),n=e.mul(n,e.div(o,a)),{x:t,y:n}}},r.createHasher=function(e,t,r){if("function"!=typeof t)throw new Error("mapToCurve() must be defined");return{hashToCurve(n,i){const s=h(n,2,{...r,DST:r.DST,...i}),o=e.fromAffine(t(s[0])),a=e.fromAffine(t(s[1])),l=o.add(a).clearCofactor();return l.assertValidity(),l},encodeToCurve(n,i){const s=h(n,1,{...r,DST:r.encodeDST,...i}),o=e.fromAffine(t(s[0])).clearCofactor();return o.assertValidity(),o}}}}}},{package:"@ethereumjs/tx>ethereum-cryptography>@scure/bip32>@noble/curves",file:"node_modules/@scure/bip32/node_modules/@noble/curves/abstract/hash-to-curve.js"}],[2082,{"./utils.js":2083},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.mapHashToField=r.getMinHashLength=r.getFieldBytesLength=r.hashToPrivateScalar=r.FpSqrtEven=r.FpSqrtOdd=r.Field=r.nLength=r.FpIsSquare=r.FpDiv=r.FpInvertBatch=r.FpPow=r.validateField=r.isNegativeLE=r.FpSqrt=r.tonelliShanks=r.invert=r.pow2=r.pow=r.mod=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const n=e("./utils.js"),i=BigInt(0),s=BigInt(1),o=BigInt(2),a=BigInt(3),l=BigInt(4),c=BigInt(5),u=BigInt(8);BigInt(9),BigInt(16);function d(e,t){const r=e%t;return r>=i?r:t+r}function h(e,t,r){if(r<=i||t<i)throw new Error("Expected power/modulo > 0");if(r===s)return i;let n=s;for(;t>i;)t&s&&(n=n*e%r),e=e*e%r,t>>=s;return n}function f(e,t){if(e===i||t<=i)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=d(e,t),n=t,o=i,a=s,l=s,c=i;for(;r!==i;){const e=n/r,t=n%r,i=o-l*e,s=a-c*e;n=r,r=t,o=l,a=c,l=i,c=s}if(n!==s)throw new Error("invert: does not exist");return d(o,t)}function p(e){const t=(e-s)/o;let r,n,a;for(r=e-s,n=0;r%o===i;r/=o,n++);for(a=o;a<e&&h(a,t,e)!==e-s;a++);if(1===n){const t=(e+s)/l;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}const c=(r+s)/o;return function(e,i){if(e.pow(i,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let o=n,l=e.pow(e.mul(e.ONE,a),r),u=e.pow(i,c),d=e.pow(i,r);for(;!e.eql(d,e.ONE);){if(e.eql(d,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(d);t<o&&!e.eql(r,e.ONE);t++)r=e.sqr(r);const r=e.pow(l,s<<BigInt(o-t-1));l=e.sqr(r),u=e.mul(u,r),d=e.mul(d,l),o=t}return u}}function m(e){if(e%l===a){const t=(e+s)/l;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}if(e%u===c){const t=(e-c)/u;return function(e,r){const n=e.mul(r,o),i=e.pow(n,t),s=e.mul(r,i),a=e.mul(e.mul(s,o),i),l=e.mul(s,e.sub(a,e.ONE));if(!e.eql(e.sqr(l),r))throw new Error("Cannot find square root");return l}}return p(e)}r.mod=d,r.pow=h,r.pow2=function(e,t,r){let n=e;for(;t-- >i;)n*=n,n%=r;return n},r.invert=f,r.tonelliShanks=p,r.FpSqrt=m;r.isNegativeLE=(e,t)=>(d(e,t)&s)===s;const g=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function v(e,t,r){if(r<i)throw new Error("Expected power > 0");if(r===i)return e.ONE;if(r===s)return t;let n=e.ONE,o=t;for(;r>i;)r&s&&(n=e.mul(n,o)),o=e.sqr(o),r>>=s;return n}function y(e,t){const r=new Array(t.length),n=t.reduce(((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n))),e.ONE),i=e.inv(n);return t.reduceRight(((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n))),i),r}function b(e,t){const r=t!==undefined?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function w(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function _(e){const t=w(e);return t+Math.ceil(t/2)}r.validateField=function(e){const t=g.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,n.validateObject)(e,t)},r.FpPow=v,r.FpInvertBatch=y,r.FpDiv=function(e,t,r){return e.mul(t,"bigint"==typeof r?f(r,e.ORDER):e.inv(r))},r.FpIsSquare=function(e){const t=(e.ORDER-s)/o;return r=>{const n=e.pow(r,t);return e.eql(n,e.ZERO)||e.eql(n,e.ONE)}},r.nLength=b,r.Field=function(e,t,r=!1,o={}){if(e<=i)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:a,nByteLength:l}=b(e,t);if(l>2048)throw new Error("Field lengths over 2048 bytes are not supported");const c=m(e),u=Object.freeze({ORDER:e,BITS:a,BYTES:l,MASK:(0,n.bitMask)(a),ZERO:i,ONE:s,create:t=>d(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return i<=t&&t<e},is0:e=>e===i,isOdd:e=>(e&s)===s,neg:t=>d(-t,e),eql:(e,t)=>e===t,sqr:t=>d(t*t,e),add:(t,r)=>d(t+r,e),sub:(t,r)=>d(t-r,e),mul:(t,r)=>d(t*r,e),pow:(e,t)=>v(u,e,t),div:(t,r)=>d(t*f(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>f(t,e),sqrt:o.sqrt||(e=>c(u,e)),invertBatch:e=>y(u,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?(0,n.numberToBytesLE)(e,l):(0,n.numberToBytesBE)(e,l),fromBytes:e=>{if(e.length!==l)throw new Error(`Fp.fromBytes: expected ${l}, got ${e.length}`);return r?(0,n.bytesToNumberLE)(e):(0,n.bytesToNumberBE)(e)}});return Object.freeze(u)},r.FpSqrtOdd=function(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const r=e.sqrt(t);return e.isOdd(r)?r:e.neg(r)},r.FpSqrtEven=function(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const r=e.sqrt(t);return e.isOdd(r)?e.neg(r):r},r.hashToPrivateScalar=function(e,t,r=!1){const i=(e=(0,n.ensureBytes)("privateHash",e)).length,o=b(t).nByteLength+8;if(o<24||i<o||i>1024)throw new Error(`hashToPrivateScalar: expected ${o}-1024 bytes of input, got ${i}`);return d(r?(0,n.bytesToNumberLE)(e):(0,n.bytesToNumberBE)(e),t-s)+s},r.getFieldBytesLength=w,r.getMinHashLength=_,r.mapHashToField=function(e,t,r=!1){const i=e.length,o=w(t),a=_(t);if(i<16||i<a||i>1024)throw new Error(`expected ${a}-1024 bytes of input, got ${i}`);const l=d(r?(0,n.bytesToNumberBE)(e):(0,n.bytesToNumberLE)(e),t-s)+s;return r?(0,n.numberToBytesLE)(l,o):(0,n.numberToBytesBE)(l,o)}}}},{package:"@ethereumjs/tx>ethereum-cryptography>@scure/bip32>@noble/curves",file:"node_modules/@scure/bip32/node_modules/@noble/curves/abstract/modular.js"}],[2083,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.validateObject=r.createHmacDrbg=r.bitMask=r.bitSet=r.bitGet=r.bitLen=r.utf8ToBytes=r.equalBytes=r.concatBytes=r.ensureBytes=r.numberToVarBytesBE=r.numberToBytesLE=r.numberToBytesBE=r.bytesToNumberLE=r.bytesToNumberBE=r.hexToBytes=r.hexToNumber=r.numberToHexUnpadded=r.bytesToHex=r.isBytes=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const n=BigInt(0),i=BigInt(1),s=BigInt(2);function o(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}r.isBytes=o;const a=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function l(e){if(!o(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=a[e[r]];return t}function c(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function u(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}r.bytesToHex=l,r.numberToHexUnpadded=c,r.hexToNumber=u;const d={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function h(e){return e>=d._0&&e<=d._9?e-d._0:e>=d._A&&e<=d._F?e-(d._A-10):e>=d._a&&e<=d._f?e-(d._a-10):void 0}function f(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){const r=h(e.charCodeAt(i)),s=h(e.charCodeAt(i+1));if(r===undefined||s===undefined){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}n[t]=16*r+s}return n}function p(e,t){return f(e.toString(16).padStart(2*t,"0"))}function m(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];if(!o(n))throw new Error("Uint8Array expected");t+=n.length}let r=new Uint8Array(t),n=0;for(let t=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}r.hexToBytes=f,r.bytesToNumberBE=function(e){return u(l(e))},r.bytesToNumberLE=function(e){if(!o(e))throw new Error("Uint8Array expected");return u(l(Uint8Array.from(e).reverse()))},r.numberToBytesBE=p,r.numberToBytesLE=function(e,t){return p(e,t).reverse()},r.numberToVarBytesBE=function(e){return f(c(e))},r.ensureBytes=function(e,t,r){let n;if("string"==typeof t)try{n=f(t)}catch(r){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${r}`)}else{if(!o(t))throw new Error(`${e} must be hex string or Uint8Array`);n=Uint8Array.from(t)}const i=n.length;if("number"==typeof r&&i!==r)throw new Error(`${e} expected ${r} bytes, got ${i}`);return n},r.concatBytes=m,r.equalBytes=function(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r},r.utf8ToBytes=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))},r.bitLen=function(e){let t;for(t=0;e>n;e>>=i,t+=1);return t},r.bitGet=function(e,t){return e>>BigInt(t)&i};r.bitSet=(e,t,r)=>e|(r?i:n)<<BigInt(t);r.bitMask=e=>(s<<BigInt(e-1))-i;const g=e=>new Uint8Array(e),v=e=>Uint8Array.from(e);r.createHmacDrbg=function(e,t,r){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof r)throw new Error("hmacFn must be a function");let n=g(e),i=g(e),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...e)=>r(i,n,...e),l=(e=g())=>{i=a(v([0]),e),n=a(),0!==e.length&&(i=a(v([1]),e),n=a())},c=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const r=[];for(;e<t;){n=a();const t=n.slice();r.push(t),e+=n.length}return m(...r)};return(e,t)=>{o(),l(e);let r=undefined;for(;!(r=t(c()));)l();return o(),r}};const y={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||o(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};r.validateObject=function(e,t,r={}){const n=(t,r,n)=>{const i=y[r];if("function"!=typeof i)throw new Error(`Invalid validator "${r}", expected function`);const s=e[t];if(!(n&&s===undefined||i(s,e)))throw new Error(`Invalid param ${String(t)}=${s} (${typeof s}), expected ${r}`)};for(const[e,r]of Object.entries(t))n(e,r,!1);for(const[e,t]of Object.entries(r))n(e,t,!0);return e}}}},{package:"@ethereumjs/tx>ethereum-cryptography>@scure/bip32>@noble/curves",file:"node_modules/@scure/bip32/node_modules/@noble/curves/abstract/utils.js"}],[2084,{"./curve.js":2080,"./modular.js":2082,"./utils.js":2083},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.mapToCurveSimpleSWU=r.SWUFpSqrtRatio=r.weierstrass=r.weierstrassPoints=r.DER=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const n=e("./modular.js"),i=e("./utils.js"),s=e("./utils.js"),o=e("./curve.js");const{bytesToNumberBE:a,hexToBytes:l}=i;r.DER={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){const{Err:t}=r.DER;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");const n=e[1],i=e.subarray(2,n+2);if(!n||i.length!==n)throw new t("Invalid signature integer: wrong length");if(128&i[0])throw new t("Invalid signature integer: negative");if(0===i[0]&&!(128&i[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:a(i),l:e.subarray(n+2)}},toSig(e){const{Err:t}=r.DER,n="string"==typeof e?l(e):e;if(!i.isBytes(n))throw new Error("ui8a expected");let s=n.length;if(s<2||48!=n[0])throw new t("Invalid signature tag");if(n[1]!==s-2)throw new t("Invalid signature: incorrect length");const{d:o,l:a}=r.DER._parseInt(n.subarray(2)),{d:c,l:u}=r.DER._parseInt(a);if(u.length)throw new t("Invalid signature: left bytes after parsing");return{r:o,s:c}},hexFromSig(e){const t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,r=e=>{const t=e.toString(16);return 1&t.length?`0${t}`:t},n=t(r(e.s)),i=t(r(e.r)),s=n.length/2,o=i.length/2,a=r(s),l=r(o);return`30${r(o+s+4)}02${l}${i}02${a}${n}`}};const c=BigInt(0),u=BigInt(1),d=BigInt(2),h=BigInt(3),f=BigInt(4);function p(e){const t=function(e){const t=(0,o.validateBasic)(e);i.validateObject(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:s}=t;if(r){if(!n.eql(s,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=t,a=t.toBytes||((e,t,n)=>{const s=t.toAffine();return i.concatBytes(Uint8Array.from([4]),r.toBytes(s.x),r.toBytes(s.y))}),l=t.fromBytes||(e=>{const t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function d(e){const{a:n,b:i}=t,s=r.sqr(e),o=r.mul(s,e);return r.add(r.add(o,r.mul(e,n)),i)}if(!r.eql(r.sqr(t.Gy),d(t.Gx)))throw new Error("bad generator point: equation left != right");function f(e){return"bigint"==typeof e&&c<e&&e<t.n}function p(e){if(!f(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function m(e){const{allowedPrivateKeyLengths:r,nByteLength:o,wrapPrivateKey:a,n:l}=t;if(r&&"bigint"!=typeof e){if(i.isBytes(e)&&(e=i.bytesToHex(e)),"string"!=typeof e||!r.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*o,"0")}let c;try{c="bigint"==typeof e?e:i.bytesToNumberBE((0,s.ensureBytes)("private key",e,o))}catch(t){throw new Error(`private key must be ${o} bytes, hex or bigint, not ${typeof e}`)}return a&&(c=n.mod(c,l)),p(c),c}const g=new Map;function v(e){if(!(e instanceof y))throw new Error("ProjectivePoint expected")}class y{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw new Error("x required");if(null==t||!r.isValid(t))throw new Error("y required");if(null==n||!r.isValid(n))throw new Error("z required")}static fromAffine(e){const{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw new Error("invalid affine point");if(e instanceof y)throw new Error("projective point not allowed");const i=e=>r.eql(e,r.ZERO);return i(t)&&i(n)?y.ZERO:new y(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(y.fromAffine)}static fromHex(e){const t=y.fromAffine(l((0,s.ensureBytes)("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return y.BASE.multiply(m(e))}_setWindowSize(e){this._WINDOW_SIZE=e,g.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:e,y:n}=this.toAffine();if(!r.isValid(e)||!r.isValid(n))throw new Error("bad point: x or y not FE");const i=r.sqr(n),s=d(e);if(!r.eql(i,s))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){v(e);const{px:t,py:n,pz:i}=this,{px:s,py:o,pz:a}=e,l=r.eql(r.mul(t,a),r.mul(s,i)),c=r.eql(r.mul(n,a),r.mul(o,i));return l&&c}negate(){return new y(this.px,r.neg(this.py),this.pz)}double(){const{a:e,b:n}=t,i=r.mul(n,h),{px:s,py:o,pz:a}=this;let l=r.ZERO,c=r.ZERO,u=r.ZERO,d=r.mul(s,s),f=r.mul(o,o),p=r.mul(a,a),m=r.mul(s,o);return m=r.add(m,m),u=r.mul(s,a),u=r.add(u,u),l=r.mul(e,u),c=r.mul(i,p),c=r.add(l,c),l=r.sub(f,c),c=r.add(f,c),c=r.mul(l,c),l=r.mul(m,l),u=r.mul(i,u),p=r.mul(e,p),m=r.sub(d,p),m=r.mul(e,m),m=r.add(m,u),u=r.add(d,d),d=r.add(u,d),d=r.add(d,p),d=r.mul(d,m),c=r.add(c,d),p=r.mul(o,a),p=r.add(p,p),d=r.mul(p,m),l=r.sub(l,d),u=r.mul(p,f),u=r.add(u,u),u=r.add(u,u),new y(l,c,u)}add(e){v(e);const{px:n,py:i,pz:s}=this,{px:o,py:a,pz:l}=e;let c=r.ZERO,u=r.ZERO,d=r.ZERO;const f=t.a,p=r.mul(t.b,h);let m=r.mul(n,o),g=r.mul(i,a),b=r.mul(s,l),w=r.add(n,i),_=r.add(o,a);w=r.mul(w,_),_=r.add(m,g),w=r.sub(w,_),_=r.add(n,s);let k=r.add(o,l);return _=r.mul(_,k),k=r.add(m,b),_=r.sub(_,k),k=r.add(i,s),c=r.add(a,l),k=r.mul(k,c),c=r.add(g,b),k=r.sub(k,c),d=r.mul(f,_),c=r.mul(p,b),d=r.add(c,d),c=r.sub(g,d),d=r.add(g,d),u=r.mul(c,d),g=r.add(m,m),g=r.add(g,m),b=r.mul(f,b),_=r.mul(p,_),g=r.add(g,b),b=r.sub(m,b),b=r.mul(f,b),_=r.add(_,b),m=r.mul(g,_),u=r.add(u,m),m=r.mul(k,_),c=r.mul(w,c),c=r.sub(c,m),m=r.mul(w,g),d=r.mul(k,d),d=r.add(d,m),new y(c,u,d)}subtract(e){return this.add(e.negate())}is0(){return this.equals(y.ZERO)}wNAF(e){return w.wNAFCached(this,g,e,(e=>{const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(y.fromAffine)}))}multiplyUnsafe(e){const n=y.ZERO;if(e===c)return n;if(p(e),e===u)return this;const{endo:i}=t;if(!i)return w.unsafeLadder(this,e);let{k1neg:s,k1:o,k2neg:a,k2:l}=i.splitScalar(e),d=n,h=n,f=this;for(;o>c||l>c;)o&u&&(d=d.add(f)),l&u&&(h=h.add(f)),f=f.double(),o>>=u,l>>=u;return s&&(d=d.negate()),a&&(h=h.negate()),h=new y(r.mul(h.px,i.beta),h.py,h.pz),d.add(h)}multiply(e){p(e);let n,i,s=e;const{endo:o}=t;if(o){const{k1neg:e,k1:t,k2neg:a,k2:l}=o.splitScalar(s);let{p:c,f:u}=this.wNAF(t),{p:d,f:h}=this.wNAF(l);c=w.constTimeNegate(e,c),d=w.constTimeNegate(a,d),d=new y(r.mul(d.px,o.beta),d.py,d.pz),n=c.add(d),i=u.add(h)}else{const{p:e,f:t}=this.wNAF(s);n=e,i=t}return y.normalizeZ([n,i])[0]}multiplyAndAddUnsafe(e,t,r){const n=y.BASE,i=(e,t)=>t!==c&&t!==u&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),s=i(this,t).add(i(e,r));return s.is0()?undefined:s}toAffine(e){const{px:t,py:n,pz:i}=this,s=this.is0();null==e&&(e=s?r.ONE:r.inv(i));const o=r.mul(t,e),a=r.mul(n,e),l=r.mul(i,e);if(s)return{x:r.ZERO,y:r.ZERO};if(!r.eql(l,r.ONE))throw new Error("invZ was invalid");return{x:o,y:a}}isTorsionFree(){const{h:e,isTorsionFree:r}=t;if(e===u)return!0;if(r)return r(y,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:r}=t;return e===u?this:r?r(y,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),a(y,this,e)}toHex(e=!0){return i.bytesToHex(this.toRawBytes(e))}}y.BASE=new y(t.Gx,t.Gy,r.ONE),y.ZERO=new y(r.ZERO,r.ONE,r.ZERO);const b=t.nBitLength,w=(0,o.wNAF)(y,t.endo?Math.ceil(b/2):b);return{CURVE:t,ProjectivePoint:y,normPrivateKeyToScalar:m,weierstrassEquation:d,isWithinCurveOrder:f}}function m(e,t){const r=e.ORDER;let n=c;for(let e=r-u;e%d===c;e/=d)n+=u;const i=n,s=d<<i-u-u,o=s*d,a=(r-u)/o,l=(a-u)/d,p=o-u,m=s,g=e.pow(t,a),v=e.pow(t,(a+u)/d);let y=(t,r)=>{let n=g,s=e.pow(r,p),o=e.sqr(s);o=e.mul(o,r);let a=e.mul(t,o);a=e.pow(a,l),a=e.mul(a,s),s=e.mul(a,r),o=e.mul(a,t);let c=e.mul(o,s);a=e.pow(c,m);let h=e.eql(a,e.ONE);s=e.mul(o,v),a=e.mul(c,n),o=e.cmov(s,o,h),c=e.cmov(a,c,h);for(let t=i;t>u;t--){let r=t-d;r=d<<r-u;let i=e.pow(c,r);const a=e.eql(i,e.ONE);s=e.mul(o,n),n=e.mul(n,n),i=e.mul(c,n),o=e.cmov(s,o,a),c=e.cmov(i,c,a)}return{isValid:h,value:o}};if(e.ORDER%f===h){const r=(e.ORDER-h)/f,n=e.sqrt(e.neg(t));y=(t,i)=>{let s=e.sqr(i);const o=e.mul(t,i);s=e.mul(s,o);let a=e.pow(s,r);a=e.mul(a,o);const l=e.mul(a,n),c=e.mul(e.sqr(a),i),u=e.eql(c,t);return{isValid:u,value:e.cmov(l,a,u)}}}return y}r.weierstrassPoints=p,r.weierstrass=function(e){const t=function(e){const t=(0,o.validateBasic)(e);return i.validateObject(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:a,n:l}=t,d=a.BYTES+1,h=2*a.BYTES+1;function f(e){return n.mod(e,l)}function m(e){return n.invert(e,l)}const{ProjectivePoint:g,normPrivateKeyToScalar:v,weierstrassEquation:y,isWithinCurveOrder:b}=p({...t,toBytes(e,t,r){const n=t.toAffine(),s=a.toBytes(n.x),o=i.concatBytes;return r?o(Uint8Array.from([t.hasEvenY()?2:3]),s):o(Uint8Array.from([4]),s,a.toBytes(n.y))},fromBytes(e){const t=e.length,r=e[0],n=e.subarray(1);if(t!==d||2!==r&&3!==r){if(t===h&&4===r){return{x:a.fromBytes(n.subarray(0,a.BYTES)),y:a.fromBytes(n.subarray(a.BYTES,2*a.BYTES))}}throw new Error(`Point of length ${t} was invalid. Expected ${d} compressed bytes or ${h} uncompressed bytes`)}{const e=i.bytesToNumberBE(n);if(!(c<(s=e)&&s<a.ORDER))throw new Error("Point is not on curve");const t=y(e);let o=a.sqrt(t);return!(1&~r)!==((o&u)===u)&&(o=a.neg(o)),{x:e,y:o}}var s}}),w=e=>i.bytesToHex(i.numberToBytesBE(e,t.nByteLength));function _(e){return e>l>>u}const k=(e,t,r)=>i.bytesToNumberBE(e.slice(t,r));class S{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){const r=t.nByteLength;return e=(0,s.ensureBytes)("compactSignature",e,2*r),new S(k(e,0,r),k(e,r,2*r))}static fromDER(e){const{r:t,s:n}=r.DER.toSig((0,s.ensureBytes)("DER",e));return new S(t,n)}assertValidity(){if(!b(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!b(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new S(this.r,this.s,e)}recoverPublicKey(e){const{r:r,s:n,recovery:i}=this,o=A((0,s.ensureBytes)("msgHash",e));if(null==i||![0,1,2,3].includes(i))throw new Error("recovery id invalid");const l=2===i||3===i?r+t.n:r;if(l>=a.ORDER)throw new Error("recovery id 2 or 3 invalid");const c=1&i?"03":"02",u=g.fromHex(c+w(l)),d=m(l),h=f(-o*d),p=f(n*d),v=g.BASE.multiplyAndAddUnsafe(u,h,p);if(!v)throw new Error("point at infinify");return v.assertValidity(),v}hasHighS(){return _(this.s)}normalizeS(){return this.hasHighS()?new S(this.r,f(-this.s),this.recovery):this}toDERRawBytes(){return i.hexToBytes(this.toDERHex())}toDERHex(){return r.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return i.hexToBytes(this.toCompactHex())}toCompactHex(){return w(this.r)+w(this.s)}}const E={isValidPrivateKey(e){try{return v(e),!0}catch(e){return!1}},normPrivateKeyToScalar:v,randomPrivateKey:()=>{const e=n.getMinHashLength(t.n);return n.mapHashToField(t.randomBytes(e),t.n)},precompute:(e=8,t=g.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function T(e){const t=i.isBytes(e),r="string"==typeof e,n=(t||r)&&e.length;return t?n===d||n===h:r?n===2*d||n===2*h:e instanceof g}const j=t.bits2int||function(e){const r=i.bytesToNumberBE(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},A=t.bits2int_modN||function(e){return f(j(e))},P=i.bitMask(t.nBitLength);function C(e){if("bigint"!=typeof e)throw new Error("bigint expected");if(!(c<=e&&e<P))throw new Error(`bigint expected < 2^${t.nBitLength}`);return i.numberToBytesBE(e,t.nByteLength)}function x(e,r,n=O){if(["recovered","canonical"].some((e=>e in n)))throw new Error("sign() legacy options not supported");const{hash:o,randomBytes:l}=t;let{lowS:d,prehash:h,extraEntropy:p}=n;null==d&&(d=!0),e=(0,s.ensureBytes)("msgHash",e),h&&(e=(0,s.ensureBytes)("prehashed msgHash",o(e)));const y=A(e),w=v(r),k=[C(w),C(y)];if(null!=p){const e=!0===p?l(a.BYTES):p;k.push((0,s.ensureBytes)("extraEntropy",e))}const E=i.concatBytes(...k),T=y;return{seed:E,k2sig:function(e){const t=j(e);if(!b(t))return;const r=m(t),n=g.BASE.multiply(t).toAffine(),i=f(n.x);if(i===c)return;const s=f(r*f(T+i*w));if(s===c)return;let o=(n.x===i?0:2)|Number(n.y&u),a=s;return d&&_(s)&&(a=function(e){return _(e)?f(-e):e}(s),o^=1),new S(i,a,o)}}}const O={lowS:t.lowS,prehash:!1},M={lowS:t.lowS,prehash:!1};return g.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return g.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(T(e))throw new Error("first arg must be private key");if(!T(t))throw new Error("second arg must be public key");return g.fromHex(t).multiply(v(e)).toRawBytes(r)},sign:function(e,r,n=O){const{seed:s,k2sig:o}=x(e,r,n),a=t;return i.createHmacDrbg(a.hash.outputLen,a.nByteLength,a.hmac)(s,o)},verify:function(e,n,o,a=M){const l=e;if(n=(0,s.ensureBytes)("msgHash",n),o=(0,s.ensureBytes)("publicKey",o),"strict"in a)throw new Error("options.strict was renamed to lowS");const{lowS:c,prehash:u}=a;let d,h=undefined;try{if("string"==typeof l||i.isBytes(l))try{h=S.fromDER(l)}catch(e){if(!(e instanceof r.DER.Err))throw e;h=S.fromCompact(l)}else{if("object"!=typeof l||"bigint"!=typeof l.r||"bigint"!=typeof l.s)throw new Error("PARSE");{const{r:e,s:t}=l;h=new S(e,t)}}d=g.fromHex(o)}catch(e){if("PARSE"===e.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(c&&h.hasHighS())return!1;u&&(n=t.hash(n));const{r:p,s:v}=h,y=A(n),b=m(v),w=f(y*b),_=f(p*b),k=g.BASE.multiplyAndAddUnsafe(d,w,_)?.toAffine();return!!k&&f(k.x)===p},ProjectivePoint:g,Signature:S,utils:E}},r.SWUFpSqrtRatio=m,r.mapToCurveSimpleSWU=function(e,t){if(n.validateField(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const r=m(e,t.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return n=>{let i,s,o,a,l,c,u,d;i=e.sqr(n),i=e.mul(i,t.Z),s=e.sqr(i),s=e.add(s,i),o=e.add(s,e.ONE),o=e.mul(o,t.B),a=e.cmov(t.Z,e.neg(s),!e.eql(s,e.ZERO)),a=e.mul(a,t.A),s=e.sqr(o),c=e.sqr(a),l=e.mul(c,t.A),s=e.add(s,l),s=e.mul(s,o),c=e.mul(c,a),l=e.mul(c,t.B),s=e.add(s,l),u=e.mul(i,o);const{isValid:h,value:f}=r(s,c);d=e.mul(i,n),d=e.mul(d,f),u=e.cmov(u,o,h),d=e.cmov(d,f,h);const p=e.isOdd(n)===e.isOdd(d);return d=e.cmov(e.neg(d),d,p),u=e.div(u,a),{x:u,y:d}}}}}},{package:"@ethereumjs/tx>ethereum-cryptography>@scure/bip32>@noble/curves",file:"node_modules/@scure/bip32/node_modules/@noble/curves/abstract/weierstrass.js"}],[2085,{"./_shortw_utils.js":2079,"./abstract/hash-to-curve.js":2081,"./abstract/modular.js":2082,"./abstract/utils.js":2083,"./abstract/weierstrass.js":2084,"@noble/hashes/sha256":2092,"@noble/hashes/utils":2094},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.encodeToCurve=r.hashToCurve=r.schnorr=r.secp256k1=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const n=e("@noble/hashes/sha256"),i=e("@noble/hashes/utils"),s=e("./abstract/modular.js"),o=e("./abstract/weierstrass.js"),a=e("./abstract/utils.js"),l=e("./abstract/hash-to-curve.js"),c=e("./_shortw_utils.js"),u=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),d=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h=BigInt(1),f=BigInt(2),p=(e,t)=>(e+t/f)/t;function m(e){const t=u,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),a=BigInt(23),l=BigInt(44),c=BigInt(88),d=e*e*e%t,h=d*d*e%t,p=(0,s.pow2)(h,r,t)*h%t,m=(0,s.pow2)(p,r,t)*h%t,v=(0,s.pow2)(m,f,t)*d%t,y=(0,s.pow2)(v,i,t)*v%t,b=(0,s.pow2)(y,o,t)*y%t,w=(0,s.pow2)(b,l,t)*b%t,_=(0,s.pow2)(w,c,t)*w%t,k=(0,s.pow2)(_,l,t)*b%t,S=(0,s.pow2)(k,r,t)*h%t,E=(0,s.pow2)(S,a,t)*y%t,T=(0,s.pow2)(E,n,t)*d%t,j=(0,s.pow2)(T,f,t);if(!g.eql(g.sqr(j),e))throw new Error("Cannot find square root");return j}const g=(0,s.Field)(u,undefined,undefined,{sqrt:m});r.secp256k1=(0,c.createCurve)({a:BigInt(0),b:BigInt(7),Fp:g,n:d,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=d,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-h*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,a=BigInt("0x100000000000000000000000000000000"),l=p(o*e,t),c=p(-n*e,t);let u=(0,s.mod)(e-l*r-c*i,t),f=(0,s.mod)(-l*n-c*o,t);const m=u>a,g=f>a;if(m&&(u=t-u),g&&(f=t-f),u>a||f>a)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:m,k1:u,k2neg:g,k2:f}}}},n.sha256);const v=BigInt(0),y=e=>"bigint"==typeof e&&v<e&&e<u,b=e=>"bigint"==typeof e&&v<e&&e<d,w={};function _(e,...t){let r=w[e];if(r===undefined){const t=(0,n.sha256)(Uint8Array.from(e,(e=>e.charCodeAt(0))));r=(0,a.concatBytes)(t,t),w[e]=r}return(0,n.sha256)((0,a.concatBytes)(r,...t))}const k=e=>e.toRawBytes(!0).slice(1),S=e=>(0,a.numberToBytesBE)(e,32),E=e=>(0,s.mod)(e,u),T=e=>(0,s.mod)(e,d),j=r.secp256k1.ProjectivePoint,A=(e,t,r)=>j.BASE.multiplyAndAddUnsafe(e,t,r);function P(e){let t=r.secp256k1.utils.normPrivateKeyToScalar(e),n=j.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:T(-t),bytes:k(n)}}function C(e){if(!y(e))throw new Error("bad x: need 0 < x < p");const t=E(e*e);let r=m(E(t*e+BigInt(7)));r%f!==v&&(r=E(-r));const n=new j(e,r,h);return n.assertValidity(),n}function x(...e){return T((0,a.bytesToNumberBE)(_("BIP0340/challenge",...e)))}function O(e){return P(e).bytes}function M(e,t,r=(0,i.randomBytes)(32)){const n=(0,a.ensureBytes)("message",e),{bytes:s,scalar:o}=P(t),l=(0,a.ensureBytes)("auxRand",r,32),c=S(o^(0,a.bytesToNumberBE)(_("BIP0340/aux",l))),u=_("BIP0340/nonce",c,s,n),d=T((0,a.bytesToNumberBE)(u));if(d===v)throw new Error("sign failed: k is zero");const{bytes:h,scalar:f}=P(d),p=x(h,s,n),m=new Uint8Array(64);if(m.set(h,0),m.set(S(T(f+p*o)),32),!B(m,n,s))throw new Error("sign: Invalid signature produced");return m}function B(e,t,r){const n=(0,a.ensureBytes)("signature",e,64),i=(0,a.ensureBytes)("message",t),s=(0,a.ensureBytes)("publicKey",r,32);try{const e=C((0,a.bytesToNumberBE)(s)),t=(0,a.bytesToNumberBE)(n.subarray(0,32));if(!y(t))return!1;const r=(0,a.bytesToNumberBE)(n.subarray(32,64));if(!b(r))return!1;const o=x(S(t),k(e),i),l=A(e,r,T(-o));return!(!l||!l.hasEvenY()||l.toAffine().x!==t)}catch(e){return!1}}r.schnorr={getPublicKey:O,sign:M,verify:B,utils:{randomPrivateKey:r.secp256k1.utils.randomPrivateKey,lift_x:C,pointToBytes:k,numberToBytesBE:a.numberToBytesBE,bytesToNumberBE:a.bytesToNumberBE,taggedHash:_,mod:s.mod}};const I=(()=>(0,l.isogenyMap)(g,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map((e=>e.map((e=>BigInt(e)))))))(),R=(()=>(0,o.mapToCurveSimpleSWU)(g,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:g.create(BigInt("-11"))}))(),N=(()=>(0,l.createHasher)(r.secp256k1.ProjectivePoint,(e=>{const{x:t,y:r}=R(g.create(e[0]));return I(t,r)}),{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:g.ORDER,m:1,k:128,expand:"xmd",hash:n.sha256}))();r.hashToCurve=N.hashToCurve,r.encodeToCurve=N.encodeToCurve}}},{package:"@ethereumjs/tx>ethereum-cryptography>@scure/bip32>@noble/curves",file:"node_modules/@scure/bip32/node_modules/@noble/curves/secp256k1.js"}],[2086,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function i(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)}function s(e,...t){if(!((r=e)instanceof Uint8Array||null!=r&&"object"==typeof r&&"Uint8Array"===r.constructor.name))throw new Error("Expected Uint8Array");var r;if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function o(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}function a(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function l(e,t){s(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}Object.defineProperty(r,"__esModule",{value:!0}),r.output=r.exists=r.hash=r.bytes=r.bool=r.number=void 0,r.number=n,r.bool=i,r.bytes=s,r.hash=o,r.exists=a,r.output=l;const c={number:n,bool:i,bytes:s,hash:o,exists:a,output:l};r.default=c}}},{package:"@ethereumjs/tx>ethereum-cryptography>@scure/bip32>@noble/hashes",file:"node_modules/@scure/bip32/node_modules/@noble/hashes/_assert.js"}],[2087,{"./_assert.js":2086,"./utils.js":2094},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SHA2=void 0;const n=e("./_assert.js"),i=e("./utils.js");class s extends i.Hash{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,i.createView)(this.buffer)}update(e){(0,n.exists)(this);const{view:t,buffer:r,blockLen:s}=this,o=(e=(0,i.toBytes)(e)).length;for(let n=0;n<o;){const a=Math.min(s-this.pos,o-n);if(a!==s)r.set(e.subarray(n,n+a),this.pos),this.pos+=a,n+=a,this.pos===s&&(this.process(t,0),this.pos=0);else{const t=(0,i.createView)(e);for(;s<=o-n;n+=s)this.process(t,n)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,n.exists)(this),(0,n.output)(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:s,isLE:o}=this;let{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(r,0),a=0);for(let e=a;e<s;e++)t[e]=0;!function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),l=n?4:0,c=n?0:4;e.setUint32(t+l,o,n),e.setUint32(t+c,a,n)}(r,s-8,BigInt(8*this.length),o),this.process(r,0);const l=(0,i.createView)(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<u;e++)l.setUint32(4*e,d[e],o)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:o}=this;return e.length=n,e.pos=o,e.finished=i,e.destroyed=s,n%t&&e.buffer.set(r),e}}r.SHA2=s}}},{package:"@ethereumjs/tx>ethereum-cryptography>@scure/bip32>@noble/hashes",file:"node_modules/@scure/bip32/node_modules/@noble/hashes/_sha2.js"}],[2088,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.add5L=r.add5H=r.add4H=r.add4L=r.add3H=r.add3L=r.add=r.rotlBL=r.rotlBH=r.rotlSL=r.rotlSH=r.rotr32L=r.rotr32H=r.rotrBL=r.rotrBH=r.rotrSL=r.rotrSH=r.shrSL=r.shrSH=r.toBig=r.split=r.fromBig=void 0;const n=BigInt(2**32-1),i=BigInt(32);function s(e,t=!1){return t?{h:Number(e&n),l:Number(e>>i&n)}:{h:0|Number(e>>i&n),l:0|Number(e&n)}}function o(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:o,l:a}=s(e[i],t);[r[i],n[i]]=[o,a]}return[r,n]}r.fromBig=s,r.split=o;const a=(e,t)=>BigInt(e>>>0)<<i|BigInt(t>>>0);r.toBig=a;const l=(e,t,r)=>e>>>r;r.shrSH=l;const c=(e,t,r)=>e<<32-r|t>>>r;r.shrSL=c;const u=(e,t,r)=>e>>>r|t<<32-r;r.rotrSH=u;const d=(e,t,r)=>e<<32-r|t>>>r;r.rotrSL=d;const h=(e,t,r)=>e<<64-r|t>>>r-32;r.rotrBH=h;const f=(e,t,r)=>e>>>r-32|t<<64-r;r.rotrBL=f;const p=(e,t)=>t;r.rotr32H=p;const m=(e,t)=>e;r.rotr32L=m;const g=(e,t,r)=>e<<r|t>>>32-r;r.rotlSH=g;const v=(e,t,r)=>t<<r|e>>>32-r;r.rotlSL=v;const y=(e,t,r)=>t<<r-32|e>>>64-r;r.rotlBH=y;const b=(e,t,r)=>e<<r-32|t>>>64-r;function w(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:0|i}}r.rotlBL=b,r.add=w;const _=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0);r.add3L=_;const k=(e,t,r,n)=>t+r+n+(e/2**32|0)|0;r.add3H=k;const S=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0);r.add4L=S;const E=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0;r.add4H=E;const T=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0);r.add5L=T;const j=(e,t,r,n,i,s)=>t+r+n+i+s+(e/2**32|0)|0;r.add5H=j;const A={fromBig:s,split:o,toBig:a,shrSH:l,shrSL:c,rotrSH:u,rotrSL:d,rotrBH:h,rotrBL:f,rotr32H:p,rotr32L:m,rotlSH:g,rotlSL:v,rotlBH:y,rotlBL:b,add:w,add3L:_,add3H:k,add4L:S,add4H:E,add5H:j,add5L:T};r.default=A}}},{package:"@ethereumjs/tx>ethereum-cryptography>@scure/bip32>@noble/hashes",file:"node_modules/@scure/bip32/node_modules/@noble/hashes/_u64.js"}],[2089,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.crypto=void 0,r.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:undefined}}},{package:"@ethereumjs/tx>ethereum-cryptography>@scure/bip32>@noble/hashes",file:"node_modules/@scure/bip32/node_modules/@noble/hashes/crypto.js"}],[209,{"@metamask/keyring-api":1353,"ethereumjs-util":3006,lodash:3587,uuid:4208},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,o.cloneDeep)(e);return t.meta.version=a,function(e){(function(e){e.AccountsController={internalAccounts:{accounts:{},selectedAccount:""}}})(e),function(e){var t;const r=(null===(t=e.PreferencesController)||void 0===t?void 0:t.identities)||{};if(0===Object.keys(r).length)return;const o={};Object.values(r).forEach((e=>{const t=(0,s.v4)({random:(0,i.sha256FromString)(e.address).slice(0,16)});o[t]={address:e.address,id:t,options:{},metadata:{name:e.name,lastSelected:e.lastSelected??undefined,keyring:{type:"HD Key Tree"}},methods:[n.EthMethod.Sign,n.EthMethod.PersonalSign,n.EthMethod.SignTransaction,n.EthMethod.SignTypedDataV1,n.EthMethod.SignTypedDataV3,n.EthMethod.SignTypedDataV4],type:n.EthAccountType.Eoa}})),e.AccountsController.internalAccounts.accounts=o}(e),function(e){var t;let r=null===(t=e.PreferencesController)||void 0===t?void 0:t.selectedAddress;if("string"!=typeof r){var n,i;null===(n=global.sentry)||void 0===n||null===(i=n.captureException)||void 0===i||i.call(n,new Error(`state.PreferencesController?.selectedAddress is ${r}`)),r=function(e){var t;const[r]=Object.keys((null===(t=e.PreferencesController)||void 0===t?void 0:t.identities)||{});return r}(e)}const s=function(e,t){return Object.values(e.AccountsController.internalAccounts.accounts).find((e=>e.address.toLowerCase()===t.toLowerCase()))}(e,r);s&&(e.PreferencesController.selectedAddress=s.address,e.AccountsController.internalAccounts={...e.AccountsController.internalAccounts,selectedAccount:s.id})}(e)}(t.data),t},r.version=void 0;var n=e("@metamask/keyring-api"),i=e("ethereumjs-util"),s=e("uuid"),o=e("lodash");const a=r.version=105}}},{package:"$root$",file:"app/scripts/migrations/105.ts"}],[2090,{"./_assert.js":2086,"./utils.js":2094},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.hmac=r.HMAC=void 0;const n=e("./_assert.js"),i=e("./utils.js");class s extends i.Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,n.hash)(e);const r=(0,i.toBytes)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,o=new Uint8Array(s);o.set(r.length>s?e.create().update(r).digest():r);for(let e=0;e<o.length;e++)o[e]^=54;this.iHash.update(o),this.oHash=e.create();for(let e=0;e<o.length;e++)o[e]^=106;this.oHash.update(o),o.fill(0)}update(e){return(0,n.exists)(this),this.iHash.update(e),this}digestInto(e){(0,n.exists)(this),(0,n.bytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:s,outputLen:o}=this;return e.finished=n,e.destroyed=i,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}r.HMAC=s;r.hmac=(e,t,r)=>new s(e,t).update(r).digest(),r.hmac.create=(e,t)=>new s(e,t)}}},{package:"@ethereumjs/tx>ethereum-cryptography>@scure/bip32>@noble/hashes",file:"node_modules/@scure/bip32/node_modules/@noble/hashes/hmac.js"}],[2091,{"./_sha2.js":2087,"./utils.js":2094},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ripemd160=r.RIPEMD160=void 0;const n=e("./_sha2.js"),i=e("./utils.js"),s=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),o=Uint8Array.from({length:16},((e,t)=>t));let a=[o],l=[o.map((e=>(9*e+5)%16))];for(let e=0;e<4;e++)for(let t of[a,l])t.push(t[e].map((e=>s[e])));const c=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map((e=>new Uint8Array(e))),u=a.map(((e,t)=>e.map((e=>c[t][e])))),d=l.map(((e,t)=>e.map((e=>c[t][e])))),h=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),f=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),p=(e,t)=>e<<t|e>>>32-t;function m(e,t,r,n){return 0===e?t^r^n:1===e?t&r|~t&n:2===e?(t|~r)^n:3===e?t&n|r&~n:t^(r|~n)}const g=new Uint32Array(16);class v extends n.SHA2{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:t,h2:r,h3:n,h4:i}=this;return[e,t,r,n,i]}set(e,t,r,n,i){this.h0=0|e,this.h1=0|t,this.h2=0|r,this.h3=0|n,this.h4=0|i}process(e,t){for(let r=0;r<16;r++,t+=4)g[r]=e.getUint32(t,!0);let r=0|this.h0,n=r,i=0|this.h1,s=i,o=0|this.h2,c=o,v=0|this.h3,y=v,b=0|this.h4,w=b;for(let e=0;e<5;e++){const t=4-e,_=h[e],k=f[e],S=a[e],E=l[e],T=u[e],j=d[e];for(let t=0;t<16;t++){const n=p(r+m(e,i,o,v)+g[S[t]]+_,T[t])+b|0;r=b,b=v,v=0|p(o,10),o=i,i=n}for(let e=0;e<16;e++){const r=p(n+m(t,s,c,y)+g[E[e]]+k,j[e])+w|0;n=w,w=y,y=0|p(c,10),c=s,s=r}}this.set(this.h1+o+y|0,this.h2+v+w|0,this.h3+b+n|0,this.h4+r+s|0,this.h0+i+c|0)}roundClean(){g.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}r.RIPEMD160=v,r.ripemd160=(0,i.wrapConstructor)((()=>new v))}}},{package:"@ethereumjs/tx>ethereum-cryptography>@scure/bip32>@noble/hashes",file:"node_modules/@scure/bip32/node_modules/@noble/hashes/ripemd160.js"}],[2092,{"./_sha2.js":2087,"./utils.js":2094},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.sha224=r.sha256=void 0;const n=e("./_sha2.js"),i=e("./utils.js"),s=(e,t,r)=>e&t^e&r^t&r,o=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),a=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),l=new Uint32Array(64);class c extends n.SHA2{constructor(){super(64,32,8,!1),this.A=0|a[0],this.B=0|a[1],this.C=0|a[2],this.D=0|a[3],this.E=0|a[4],this.F=0|a[5],this.G=0|a[6],this.H=0|a[7]}get(){const{A:e,B:t,C:r,D:n,E:i,F:s,G:o,H:a}=this;return[e,t,r,n,i,s,o,a]}set(e,t,r,n,i,s,o,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)l[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=l[e-15],r=l[e-2],n=(0,i.rotr)(t,7)^(0,i.rotr)(t,18)^t>>>3,s=(0,i.rotr)(r,17)^(0,i.rotr)(r,19)^r>>>10;l[e]=s+l[e-7]+n+l[e-16]|0}let{A:r,B:n,C:a,D:c,E:u,F:d,G:h,H:f}=this;for(let e=0;e<64;e++){const t=f+((0,i.rotr)(u,6)^(0,i.rotr)(u,11)^(0,i.rotr)(u,25))+((p=u)&d^~p&h)+o[e]+l[e]|0,m=((0,i.rotr)(r,2)^(0,i.rotr)(r,13)^(0,i.rotr)(r,22))+s(r,n,a)|0;f=h,h=d,d=u,u=c+t|0,c=a,a=n,n=r,r=t+m|0}var p;r=r+this.A|0,n=n+this.B|0,a=a+this.C|0,c=c+this.D|0,u=u+this.E|0,d=d+this.F|0,h=h+this.G|0,f=f+this.H|0,this.set(r,n,a,c,u,d,h,f)}roundClean(){l.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class u extends c{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}r.sha256=(0,i.wrapConstructor)((()=>new c)),r.sha224=(0,i.wrapConstructor)((()=>new u))}}},{package:"@ethereumjs/tx>ethereum-cryptography>@scure/bip32>@noble/hashes",file:"node_modules/@scure/bip32/node_modules/@noble/hashes/sha256.js"}],[2093,{"./_sha2.js":2087,"./_u64.js":2088,"./utils.js":2094},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.sha384=r.sha512_256=r.sha512_224=r.sha512=r.SHA512=void 0;const n=e("./_sha2.js"),i=e("./_u64.js"),s=e("./utils.js"),[o,a]=(()=>i.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))(),l=new Uint32Array(80),c=new Uint32Array(80);class u extends n.SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:s,Dh:o,Dl:a,Eh:l,El:c,Fh:u,Fl:d,Gh:h,Gl:f,Hh:p,Hl:m}=this;return[e,t,r,n,i,s,o,a,l,c,u,d,h,f,p,m]}set(e,t,r,n,i,s,o,a,l,c,u,d,h,f,p,m){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|s,this.Dh=0|o,this.Dl=0|a,this.Eh=0|l,this.El=0|c,this.Fh=0|u,this.Fl=0|d,this.Gh=0|h,this.Gl=0|f,this.Hh=0|p,this.Hl=0|m}process(e,t){for(let r=0;r<16;r++,t+=4)l[r]=e.getUint32(t),c[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|l[e-15],r=0|c[e-15],n=i.default.rotrSH(t,r,1)^i.default.rotrSH(t,r,8)^i.default.shrSH(t,r,7),s=i.default.rotrSL(t,r,1)^i.default.rotrSL(t,r,8)^i.default.shrSL(t,r,7),o=0|l[e-2],a=0|c[e-2],u=i.default.rotrSH(o,a,19)^i.default.rotrBH(o,a,61)^i.default.shrSH(o,a,6),d=i.default.rotrSL(o,a,19)^i.default.rotrBL(o,a,61)^i.default.shrSL(o,a,6),h=i.default.add4L(s,d,c[e-7],c[e-16]),f=i.default.add4H(h,n,u,l[e-7],l[e-16]);l[e]=0|f,c[e]=0|h}let{Ah:r,Al:n,Bh:s,Bl:u,Ch:d,Cl:h,Dh:f,Dl:p,Eh:m,El:g,Fh:v,Fl:y,Gh:b,Gl:w,Hh:_,Hl:k}=this;for(let e=0;e<80;e++){const t=i.default.rotrSH(m,g,14)^i.default.rotrSH(m,g,18)^i.default.rotrBH(m,g,41),S=i.default.rotrSL(m,g,14)^i.default.rotrSL(m,g,18)^i.default.rotrBL(m,g,41),E=m&v^~m&b,T=g&y^~g&w,j=i.default.add5L(k,S,T,a[e],c[e]),A=i.default.add5H(j,_,t,E,o[e],l[e]),P=0|j,C=i.default.rotrSH(r,n,28)^i.default.rotrBH(r,n,34)^i.default.rotrBH(r,n,39),x=i.default.rotrSL(r,n,28)^i.default.rotrBL(r,n,34)^i.default.rotrBL(r,n,39),O=r&s^r&d^s&d,M=n&u^n&h^u&h;_=0|b,k=0|w,b=0|v,w=0|y,v=0|m,y=0|g,({h:m,l:g}=i.default.add(0|f,0|p,0|A,0|P)),f=0|d,p=0|h,d=0|s,h=0|u,s=0|r,u=0|n;const B=i.default.add3L(P,x,M);r=i.default.add3H(B,A,C,O),n=0|B}({h:r,l:n}=i.default.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:s,l:u}=i.default.add(0|this.Bh,0|this.Bl,0|s,0|u)),({h:d,l:h}=i.default.add(0|this.Ch,0|this.Cl,0|d,0|h)),({h:f,l:p}=i.default.add(0|this.Dh,0|this.Dl,0|f,0|p)),({h:m,l:g}=i.default.add(0|this.Eh,0|this.El,0|m,0|g)),({h:v,l:y}=i.default.add(0|this.Fh,0|this.Fl,0|v,0|y)),({h:b,l:w}=i.default.add(0|this.Gh,0|this.Gl,0|b,0|w)),({h:_,l:k}=i.default.add(0|this.Hh,0|this.Hl,0|_,0|k)),this.set(r,n,s,u,d,h,f,p,m,g,v,y,b,w,_,k)}roundClean(){l.fill(0),c.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}r.SHA512=u;class d extends u{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class h extends u{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class f extends u{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}r.sha512=(0,s.wrapConstructor)((()=>new u)),r.sha512_224=(0,s.wrapConstructor)((()=>new d)),r.sha512_256=(0,s.wrapConstructor)((()=>new h)),r.sha384=(0,s.wrapConstructor)((()=>new f))}}},{package:"@ethereumjs/tx>ethereum-cryptography>@scure/bip32>@noble/hashes",file:"node_modules/@scure/bip32/node_modules/@noble/hashes/sha512.js"}],[2094,{"@noble/hashes/crypto":2089},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(r,"__esModule",{value:!0}),r.randomBytes=r.wrapXOFConstructorWithOpts=r.wrapConstructorWithOpts=r.wrapConstructor=r.checkOpts=r.Hash=r.concatBytes=r.toBytes=r.utf8ToBytes=r.asyncLoop=r.nextTick=r.hexToBytes=r.bytesToHex=r.isLE=r.rotr=r.createView=r.u32=r.u8=void 0;const n=e("@noble/hashes/crypto");r.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);function i(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}r.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));r.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(r.rotr=(e,t)=>e<<32-t|e>>>t,r.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!r.isLE)throw new Error("Non little-endian hardware is not supported");const s=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));r.bytesToHex=function(e){if(!i(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=s[e[r]];return t};const o={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function a(e){return e>=o._0&&e<=o._9?e-o._0:e>=o._A&&e<=o._F?e-(o._A-10):e>=o._a&&e<=o._f?e-(o._a-10):void 0}r.hexToBytes=function(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){const r=a(e.charCodeAt(i)),s=a(e.charCodeAt(i+1));if(r===undefined||s===undefined){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}n[t]=16*r+s}return n};function l(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function c(e){if("string"==typeof e&&(e=l(e)),!i(e))throw new Error("expected Uint8Array, got "+typeof e);return e}r.nextTick=async()=>{},r.asyncLoop=async function(e,t,n){let i=Date.now();for(let s=0;s<e;s++){n(s);const e=Date.now()-i;e>=0&&e<t||(await(0,r.nextTick)(),i+=e)}},r.utf8ToBytes=l,r.toBytes=c,r.concatBytes=function(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];if(!i(n))throw new Error("Uint8Array expected");t+=n.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r};r.Hash=class{clone(){return this._cloneInto()}};const u={}.toString;r.checkOpts=function(e,t){if(t!==undefined&&"[object Object]"!==u.call(t))throw new Error("Options should be object or undefined");return Object.assign(e,t)},r.wrapConstructor=function(e){const t=t=>e().update(c(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t},r.wrapConstructorWithOpts=function(e){const t=(t,r)=>e(r).update(c(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},r.wrapXOFConstructorWithOpts=function(e){const t=(t,r)=>e(r).update(c(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},r.randomBytes=function(e=32){if(n.crypto&&"function"==typeof n.crypto.getRandomValues)return n.crypto.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}}}},{package:"@ethereumjs/tx>ethereum-cryptography>@scure/bip32>@noble/hashes",file:"node_modules/@scure/bip32/node_modules/@noble/hashes/utils.js"}],[2095,{assert:2740,buffer:2744,"component-type":2805,"join-component":3397},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("component-type"),i=e("join-component"),s=e("assert"),o=32768;t.exports=function(e,t){switch(l(e),t=t||e.type,s(t,"You must pass an event type."),t){case"track":return function(e){s(e.anonymousId||e.userId,'You must pass either an "anonymousId" or a "userId".'),s(e.event,'You must pass an "event".')}(e);case"group":return function(e){s(e.anonymousId||e.userId,'You must pass either an "anonymousId" or a "userId".'),s(e.groupId,'You must pass a "groupId".')}(e);case"identify":case"page":case"screen":return function(e){s(e.anonymousId||e.userId,'You must pass either an "anonymousId" or a "userId".')}(e);case"alias":return function(e){s(e.userId,'You must pass a "userId".'),s(e.previousId,'You must pass a "previousId".')}(e);default:s(0,'Invalid event type: "'+t+'"')}};var a={anonymousId:["string","number"],category:"string",context:"object",event:"string",groupId:["string","number"],integrations:"object",name:"string",previousId:["string","number"],timestamp:"date",userId:["string","number"],type:"string"};function l(e){s("object"===n(e),"You must pass a message object.");var t=JSON.stringify(e);for(var l in s(r.byteLength(t,"utf8")<o,"Your message must be < 32kb."),a){var c=e[l];if(c){var u=a[l];"array"!==n(u)&&(u=[u]);var d="object"===u[0]?"an":"a";s(u.some((function(e){return n(c)===e})),'"'+l+'" must be '+d+" "+i(u,"or")+".")}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@segment/loosely-validate-event",file:"node_modules/@segment/loosely-validate-event/index.js"}],[21,{"./background-api":18,"./caveat-mutators":19,"./enums":20,"./selectors":22,"./specifications":23},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./caveat-mutators");Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===n[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}}))}));var i=e("./background-api");Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===i[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return i[e]}}))}));var s=e("./enums");Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===s[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return s[e]}}))}));var o=e("./specifications");Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===o[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}}))}));var a=e("./selectors");Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===a[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return a[e]}}))}))}}},{package:"$root$",file:"app/scripts/controllers/permissions/index.js"}],[210,{lodash:3587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);t.meta.version=i;const r=function(e){const t=(null==e?void 0:e.PreferencesController)||{};return{...e,PreferencesController:{...t,securityAlertsEnabled:!0!==t.transactionSecurityCheckEnabled}}}(t.data);return t.data=r,t},r.version=void 0;var n=e("lodash");const i=r.version=106}}},{package:"$root$",file:"app/scripts/migrations/106.js"}],[211,{"@metamask/utils":2021,lodash:3587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=s,t.data=function(e){if(!((0,i.hasProperty)(e,"CachedBalancesController")&&(0,i.isObject)(e.CachedBalancesController)&&(0,i.hasProperty)(e.CachedBalancesController,"cachedBalances")&&(0,i.isObject)(e.CachedBalancesController.cachedBalances)&&(0,i.hasProperty)(e,"AccountTracker")&&(0,i.isObject)(e.AccountTracker)))return e;e.AccountTracker.accountsByChainId||(e.AccountTracker.accountsByChainId={});const t=e.AccountTracker,r=e.CachedBalancesController.cachedBalances;return Object.keys(r).forEach((e=>{t.accountsByChainId[e]||(t.accountsByChainId[e]={}),Object.keys(r[e]).forEach((n=>{if(t.accountsByChainId[e][n]===undefined){const i=r[e][n];t.accountsByChainId[e][n]={address:n,balance:i}}}))})),delete e.CachedBalancesController,e.AccountTracker=t,e}(t.data),t},r.version=void 0;var n=e("lodash"),i=e("@metamask/utils");const s=r.version=107}}},{package:"$root$",file:"app/scripts/migrations/107.ts"}],[212,{lodash:3587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=i,function(e){var t,r;const i=(null==e||null===(t=e.AddressBookController)||void 0===t?void 0:t.addressBook)??{},s=(null==e||null===(r=e.NameController)||void 0===r||null===(r=r.names)||void 0===r?void 0:r.ethereumAddress)??{};if((0,n.isEmpty)(Object.keys(i)))return;for(const e of Object.keys(i)){const t=i[e];for(const r of Object.keys(t)){var o,a;const n=t[r],i=r.toLowerCase(),l=s[i]??{};null!==(o=(l[e]??{}).name)&&void 0!==o&&o.length||null===(a=n.name)||void 0===a||!a.length||null==i||!i.length||(s[i]=l,l[e]={name:n.name,sourceId:n.isEns?"ens":null,proposedNames:{}})}}e.NameController={...e.NameController,names:{ethereumAddress:s}}}(t.data),t},r.version=void 0;var n=e("lodash");const i=r.version=108}}},{package:"$root$",file:"app/scripts/migrations/108.ts"}],[213,{"@metamask/name-controller":1420,lodash:3587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=s,function(e){var t,r;const s=(null==e||null===(t=e.PreferencesController)||void 0===t?void 0:t.identities)??{},o=(null==e||null===(r=e.NameController)||void 0===r||null===(r=r.names)||void 0===r?void 0:r.ethereumAddress)??{};if((0,n.isEmpty)(Object.keys(s)))return;let a=!1;for(const e of Object.keys(s)){var l,c,u;const t=s[e],r=e.toLowerCase(),n=o[r]??{};!Boolean(null===(l=n[i.FALLBACK_VARIATION])||void 0===l?void 0:l.name)&&null!==(c=t.name)&&void 0!==c&&c.length&&null!==(u=t.address)&&void 0!==u&&u.length&&null!=r&&r.length&&(o[r]=n,n[i.FALLBACK_VARIATION]={name:t.name,sourceId:null,proposedNames:{},origin:i.NameOrigin.ACCOUNT_IDENTITY},a=!0)}a&&(e.NameController={...e.NameController,names:{ethereumAddress:o}})}(t.data),t},r.version=void 0;var n=e("lodash"),i=e("@metamask/name-controller");const s=r.version=109}}},{package:"$root$",file:"app/scripts/migrations/109.ts"}],[214,{"../../../shared/constants/network":4304,"@metamask/controller-utils":1094,"@metamask/network-controller":1435,"@metamask/utils":2021,lodash:3587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=l,function(e){const t=(null==e?void 0:e.NetworkController)||{},r=(null==t?void 0:t.providerConfig)||{};if((null==r?void 0:r.chainId)!==a.CHAIN_IDS.GOERLI)return e;const l=e.NetworkController;(0,s.hasProperty)(e,"NetworkController")&&(0,n.isObject)(e.NetworkController)&&(0,s.hasProperty)(e.NetworkController,"providerConfig")&&(0,n.isObject)(e.NetworkController.providerConfig)&&(0,s.hasProperty)(e.NetworkController.providerConfig,"chainId")&&e.NetworkController.providerConfig.chainId===a.CHAIN_IDS.GOERLI&&(l.providerConfig={type:i.NetworkType.sepolia,rpcPrefs:{},chainId:a.CHAIN_IDS.SEPOLIA,nickname:a.SEPOLIA_DISPLAY_NAME,rpcUrl:a.CHAIN_ID_TO_RPC_URL_MAP[a.CHAIN_IDS.SEPOLIA],providerType:a.NETWORK_TYPES.SEPOLIA,ticker:a.TEST_NETWORK_TICKER_MAP[a.NETWORK_TYPES.SEPOLIA],id:a.NETWORK_TYPES.SEPOLIA,removable:!1},l.selectedNetworkClientId=a.NETWORK_TYPES.SEPOLIA,l.networksMetadata={...l.networksMetadata,sepolia:{EIPS:{1559:!0},status:o.NetworkStatus.Available}})}(t.data),t},r.version=void 0;var n=e("lodash"),i=e("@metamask/controller-utils"),s=e("@metamask/utils"),o=e("@metamask/network-controller"),a=e("../../../shared/constants/network");const l=r.version=110}}},{package:"$root$",file:"app/scripts/migrations/110.ts"}],[215,{"@metamask/utils":2021,lodash:3587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=s,function(e){if(!(0,i.hasProperty)(e,"SelectedNetworkController"))return e;if((0,i.isObject)(e.SelectedNetworkController))if((0,i.hasProperty)(e.SelectedNetworkController,"domains")){if(!(0,i.isObject)(e.SelectedNetworkController.domains)){var t,r;null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("state.SelectedNetworkController.domains is type: "+typeof e.SelectedNetworkController.domains))}}else{var n,s;null===(n=global.sentry)||void 0===n||null===(s=n.captureException)||void 0===s||s.call(n,new Error("state.SelectedNetworkController.domains is missing from SelectedNetworkController state"))}else{var o,a;null===(o=global.sentry)||void 0===o||null===(a=o.captureException)||void 0===a||a.call(o,new Error("state.SelectedNetworkController is type: "+typeof e.SelectedNetworkController)),e.SelectedNetworkController={}}e.SelectedNetworkController.domains={}}(t.data),t},r.version=void 0;var n=e("lodash"),i=e("@metamask/utils");const s=r.version=111}}},{package:"$root$",file:"app/scripts/migrations/111.ts"}],[216,{"@metamask/utils":2021,lodash:3587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=s,function(e){if(!(0,i.hasProperty)(e,"SelectedNetworkController"))return e;if((0,i.isObject)(e.SelectedNetworkController))if((0,i.hasProperty)(e.SelectedNetworkController,"perDomainNetwork")){if("boolean"!=typeof e.SelectedNetworkController.perDomainNetwork){var t,r;null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("state.SelectedNetworkController.perDomainNetwork is type: "+typeof e.SelectedNetworkController.perDomainNetwork))}}else{var n,s;null===(n=global.sentry)||void 0===n||null===(s=n.captureException)||void 0===s||s.call(n,new Error("state.SelectedNetworkController.perDomainNetwork is missing from SelectedNetworkController state"))}else{var o,a;null===(o=global.sentry)||void 0===o||null===(a=o.captureException)||void 0===a||a.call(o,new Error("state.SelectedNetworkController is type: "+typeof e.SelectedNetworkController)),e.SelectedNetworkController={}}delete e.SelectedNetworkController.perDomainNetwork}(t.data),t},r.version=void 0;var n=e("lodash"),i=e("@metamask/utils");const s=r.version=112}}},{package:"$root$",file:"app/scripts/migrations/112.ts"}],[217,{"@metamask/utils":2021,"@sentry/browser":2128,lodash:3587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=o,function(e){if(!(0,n.hasProperty)(e,"PreferencesController")||!(0,n.isObject)(e.PreferencesController))return(0,i.captureException)(`Migration ${o}: Invalid PreferencesController state: ${typeof e.PreferencesController}`),e;(0,n.hasProperty)(e.PreferencesController,"isLineaMainnetReleased")&&delete e.PreferencesController.isLineaMainnetReleased}(t.data),t},r.version=void 0;var n=e("@metamask/utils"),i=e("@sentry/browser"),s=e("lodash");const o=r.version=113}}},{package:"$root$",file:"app/scripts/migrations/113.ts"}],[218,{"@metamask/utils":2021,lodash:3587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=s,function(e){if(!(0,i.hasProperty)(e,"PreferencesController"))return e;if((0,i.isObject)(e.PreferencesController))(0,i.hasProperty)(e.PreferencesController,"transactionSecurityCheckEnabled")&&(e.PreferencesController.transactionSecurityCheckEnabled&&(e.PreferencesController.securityAlertsEnabled=!0,e.PreferencesController.hasMigratedFromOpenSeaToBlockaid=!0),delete e.PreferencesController.transactionSecurityCheckEnabled);else{var t,r;null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("state.PreferencesController is type: "+typeof e.PreferencesController)),e.PreferencesController={}}}(t.data),t},r.version=void 0;var n=e("lodash"),i=e("@metamask/utils");const s=r.version=114}}},{package:"$root$",file:"app/scripts/migrations/114.ts"}],[219,{"@metamask/utils":2021,lodash:3587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=s,function(e){const t=(null==e?void 0:e.AppStateController)||{};(0,i.hasProperty)(e,"AppStateController")&&(0,n.isObject)(e.AppStateController)&&(0,i.hasProperty)(e.AppStateController,"showProductTour")&&e.AppStateController.showProductTour!==undefined&&delete t.showProductTour}(t.data),t},r.version=void 0;var n=e("lodash"),i=e("@metamask/utils");const s=r.version=115}}},{package:"$root$",file:"app/scripts/migrations/115.ts"}],[22,{"../../../../shared/constants/permissions":4308,reselect:4024},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getPermittedAccountsByOrigin=r.getChangedAccounts=void 0;var n=e("reselect"),i=e("../../../../shared/constants/permissions");r.getPermittedAccountsByOrigin=(0,n.createSelector)((e=>e.subjects),(e=>Object.values(e).reduce(((e,t)=>{var r;const n=((null===(r=t.permissions)||void 0===r||null===(r=r.eth_accounts)||void 0===r?void 0:r.caveats)||[]).find((({type:e})=>e===i.CaveatTypes.restrictReturnedAccounts));return n&&e.set(t.origin,n.value),e}),new Map)));r.getChangedAccounts=(e,t)=>{if(t===undefined)return e;const r=new Map;if(e===t)return r;const n=new Set([...e.keys()]);for(const i of t.keys()){const s=e.get(i)??[];t.get(i)!==s&&r.set(i,s),n.delete(i)}for(const t of n.keys())r.set(t,e.get(t));return r}}}},{package:"$root$",file:"app/scripts/controllers/permissions/selectors.js"}],[220,{"@metamask/transaction-controller":1974,lodash:3587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.TARGET_DATE=r.StuckTransactionError=void 0,r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=s,function(e){var t;const r=(null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions)??[];for(const e of r)if(e.time<o&&a.includes(e.status)){e.status=i.TransactionStatus.failed;e.error=l}}(t.data),t},r.version=void 0;var n=e("lodash"),i=e("@metamask/transaction-controller");const s=r.version=116,o=r.TARGET_DATE=new Date("2023-12-08T00:00:00Z").getTime(),a=[i.TransactionStatus.approved,i.TransactionStatus.signed],l=r.StuckTransactionError={name:"StuckTransactionDueToStatus",message:"Transaction is stuck due to status - migration 115"}}}},{package:"$root$",file:"app/scripts/migrations/116.ts"}],[221,{"@metamask/transaction-controller":1974,lodash:3587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t,r){return function(s){const o=(0,n.cloneDeep)(s);o.meta.version=e;try{const e=function(e,t,r){const n=e,{TransactionController:s}=n;if(s&&s.transactions){const{transactions:e}=s;n.TransactionController.transactions=e.map((e=>t(e)?(e.status=i.TransactionStatus.failed,e.err={message:r,note:`Tx automatically failed by migration because ${r}`},e):e))}return n}(o.data,r,t);o.data=e}catch(t){console.warn(`MetaMask Migration #${e}${t.stack}`)}return Promise.resolve(o)}};var n=e("lodash"),i=e("@metamask/transaction-controller")}}},{package:"$root$",file:"app/scripts/migrations/fail-tx.js"}],[222,{"./002":99,"./003":100,"./004":101,"./005":102,"./006":103,"./007":104,"./008":105,"./009":106,"./010":107,"./011":108,"./012":109,"./013":110,"./014":111,"./015":112,"./016":113,"./017":114,"./018":115,"./019":116,"./020":117,"./021":118,"./022":119,"./023":120,"./024":121,"./025":122,"./026":123,"./027":124,"./028":125,"./029":126,"./030":127,"./031":128,"./032":129,"./033":130,"./034":131,"./035":132,"./036":133,"./037":134,"./038":135,"./039":136,"./040":137,"./041":138,"./042":139,"./043":140,"./044":141,"./045":142,"./046":143,"./047":144,"./048":145,"./049":146,"./050":147,"./051":148,"./052":149,"./053":150,"./054":151,"./055":152,"./056":153,"./057":154,"./058":155,"./059":156,"./060":157,"./061":158,"./062":159,"./063":160,"./064":161,"./065":162,"./066":163,"./067":164,"./068":165,"./069":166,"./070":167,"./071":168,"./072":169,"./073":170,"./074":171,"./075":172,"./076":173,"./077":178,"./078":179,"./079":180,"./080":181,"./081":182,"./082":183,"./083":184,"./084":185,"./085":186,"./086":187,"./087":188,"./088":189,"./089":190,"./090":191,"./091":192,"./092":196,"./092.1":193,"./092.2":194,"./092.3":195,"./093":197,"./094":198,"./095":199,"./096":200,"./097":201,"./098":202,"./099":203,"./100":204,"./101":205,"./102":206,"./103":207,"./104":208,"./105":209,"./106":210,"./107":211,"./108":212,"./109":213,"./110":214,"./111":215,"./112":216,"./113":217,"./114":218,"./115":219,"./116":220},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;const n=[e("./002").default,e("./003").default,e("./004").default,e("./005").default,e("./006").default,e("./007").default,e("./008").default,e("./009").default,e("./010").default,e("./011").default,e("./012").default,e("./013").default,e("./014").default,e("./015").default,e("./016").default,e("./017").default,e("./018").default,e("./019").default,e("./020").default,e("./021").default,e("./022").default,e("./023").default,e("./024").default,e("./025").default,e("./026").default,e("./027").default,e("./028").default,e("./029").default,e("./030").default,e("./031").default,e("./032").default,e("./033").default,e("./034").default,e("./035").default,e("./036").default,e("./037").default,e("./038").default,e("./039").default,e("./040").default,e("./041").default,e("./042").default,e("./043").default,e("./044").default,e("./045").default,e("./046").default,e("./047").default,e("./048").default,e("./049").default,e("./050").default,e("./051").default,e("./052").default,e("./053").default,e("./054").default,e("./055").default,e("./056").default,e("./057").default,e("./058").default,e("./059").default,e("./060").default,e("./061").default,e("./062").default,e("./063").default,e("./064").default,e("./065").default,e("./066").default,e("./067").default,e("./068").default,e("./069").default,e("./070").default,e("./071").default,e("./072").default,e("./073").default,e("./074").default,e("./075").default,e("./076").default,e("./077").default,e("./078"),e("./079").default,e("./080").default,e("./081"),e("./082"),e("./083"),e("./084"),e("./085"),e("./086"),e("./087"),e("./088"),e("./089"),e("./090"),e("./091"),e("./092"),e("./092.1"),e("./092.2"),e("./092.3"),e("./093"),e("./094"),e("./095"),e("./096"),e("./097"),e("./098"),e("./099"),e("./100"),e("./101"),e("./102"),e("./103"),e("./104"),e("./105"),e("./106"),e("./107"),e("./108"),e("./109"),e("./110"),e("./111"),e("./112"),e("./113"),e("./114"),e("./115"),e("./116")];r.default=n}}},{package:"$root$",file:"app/scripts/migrations/index.js"}],[224,{"@metamask/message-signing-snap/dist/preinstalled-snap.json":1412},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=e("@metamask/message-signing-snap/dist/preinstalled-snap.json"))&&n.__esModule?n:{default:n};const s=Object.freeze([i.default]);r.default=s}}},{package:"$root$",file:"app/scripts/snaps/preinstalled-snaps.ts"}],[2251,{"@metamask/eth-sig-util":1190,tslib:4162},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.transformTypedData=void 0;const n=e("tslib").__importStar(e("@metamask/eth-sig-util"));function i(e){switch(Object.prototype.toString.call(e)){case"[object Object]":{const t=Object.keys(e).map((t=>[t,i(e[t])]));return Object.fromEntries(t)}case"[object Array]":return e.map((e=>i(e)));case"[object BigInt]":return e.toString();default:return e}}r.transformTypedData=(e,t)=>{if(!t)throw new Error("Trezor: Only version 4 of typed data signing is supported");const r=n.SignTypedDataVersion.V4,{types:s,primaryType:o,domain:a,message:l}=n.TypedDataUtils.sanitizeData(e),c=n.TypedDataUtils.hashStruct("EIP712Domain",i(a),s,r).toString("hex");let u=null;return"EIP712Domain"!==o&&(u=n.TypedDataUtils.hashStruct(o,i(l),s,r).toString("hex")),Object.assign({domain_separator_hash:c,message_hash:u},e)},r.default=r.transformTypedData}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-plugin-ethereum",file:"node_modules/@trezor/connect-plugin-ethereum/lib/index.js"}],[23,{"../../../../shared/constants/permissions":4308,"@metamask/permission-controller":1519,"@metamask/snaps-rpc-methods":1901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.unrestrictedMethods=r.getPermissionSpecifications=r.getCaveatSpecifications=void 0;var n=e("@metamask/permission-controller"),i=e("@metamask/snaps-rpc-methods"),s=e("../../../../shared/constants/permissions");const o=Object.freeze({...s.RestrictedMethods}),a=Object.freeze({[s.CaveatTypes.restrictReturnedAccounts]:e=>({type:s.CaveatTypes.restrictReturnedAccounts,value:e})});r.getCaveatSpecifications=({getInternalAccounts:e})=>({[s.CaveatTypes.restrictReturnedAccounts]:{type:s.CaveatTypes.restrictReturnedAccounts,decorator:(e,t)=>async r=>(await e(r)).filter((e=>t.value.includes(e))),validator:(t,r,n)=>function(e,t){if(!Array.isArray(e)||0===e.length)throw new Error(`${o.eth_accounts} error: Expected non-empty array of Ethereum addresses.`);const r=t();e.forEach((e=>{if(!e||"string"!=typeof e)throw new Error(`${o.eth_accounts} error: Expected an array of Ethereum addresses. Received: "${e}".`);if(!r.some((t=>t.address.toLowerCase()===e.toLowerCase())))throw new Error(`${o.eth_accounts} error: Received unrecognized address: "${e}".`)}))}(t.value,e)},...i.caveatSpecifications,...i.endowmentCaveatSpecifications});r.getPermissionSpecifications=({getAllAccounts:e,getInternalAccounts:t,captureKeyringTypesWithMissingIdentities:r})=>({[o.eth_accounts]:{permissionType:n.PermissionType.RestrictedMethod,targetName:o.eth_accounts,allowedCaveats:[s.CaveatTypes.restrictReturnedAccounts],factory:(e,t)=>{if(Array.isArray(e.caveats))throw new Error(`${o.eth_accounts} error: Received unexpected caveats. Any permitted caveats will be added automatically.`);if(!t.approvedAccounts)throw new Error(`${o.eth_accounts} error: No approved accounts specified.`);return(0,n.constructPermission)({...e,caveats:[a[s.CaveatTypes.restrictReturnedAccounts](t.approvedAccounts)]})},methodImplementation:async n=>{const i=await e(),s=t();return i.sort(((e,t)=>{const n=s.find((t=>t.address.toLowerCase()===e.toLowerCase())),o=s.find((e=>e.address.toLowerCase()===t.toLowerCase()));if(!n)throw r(s,i),new Error(`Missing identity for address: "${e}".`);if(!o)throw r(s,i),new Error(`Missing identity for address: "${t}".`);return n.metadata.lastSelected===o.metadata.lastSelected?0:n.metadata.lastSelected===undefined?1:o.metadata.lastSelected===undefined?-1:o.metadata.lastSelected-n.metadata.lastSelected}))},validator:(e,t,r)=>{const{caveats:n}=e;if(!n||1!==n.length||n[0].type!==s.CaveatTypes.restrictReturnedAccounts)throw new Error(`${o.eth_accounts} error: Invalid caveats. There must be a single caveat of type "${s.CaveatTypes.restrictReturnedAccounts}".`)}}});r.unrestrictedMethods=Object.freeze(["eth_blockNumber","eth_call","eth_chainId","eth_coinbase","eth_decrypt","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getEncryptionPublicKey","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleByBlockHashAndIndex","eth_getUncleByBlockNumberAndIndex","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_getWork","eth_hashrate","eth_mining","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_protocolVersion","eth_sendRawTransaction","eth_sendTransaction","eth_sign","eth_signTypedData","eth_signTypedData_v1","eth_signTypedData_v3","eth_signTypedData_v4","eth_submitHashrate","eth_submitWork","eth_syncing","eth_uninstallFilter","metamask_getProviderState","metamask_watchAsset","net_listening","net_peerCount","net_version","personal_ecRecover","personal_sign","wallet_watchAsset","web3_clientVersion","web3_sha3"])}}},{package:"$root$",file:"app/scripts/controllers/permissions/specifications.js"}],[2364,{"./types.js":2365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./types.js");const i={type:"xstate.init"},s="xstate.assign";function o(e){return e===undefined?[]:[].concat(e)}function a(e,t){return"string"==typeof(e="string"==typeof e&&t&&t[e]?t[e]:e)?{type:e}:"function"==typeof e?{type:e.name,exec:e}:e}function l(e){return t=>e===t}function c(e){return"string"==typeof e?{type:e}:e}function u(e,t){return{value:e,context:t,actions:[],changed:!1,matches:l(e)}}function d(e,t,r){let n=t,i=!1;return[e.filter((e=>{if(e.type===s){i=!0;let t=Object.assign({},n);return"function"==typeof e.assignment?t=e.assignment(n,r):Object.keys(e.assignment).forEach((i=>{t[i]="function"==typeof e.assignment[i]?e.assignment[i](n,r):e.assignment[i]})),n=t,!1}return!0})),n,i]}const h=(e,t)=>e.actions.forEach((({exec:r})=>r&&r(e.context,t)));Object.defineProperty(r,"InterpreterStatus",{enumerable:!0,get:function(){return n.InterpreterStatus}}),r.assign=function(e){return{type:s,assignment:e}},r.createMachine=function(e,t={}){const[r,n]=d(o(e.states[e.initial].entry).map((e=>a(e,t.actions))),e.context,i),s={config:e,_options:t,initialState:{value:e.initial,actions:r,context:n,matches:l(e.initial)},transition:(t,r)=>{const{value:n,context:i}="string"==typeof t?{value:t,context:e.context}:t,h=c(r),f=e.states[n];if(f.on){const t=o(f.on[h.type]);for(const r of t){if(r===undefined)return u(n,i);const{target:t,actions:c=[],cond:p=(()=>!0)}="string"==typeof r?{target:r}:r,m=t===undefined,g=null!=t?t:n,v=e.states[g];if(p(i,h)){const e=(m?o(c):[].concat(f.exit,c,v.entry).filter((e=>e))).map((e=>a(e,s._options.actions))),[r,u,p]=d(e,i,h),g=null!=t?t:n;return{value:g,context:u,actions:r,changed:t!==n||r.length>0||p,matches:l(g)}}}}return u(n,i)}};return s},r.interpret=function(e){let t=e.initialState,r=n.InterpreterStatus.NotStarted;const s=new Set,o={_machine:e,send:i=>{r===n.InterpreterStatus.Running&&(t=e.transition(t,i),h(t,c(i)),s.forEach((e=>e(t))))},subscribe:e=>(s.add(e),e(t),{unsubscribe:()=>s.delete(e)}),start:s=>{if(s){const r="object"==typeof s?s:{context:e.config.context,value:s};t={value:r.value,actions:[],context:r.context,matches:l(r.value)}}else t=e.initialState;return r=n.InterpreterStatus.Running,h(t,i),o},stop:()=>(r=n.InterpreterStatus.Stopped,s.clear(),o),get state(){return t},get status(){return r}};return o}}}},{package:"@metamask/snaps-controllers>@xstate/fsm",file:"node_modules/@xstate/fsm/lib/index.js"}],[2365,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n;Object.defineProperty(r,"__esModule",{value:!0}),r.InterpreterStatus=void 0,(n=r.InterpreterStatus||(r.InterpreterStatus={}))[n.NotStarted=0]="NotStarted",n[n.Running=1]="Running",n[n.Stopped=2]="Stopped"}}},{package:"@metamask/snaps-controllers>@xstate/fsm",file:"node_modules/@xstate/fsm/lib/types.js"}],[24,{"../../../shared/constants/hardware-wallets":4298,"../../../shared/constants/network":4304,"../../../shared/constants/preferences":4309,"@metamask/eth-sig-util":1190,"@metamask/obs-store":1503},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/obs-store"),i=e("@metamask/eth-sig-util"),s=e("../../../shared/constants/network"),o=e("../../../shared/constants/hardware-wallets"),a=e("../../../shared/constants/preferences");const l={[s.CHAIN_IDS.MAINNET]:!0,[s.CHAIN_IDS.LINEA_MAINNET]:!0},c={[s.CHAIN_IDS.GOERLI]:!0,[s.CHAIN_IDS.SEPOLIA]:!0,[s.CHAIN_IDS.LINEA_GOERLI]:!0,[s.CHAIN_IDS.LINEA_SEPOLIA]:!0};r.default=class{constructor(e={}){var t,r,i;const u=Object.values(e.networkConfigurations).reduce(((e,t)=>(e[t.chainId]=!0,e)),{}),d={useBlockie:!1,useNonceField:!1,usePhishDetect:!0,dismissSeedBackUpReminder:!1,disabledRpcMethodPreferences:{eth_sign:!1},useMultiAccountBalanceChecker:!0,hasDismissedOpenSeaToBlockaidBanner:!1,useSafeChainsListValidation:!0,useTokenDetection:(null==e||null===(t=e.initState)||void 0===t?void 0:t.useTokenDetection)??!0,useNftDetection:!1,use4ByteResolution:!0,useCurrencyRateCheck:!0,useRequestQueue:!1,openSeaEnabled:!1,securityAlertsEnabled:!0,addSnapAccountEnabled:!1,advancedGasFee:{},featureFlags:{},incomingTransactionsPreferences:{...l,...u,...c},knownMethodData:{},currentLocale:e.initLangCode,identities:{},lostIdentities:{},forgottenPassword:!1,preferences:{autoLockTimeLimit:undefined,showExtensionInFullSizeView:!1,showFiatInTestnets:!1,showTestNetworks:!1,smartTransactionsOptInStatus:null,useNativeCurrencyAsPrimaryCurrency:!0,hideZeroBalanceTokens:!1,petnamesEnabled:!0,redesignedConfirmationsEnabled:!1,featureNotificationsEnabled:!1},ipfsGateway:s.IPFS_DEFAULT_GATEWAY_URL,isIpfsGatewayEnabled:!0,useAddressBarEnsResolution:!0,ledgerTransportType:window.navigator.hid?o.LedgerTransportTypes.webhid:o.LedgerTransportTypes.u2f,snapRegistryList:{},theme:a.ThemeType.os,snapsAddSnapAccountModalDismissed:!1,useExternalNameSources:!0,useTransactionSimulations:!0,enableMV3TimestampSave:!0,useExternalServices:!0,...e.initState};this.network=e.network,this.store=new n.ObservableStore(d),this.store.setMaxListeners(13),e.onKeyringStateChange((e=>{const t=new Set;for(const r of e.keyrings)for(const e of r.accounts)t.add(e);t.size>0&&this.syncAddresses(Array.from(t))})),this.messagingSystem=e.messenger,null===(r=this.messagingSystem)||void 0===r||r.registerActionHandler("PreferencesController:getState",(()=>this.store.getState())),null===(i=this.messagingSystem)||void 0===i||i.registerInitialEventPayload({eventType:"PreferencesController:stateChange",getPayload:()=>[this.store.getState(),[]]}),global.setPreference=(e,t)=>this.setFeatureFlag(e,t)}setPasswordForgotten(e){this.store.updateState({forgottenPassword:e})}setUseBlockie(e){this.store.updateState({useBlockie:e})}setUseNonceField(e){this.store.updateState({useNonceField:e})}setUsePhishDetect(e){this.store.updateState({usePhishDetect:e})}setUseMultiAccountBalanceChecker(e){this.store.updateState({useMultiAccountBalanceChecker:e})}dismissOpenSeaToBlockaidBanner(){this.store.updateState({hasDismissedOpenSeaToBlockaidBanner:!0})}setUseSafeChainsListValidation(e){this.store.updateState({useSafeChainsListValidation:e})}toggleExternalServices(e){this.store.updateState({useExternalServices:e}),this.setUseTokenDetection(e),this.setUseCurrencyRateCheck(e),this.setUsePhishDetect(e),this.setUseAddressBarEnsResolution(e),this.setOpenSeaEnabled(e),this.setUseNftDetection(e)}setUseTokenDetection(e){this.store.updateState({useTokenDetection:e})}setUseNftDetection(e){this.store.updateState({useNftDetection:e})}setUse4ByteResolution(e){this.store.updateState({use4ByteResolution:e})}setUseCurrencyRateCheck(e){this.store.updateState({useCurrencyRateCheck:e})}setUseRequestQueue(e){this.store.updateState({useRequestQueue:e})}setOpenSeaEnabled(e){this.store.updateState({openSeaEnabled:e})}setSecurityAlertsEnabled(e){this.store.updateState({securityAlertsEnabled:e})}setAddSnapAccountEnabled(e){this.store.updateState({addSnapAccountEnabled:e})}setUseExternalNameSources(e){this.store.updateState({useExternalNameSources:e})}setUseTransactionSimulations(e){this.store.updateState({useTransactionSimulations:e})}setAdvancedGasFee({chainId:e,gasFeePreferences:t}){const{advancedGasFee:r}=this.store.getState();this.store.updateState({advancedGasFee:{...r,[e]:t}})}setTheme(e){this.store.updateState({theme:e})}addKnownMethodData(e,t){const{knownMethodData:r}=this.store.getState();r[e]=t,this.store.updateState({knownMethodData:r})}setCurrentLocale(e){const t=["ar","dv","fa","he","ku"].includes(e)?"rtl":"auto";return this.store.updateState({currentLocale:e,textDirection:t}),t}setAddresses(e){const t=this.store.getState().identities,r=e.reduce(((e,r,n)=>{const i=t[r]||{};return e[r]={name:`Account ${n+1}`,address:r,...i},e}),{});this.store.updateState({identities:r})}removeAddress(e){const{identities:t}=this.store.getState();if(!t[e])throw new Error(`${e} can't be deleted cause it was not found`);if(delete t[e],this.store.updateState({identities:t}),e===this.getSelectedAddress()){const[e]=Object.keys(t);this.setSelectedAddress(e)}return e}addAddresses(e){const{identities:t}=this.store.getState();e.forEach((e=>{if(t[e])return;const r=Object.keys(t).length;t[e]={name:`Account ${r+1}`,address:e}})),this.store.updateState({identities:t})}syncAddresses(e){if(!Array.isArray(e)||0===e.length)throw new Error("Expected non-empty array of addresses. Error #11201");const{identities:t,lostIdentities:r}=this.store.getState(),n={};Object.keys(t).forEach((r=>{e.includes(r)||(n[r]=t[r],delete t[r])})),Object.keys(n).length>0&&Object.keys(n).forEach((e=>{r[e]=n[e]})),this.store.updateState({identities:t,lostIdentities:r}),this.addAddresses(e);let i=this.getSelectedAddress();return e.includes(i)||([i]=e,this.setSelectedAddress(i)),i}setSelectedAddress(e){const t=(0,i.normalize)(e),{identities:r}=this.store.getState(),n=r[t];if(!n)throw new Error(`Identity for '${t} not found`);n.lastSelected=Date.now(),this.store.updateState({identities:r,selectedAddress:t})}getSelectedAddress(){return this.store.getState().selectedAddress}getUseRequestQueue(){return this.store.getState().useRequestQueue}async setAccountLabel(e,t){if(!e)throw new Error(`setAccountLabel requires a valid address, got ${String(e)}`);const r=(0,i.normalize)(e),{identities:n}=this.store.getState();return n[r]=n[r]||{},n[r].name=t,this.store.updateState({identities:n}),t}async setFeatureFlag(e,t){const r={...this.store.getState().featureFlags,[e]:t};return this.store.updateState({featureFlags:r}),r}async setPreference(e,t){const r={...this.getPreferences(),[e]:t};return this.store.updateState({preferences:r}),r}getPreferences(){return this.store.getState().preferences}getIpfsGateway(){return this.store.getState().ipfsGateway}async setIpfsGateway(e){return this.store.updateState({ipfsGateway:e}),e}async setIsIpfsGatewayEnabled(e){this.store.updateState({isIpfsGatewayEnabled:e})}async setUseAddressBarEnsResolution(e){this.store.updateState({useAddressBarEnsResolution:e})}setLedgerTransportPreference(e){return this.store.updateState({ledgerTransportType:e}),e}async setDismissSeedBackUpReminder(e){await this.store.updateState({dismissSeedBackUpReminder:e})}async setDisabledRpcMethodPreference(e,t){const r={...this.store.getState().disabledRpcMethodPreferences,[e]:t};this.store.updateState({disabledRpcMethodPreferences:r})}setIncomingTransactionsPreferences(e,t){const r={...this.store.getState().incomingTransactionsPreferences,[e]:t};this.store.updateState({incomingTransactionsPreferences:r})}setServiceWorkerKeepAlivePreference(e){this.store.updateState({enableMV3TimestampSave:e})}getRpcMethodPreferences(){return this.store.getState().disabledRpcMethodPreferences}setSnapsAddSnapAccountModalDismissed(e){this.store.updateState({snapsAddSnapAccountModalDismissed:e})}}}}},{package:"$root$",file:"app/scripts/controllers/preferences.js"}],[25,{"../../../shared/constants/common":4294,"../../../shared/constants/gas":4297,"../../../shared/constants/metametrics":4302,"../../../shared/constants/network":4304,"../../../shared/constants/smartTransactions":4311,"../../../shared/constants/swaps":4313,"../../../shared/constants/time":4315,"../../../shared/lib/fetch-with-cache":4320,"../../../shared/lib/swaps-utils":4323,"../../../shared/lib/transactions-controller-utils":4326,"../../../shared/modules/Numeric":4328,"../../../shared/modules/conversion.utils":4332,"../../../shared/modules/string-utils":4352,"../../../shared/modules/swaps.utils":4353,"@ethersproject/contracts":452,"@ethersproject/providers":483,"@metamask/obs-store":1503,"@sentry/browser":2128,"bignumber.js":2649,"human-standard-token-abi":3359,lodash:3587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.utils=r.default=void 0;var n=e("@ethersproject/providers"),i=e("@ethersproject/contracts"),s=E(e("bignumber.js")),o=e("@metamask/obs-store"),a=e("lodash"),l=E(e("human-standard-token-abi")),c=e("@sentry/browser"),u=e("../../../shared/modules/conversion.utils"),d=e("../../../shared/constants/swaps"),h=e("../../../shared/constants/gas"),f=e("../../../shared/constants/network"),p=e("../../../shared/constants/metametrics"),m=e("../../../shared/constants/smartTransactions"),g=e("../../../shared/modules/swaps.utils"),v=e("../../../shared/lib/swaps-utils"),y=E(e("../../../shared/lib/fetch-with-cache")),b=e("../../../shared/constants/time"),w=e("../../../shared/modules/string-utils"),_=e("../../../shared/lib/transactions-controller-utils"),k=e("../../../shared/modules/Numeric"),S=e("../../../shared/constants/common");function E(e){return e&&e.__esModule?e:{default:e}}const T=25e5,j=b.MINUTE;function A(e=25e5,t=0,r=0){const n=new s.default(e,10).minus(t,10);return!n.lt(0)&&n.lt(r,16)?`0x${n.toString(16)}`:r}const P={quotes:{},quotesPollingLimitEnabled:!1,fetchParams:null,tokens:null,tradeTxId:null,approveTxId:null,quotesLastFetched:null,customMaxGas:"",customGasPrice:null,customMaxFeePerGas:null,customMaxPriorityFeePerGas:null,swapsUserFeeLevel:"",selectedAggId:null,customApproveTxData:"",errorKey:"",topAggId:null,routeState:"",swapsFeatureIsLive:!0,saveFetchedQuotes:!1,swapsQuoteRefreshTime:j,swapsQuotePrefetchingRefreshTime:j,swapsStxBatchStatusRefreshTime:m.FALLBACK_SMART_TRANSACTIONS_REFRESH_TIME,swapsStxGetTransactionsRefreshTime:m.FALLBACK_SMART_TRANSACTIONS_REFRESH_TIME,swapsStxMaxFeeMultiplier:m.FALLBACK_SMART_TRANSACTIONS_MAX_FEE_MULTIPLIER,swapsFeatureFlags:{}};function C(e){if(!Array.isArray(e)||0===e.length)throw new Error("Expected non-empty array param.");const t=[...e];if(t.sort(((e,t)=>{const r=new s.default(e.overallValueOfQuote,10),n=new s.default(t.overallValueOfQuote,10);return r.equals(n)?0:r.lessThan(n)?-1:1})),t.length%2==1){const e=t[(t.length-1)/2].overallValueOfQuote;return x(t.filter((t=>e===t.overallValueOfQuote)))}const r=t.length/2,n=r-1,i=t[r].overallValueOfQuote,o=t[n].overallValueOfQuote,a=t.filter((e=>i===e.overallValueOfQuote)),l=t.filter((e=>o===e.overallValueOfQuote)),c=x(a),u=x(l);return{ethFee:new s.default(c.ethFee,10).plus(u.ethFee,10).dividedBy(2).toString(10),metaMaskFeeInEth:new s.default(c.metaMaskFeeInEth,10).plus(u.metaMaskFeeInEth,10).dividedBy(2).toString(10),ethValueOfTokens:new s.default(c.ethValueOfTokens,10).plus(u.ethValueOfTokens,10).dividedBy(2).toString(10)}}function x(e){const t=e.reduce(((e,t)=>({ethFee:e.ethFee.plus(t.ethFee,10),metaMaskFeeInEth:e.metaMaskFeeInEth.plus(t.metaMaskFeeInEth,10),ethValueOfTokens:e.ethValueOfTokens.plus(t.ethValueOfTokens,10)})),{ethFee:new s.default(0,10),metaMaskFeeInEth:new s.default(0,10),ethValueOfTokens:new s.default(0,10)});return{ethFee:t.ethFee.div(e.length,10).toString(10),metaMaskFeeInEth:t.metaMaskFeeInEth.div(e.length,10).toString(10),ethValueOfTokens:t.ethValueOfTokens.div(e.length,10).toString(10)}}r.default=class{constructor({getBufferedGasLimit:e,provider:t,getProviderConfig:r,getTokenRatesState:i,fetchTradesInfo:s=v.fetchTradesInfo,getCurrentChainId:a,getLayer1GasFee:l,getEIP1559GasFeeEstimates:c,trackMetaMetricsEvent:u},d){var h;this.store=new o.ObservableStore({swapsState:{...P,swapsFeatureFlags:(null==d||null===(h=d.swapsState)||void 0===h?void 0:h.swapsFeatureFlags)||{}}}),this.resetState=()=>{var e;this.store.updateState({swapsState:{...P,swapsFeatureFlags:null==d||null===(e=d.swapsState)||void 0===e?void 0:e.swapsFeatureFlags}})},this._fetchTradesInfo=s,this._getCurrentChainId=a,this._getEIP1559GasFeeEstimates=c,this._getLayer1GasFee=l,this.getBufferedGasLimit=e,this.getTokenRatesState=i,this.trackMetaMetricsEvent=u,this.pollCount=0,this.getProviderConfig=r,this.indexOfNewestCallInFlight=0,this.provider=t,this.ethersProvider=new n.Web3Provider(t),this._ethersProviderChainId=this._getCurrentChainId()}async fetchSwapsNetworkConfig(e){const t=await(0,y.default)({url:(0,v.getBaseApi)("network",e),fetchOptions:{method:"GET"},cacheOptions:{cacheRefreshTime:6e5},functionName:"fetchSwapsNetworkConfig"}),{refreshRates:r,parameters:n={}}=t||{};if(!r||"number"!=typeof r.quotes||"number"!=typeof r.quotesPrefetching)throw new Error(`MetaMask - invalid response for refreshRates: ${t}`);return{quotes:1e3*r.quotes,quotesPrefetching:1e3*r.quotesPrefetching,stxGetTransactions:1e3*r.stxGetTransactions,stxBatchStatus:1e3*r.stxBatchStatus,stxStatusDeadline:r.stxStatusDeadline,stxMaxFeeMultiplier:n.stxMaxFeeMultiplier}}async _setSwapsNetworkConfig(){var e,t,r,n,i,s;const o=this._getCurrentChainId();let a;try{a=await this.fetchSwapsNetworkConfig(o)}catch(e){console.error("Request for Swaps network config failed: ",e)}const{swapsState:l}=this.store.getState();this.store.updateState({swapsState:{...l,swapsQuoteRefreshTime:(null===(e=a)||void 0===e?void 0:e.quotes)||j,swapsQuotePrefetchingRefreshTime:(null===(t=a)||void 0===t?void 0:t.quotesPrefetching)||j,swapsStxGetTransactionsRefreshTime:(null===(r=a)||void 0===r?void 0:r.stxGetTransactions)||m.FALLBACK_SMART_TRANSACTIONS_REFRESH_TIME,swapsStxBatchStatusRefreshTime:(null===(n=a)||void 0===n?void 0:n.stxBatchStatus)||m.FALLBACK_SMART_TRANSACTIONS_REFRESH_TIME,swapsStxStatusDeadline:(null===(i=a)||void 0===i?void 0:i.stxStatusDeadline)||m.FALLBACK_SMART_TRANSACTIONS_DEADLINE,swapsStxMaxFeeMultiplier:(null===(s=a)||void 0===s?void 0:s.stxMaxFeeMultiplier)||m.FALLBACK_SMART_TRANSACTIONS_MAX_FEE_MULTIPLIER}})}pollForNewQuotes(){const{swapsState:{swapsQuoteRefreshTime:e,swapsQuotePrefetchingRefreshTime:t,quotesPollingLimitEnabled:r}}=this.store.getState(),n=r?e:t;this.pollingTimeout=setTimeout((()=>{var e;const{swapsState:t}=this.store.getState();this.fetchAndSetQuotes(t.fetchParams,null===(e=t.fetchParams)||void 0===e?void 0:e.metaData,!0)}),n)}stopPollingForQuotes(){this.pollingTimeout&&clearTimeout(this.pollingTimeout)}async fetchAndSetQuotes(e,t={},r){const{chainId:i}=t;i!==this._ethersProviderChainId&&(this.ethersProvider=new n.Web3Provider(this.provider),this._ethersProviderChainId=i);const{swapsState:{quotesPollingLimitEnabled:s,saveFetchedQuotes:o}}=this.store.getState();if(!e)return null;r||(this.pollCount=0),clearTimeout(this.pollingTimeout),r||this.setSwapsErrorKey("");const l=this.indexOfNewestCallInFlight+1;this.indexOfNewestCallInFlight=l,o||this.setSaveFetchedQuotes(!0);let[c]=await Promise.all([this._fetchTradesInfo(e,{...t}),this._setSwapsNetworkConfig()]);const{swapsState:{saveFetchedQuotes:u}}=this.store.getState();if(!u)return[{},null];c=(0,a.mapValues)(c,(e=>({...e,sourceTokenInfo:t.sourceTokenInfo,destinationTokenInfo:t.destinationTokenInfo}))),(i===f.CHAIN_IDS.OPTIMISM||i===f.CHAIN_IDS.BASE)&&Object.values(c).length>0&&await Promise.all(Object.values(c).map((async e=>{if(e.trade){const t=await this._getLayer1GasFee({transactionParams:e.trade,chainId:i});e.multiLayerL1TradeFeeTotal=t}return e})));const h=Date.now();let p=!1;if(!(0,g.isSwapsDefaultTokenAddress)(e.sourceToken,i)&&Object.values(c).length){const t=await this._getERC20Allowance(e.sourceToken,e.fromAddress,i),[n]=Object.values(c);if(p=n.approvalNeeded&&t.eq(0)&&"wrappedNative"!==n.aggregator,p){if(!r){const{gasLimit:e}=await this.timedoutGasReturn(n.approvalNeeded,n.aggregator);c=(0,a.mapValues)(c,(t=>({...t,approvalNeeded:{...t.approvalNeeded,gas:e||d.DEFAULT_ERC20_APPROVE_GAS}})))}}else c=(0,a.mapValues)(c,(e=>({...e,approvalNeeded:null})))}let m=null;if(p||null!=e&&e.balanceError||(c=await this.getAllQuotesWithGasEstimates(c)),0===Object.values(c).length)this.setSwapsErrorKey(d.QUOTES_NOT_AVAILABLE_ERROR);else{const[e,t]=await this._findTopQuoteAndCalculateSavings(c);m=e,c=t}if(this.indexOfNewestCallInFlight!==l)throw new Error(d.SWAPS_FETCH_ORDER_CONFLICT);const{swapsState:v}=this.store.getState();let{selectedAggId:y}=v;return c[y]||(y=null),this.store.updateState({swapsState:{...v,quotes:c,fetchParams:{...e,metaData:t},quotesLastFetched:h,selectedAggId:y,topAggId:m}}),s&&(this.pollCount+=1),!s||this.pollCount<4?(this.pollForNewQuotes(),[c,m]):(this.resetPostFetchState(),this.setSwapsErrorKey(d.QUOTES_EXPIRED_ERROR),null)}safeRefetchQuotes(){const{swapsState:e}=this.store.getState();!this.pollingTimeout&&e.fetchParams&&this.fetchAndSetQuotes(e.fetchParams)}setSelectedQuoteAggId(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,selectedAggId:e}})}setSwapsTokens(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,tokens:e}})}clearSwapsQuotes(){const{swapsState:e}=this.store.getState();this.store.updateState({swapsState:{...e,quotes:{}}})}setSwapsErrorKey(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,errorKey:e}})}async getAllQuotesWithGasEstimates(e){const t=await Promise.all(Object.values(e).map((async e=>{const{gasLimit:t,simulationFails:r}=await this.timedoutGasReturn(e.trade,e.aggregator);return[t,r,e.aggregator]}))),r={};return t.forEach((([t,n,i])=>{if(t&&!n){const n=A(e[i].maxGas,e[i].estimatedRefund,t);r[i]={...e[i],gasEstimate:t,gasEstimateWithRefund:n}}else e[i].approvalNeeded&&(r[i]=e[i])})),r}timedoutGasReturn(e,t=""){return new Promise((r=>{let n=!1;const i=setTimeout((()=>{n=!0,this.trackMetaMetricsEvent({event:p.MetaMetricsEventName.QuoteError,category:p.MetaMetricsEventCategory.Swaps,properties:{error_type:p.MetaMetricsEventErrorType.GasTimeout,aggregator:t}}),r({gasLimit:null,simulationFails:!0})}),5*b.SECOND),s={data:e.data,from:e.from,to:e.to,value:e.value};this.getBufferedGasLimit({txParams:s},1).then((({gasLimit:e,simulationFails:t})=>{n||(clearTimeout(i),r({gasLimit:e,simulationFails:t}))})).catch((e=>{(0,c.captureException)(e,{extra:{aggregator:t}}),n||(clearTimeout(i),r({gasLimit:null,simulationFails:!0}))}))}))}async setInitialGasEstimate(e){const{swapsState:t}=this.store.getState(),r={...t.quotes[e]},{gasLimit:n,simulationFails:i}=await this.timedoutGasReturn(r.trade,r.aggregator);if(n&&!i){const e=A(r.maxGas,r.estimatedRefund,n);r.gasEstimate=n,r.gasEstimateWithRefund=e}this.store.updateState({swapsState:{...t,quotes:{...t.quotes,[e]:r}}})}setApproveTxId(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,approveTxId:e}})}setTradeTxId(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,tradeTxId:e}})}setQuotesLastFetched(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,quotesLastFetched:e}})}setSwapsTxGasPrice(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,customGasPrice:e}})}setSwapsTxMaxFeePerGas(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,customMaxFeePerGas:e}})}setSwapsUserFeeLevel(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,swapsUserFeeLevel:e}})}setSwapsQuotesPollingLimitEnabled(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,quotesPollingLimitEnabled:e}})}setSwapsTxMaxFeePriorityPerGas(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,customMaxPriorityFeePerGas:e}})}setSwapsTxGasLimit(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,customMaxGas:e}})}setCustomApproveTxData(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,customApproveTxData:e}})}setBackgroundSwapRouteState(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,routeState:e}})}setSaveFetchedQuotes(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,saveFetchedQuotes:e}})}setSwapsLiveness(e){const{swapsState:t}=this.store.getState(),{swapsFeatureIsLive:r}=e;this.store.updateState({swapsState:{...t,swapsFeatureIsLive:r}})}setSwapsFeatureFlags(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,swapsFeatureFlags:e}})}resetPostFetchState(){const{swapsState:e}=this.store.getState();this.store.updateState({swapsState:{...P,tokens:e.tokens,fetchParams:e.fetchParams,swapsFeatureIsLive:e.swapsFeatureIsLive,swapsQuoteRefreshTime:e.swapsQuoteRefreshTime,swapsQuotePrefetchingRefreshTime:e.swapsQuotePrefetchingRefreshTime,swapsFeatureFlags:e.swapsFeatureFlags}}),clearTimeout(this.pollingTimeout)}resetSwapsState(){const{swapsState:e}=this.store.getState();this.store.updateState({swapsState:{...P,swapsQuoteRefreshTime:e.swapsQuoteRefreshTime,swapsQuotePrefetchingRefreshTime:e.swapsQuotePrefetchingRefreshTime,swapsFeatureFlags:e.swapsFeatureFlags}}),clearTimeout(this.pollingTimeout)}async _findTopQuoteAndCalculateSavings(e={}){const{contractExchangeRates:t}=this.getTokenRatesState(),{swapsState:{customGasPrice:r,customMaxPriorityFeePerGas:n}}=this.store.getState(),i=this._getCurrentChainId();if(!Object.keys(e).length)return{};const o=(0,a.cloneDeep)(e),{gasFeeEstimates:l,gasEstimateType:c}=await this._getEIP1559GasFeeEstimates();let d="0x0";if(c===h.GasEstimateTypes.feeMarket){const{high:{suggestedMaxPriorityFeePerGas:e},estimatedBaseFee:t}=l,r=(0,u.decGWEIToHexWEI)(e),i=new k.Numeric(t,10,S.EtherDenomination.GWEI).toDenomination(S.EtherDenomination.WEI);d=new k.Numeric(n||r,16).add(i).round(6).toString()}else c===h.GasEstimateTypes.legacy?d=r||(0,u.decGWEIToHexWEI)(l.high):c===h.GasEstimateTypes.ethGasPrice&&(d=r||(0,u.decGWEIToHexWEI)(l.gasPrice));let f=null,p=null;Object.values(o).forEach((e=>{const{aggregator:r,approvalNeeded:n,averageGas:o,destinationAmount:a=0,destinationToken:l,destinationTokenInfo:c,gasEstimateWithRefund:h,sourceAmount:m,sourceToken:v,trade:y,fee:b,multiLayerL1TradeFeeTotal:E}=e,j=(h?new s.default(h,16):new s.default(o||T,10)).plus((null==n?void 0:n.gas)||"0x0",16).toString(16);let A=(0,_.calcGasTotal)(j,d);null!==E&&(A=(0,u.sumHexes)(A||"0x0",E||"0x0"));const P=new k.Numeric(A,16,S.EtherDenomination.WEI).add(new k.Numeric(y.value,16,S.EtherDenomination.WEI)),C=P.toDenomination(S.EtherDenomination.ETH).round(6).value,x=(0,g.isSwapsDefaultTokenAddress)(v,i)?P.minus(new k.Numeric(m,10)).toDenomination(S.EtherDenomination.ETH).round(6).value:C,O=(0,_.calcTokenAmount)(a,c.decimals),M=new s.default(100,10).minus(b,10).div(100),B=O.div(M).minus(O),I=t[Object.keys(t).find((e=>(0,w.isEqualCaseInsensitive)(e,l)))],R=I||1,N=O.times(R.toString(10),10),L=(0,g.isSwapsDefaultTokenAddress)(l,i)?1:I,D=L===undefined?N:N.minus(x,10);e.ethFee=x.toString(10),L!==undefined&&(e.ethValueOfTokens=N.toString(10),e.overallValueOfQuote=D.toString(10),e.metaMaskFeeInEth=B.times(L.toString(10)).toString(10)),(null===p||D.gt(p))&&(f=r,p=D)}));let m=null;if((0,g.isSwapsDefaultTokenAddress)(o[f].destinationToken,i)||Boolean(t[Object.keys(t).find((e=>{var t;return(0,w.isEqualCaseInsensitive)(e,null===(t=o[f])||void 0===t?void 0:t.destinationToken)}))])){const e=o[f];m={};const{ethFee:t,metaMaskFeeInEth:r,ethValueOfTokens:n}=C(Object.values(o));m.performance=new s.default(e.ethValueOfTokens,10).minus(n,10),m.fee=new s.default(t).minus(e.ethFee,10),m.metaMaskFee=e.metaMaskFeeInEth,m.total=m.performance.plus(m.fee).minus(m.metaMaskFee).toString(10),m.performance=m.performance.toString(10),m.fee=m.fee.toString(10),m.medianMetaMaskFee=r,o[f].isBestQuote=!0,o[f].savings=m}return[f,o]}async _getERC20Allowance(e,t,r){const n=new i.Contract(e,l.default,this.ethersProvider);return await n.allowance(t,d.SWAPS_CHAINID_CONTRACT_ADDRESS_MAP[r])}};r.utils={getMedianEthValueQuote:C,meansOfQuotesFeesAndValue:x}}}},{package:"$root$",file:"app/scripts/controllers/swaps.js"}],[2592,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){
/*! MIT License. Copyright 2015-2018 Richard Moore <me@ricmoo.com>. See LICENSE.txt. */
!function(e){function n(e){return parseInt(e)===e}function i(e){if(!n(e.length))return!1;for(var t=0;t<e.length;t++)if(!n(e[t])||e[t]<0||e[t]>255)return!1;return!0}function s(e,t){if(e.buffer&&"Uint8Array"===e.name)return t&&(e=e.slice?e.slice():Array.prototype.slice.call(e)),e;if(Array.isArray(e)){if(!i(e))throw new Error("Array contains invalid value: "+e);return new Uint8Array(e)}if(n(e.length)&&i(e))return new Uint8Array(e);throw new Error("unsupported array-like object")}function o(e){return new Uint8Array(e)}function a(e,t,r,n,i){null==n&&null==i||(e=e.slice?e.slice(n,i):Array.prototype.slice.call(e,n,i)),t.set(e,r)}var l,c={toBytes:function(e){var t=[],r=0;for(e=encodeURI(e);r<e.length;){var n=e.charCodeAt(r++);37===n?(t.push(parseInt(e.substr(r,2),16)),r+=2):t.push(n)}return s(t)},fromBytes:function(e){for(var t=[],r=0;r<e.length;){var n=e[r];n<128?(t.push(String.fromCharCode(n)),r++):n>191&&n<224?(t.push(String.fromCharCode((31&n)<<6|63&e[r+1])),r+=2):(t.push(String.fromCharCode((15&n)<<12|(63&e[r+1])<<6|63&e[r+2])),r+=3)}return t.join("")}},u=(l="0123456789abcdef",{toBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},fromBytes:function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];t.push(l[(240&n)>>4]+l[15&n])}return t.join("")}}),d={16:10,24:12,32:14},h=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],f=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],p=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],m=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],g=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],v=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],y=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],b=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],w=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],_=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],k=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],S=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],E=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],T=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],j=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function A(e){for(var t=[],r=0;r<e.length;r+=4)t.push(e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3]);return t}var P=function(e){if(!(this instanceof P))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:s(e,!0)}),this._prepare()};P.prototype._prepare=function(){var e=d[this.key.length];if(null==e)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var t=0;t<=e;t++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);var r,n=4*(e+1),i=this.key.length/4,s=A(this.key);for(t=0;t<i;t++)r=t>>2,this._Ke[r][t%4]=s[t],this._Kd[e-r][t%4]=s[t];for(var o,a=0,l=i;l<n;){if(o=s[i-1],s[0]^=f[o>>16&255]<<24^f[o>>8&255]<<16^f[255&o]<<8^f[o>>24&255]^h[a]<<24,a+=1,8!=i)for(t=1;t<i;t++)s[t]^=s[t-1];else{for(t=1;t<i/2;t++)s[t]^=s[t-1];o=s[i/2-1],s[i/2]^=f[255&o]^f[o>>8&255]<<8^f[o>>16&255]<<16^f[o>>24&255]<<24;for(t=i/2+1;t<i;t++)s[t]^=s[t-1]}for(t=0;t<i&&l<n;)c=l>>2,u=l%4,this._Ke[c][u]=s[t],this._Kd[e-c][u]=s[t++],l++}for(var c=1;c<e;c++)for(var u=0;u<4;u++)o=this._Kd[c][u],this._Kd[c][u]=S[o>>24&255]^E[o>>16&255]^T[o>>8&255]^j[255&o]},P.prototype.encrypt=function(e){if(16!=e.length)throw new Error("invalid plaintext size (must be 16 bytes)");for(var t=this._Ke.length-1,r=[0,0,0,0],n=A(e),i=0;i<4;i++)n[i]^=this._Ke[0][i];for(var s=1;s<t;s++){for(i=0;i<4;i++)r[i]=m[n[i]>>24&255]^g[n[(i+1)%4]>>16&255]^v[n[(i+2)%4]>>8&255]^y[255&n[(i+3)%4]]^this._Ke[s][i];n=r.slice()}var a,l=o(16);for(i=0;i<4;i++)a=this._Ke[t][i],l[4*i]=255&(f[n[i]>>24&255]^a>>24),l[4*i+1]=255&(f[n[(i+1)%4]>>16&255]^a>>16),l[4*i+2]=255&(f[n[(i+2)%4]>>8&255]^a>>8),l[4*i+3]=255&(f[255&n[(i+3)%4]]^a);return l},P.prototype.decrypt=function(e){if(16!=e.length)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var t=this._Kd.length-1,r=[0,0,0,0],n=A(e),i=0;i<4;i++)n[i]^=this._Kd[0][i];for(var s=1;s<t;s++){for(i=0;i<4;i++)r[i]=b[n[i]>>24&255]^w[n[(i+3)%4]>>16&255]^_[n[(i+2)%4]>>8&255]^k[255&n[(i+1)%4]]^this._Kd[s][i];n=r.slice()}var a,l=o(16);for(i=0;i<4;i++)a=this._Kd[t][i],l[4*i]=255&(p[n[i]>>24&255]^a>>24),l[4*i+1]=255&(p[n[(i+3)%4]>>16&255]^a>>16),l[4*i+2]=255&(p[n[(i+2)%4]>>8&255]^a>>8),l[4*i+3]=255&(p[255&n[(i+1)%4]]^a);return l};var C=function(e){if(!(this instanceof C))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new P(e)};C.prototype.encrypt=function(e){if((e=s(e)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var t=o(e.length),r=o(16),n=0;n<e.length;n+=16)a(e,r,0,n,n+16),a(r=this._aes.encrypt(r),t,n);return t},C.prototype.decrypt=function(e){if((e=s(e)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var t=o(e.length),r=o(16),n=0;n<e.length;n+=16)a(e,r,0,n,n+16),a(r=this._aes.decrypt(r),t,n);return t};var x=function(e,t){if(!(this instanceof x))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else t=o(16);this._lastCipherblock=s(t,!0),this._aes=new P(e)};x.prototype.encrypt=function(e){if((e=s(e)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var t=o(e.length),r=o(16),n=0;n<e.length;n+=16){a(e,r,0,n,n+16);for(var i=0;i<16;i++)r[i]^=this._lastCipherblock[i];this._lastCipherblock=this._aes.encrypt(r),a(this._lastCipherblock,t,n)}return t},x.prototype.decrypt=function(e){if((e=s(e)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var t=o(e.length),r=o(16),n=0;n<e.length;n+=16){a(e,r,0,n,n+16),r=this._aes.decrypt(r);for(var i=0;i<16;i++)t[n+i]=r[i]^this._lastCipherblock[i];a(e,this._lastCipherblock,0,n,n+16)}return t};var O=function(e,t,r){if(!(this instanceof O))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 size)")}else t=o(16);r||(r=1),this.segmentSize=r,this._shiftRegister=s(t,!0),this._aes=new P(e)};O.prototype.encrypt=function(e){if(e.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var t,r=s(e,!0),n=0;n<r.length;n+=this.segmentSize){t=this._aes.encrypt(this._shiftRegister);for(var i=0;i<this.segmentSize;i++)r[n+i]^=t[i];a(this._shiftRegister,this._shiftRegister,0,this.segmentSize),a(r,this._shiftRegister,16-this.segmentSize,n,n+this.segmentSize)}return r},O.prototype.decrypt=function(e){if(e.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var t,r=s(e,!0),n=0;n<r.length;n+=this.segmentSize){t=this._aes.encrypt(this._shiftRegister);for(var i=0;i<this.segmentSize;i++)r[n+i]^=t[i];a(this._shiftRegister,this._shiftRegister,0,this.segmentSize),a(e,this._shiftRegister,16-this.segmentSize,n,n+this.segmentSize)}return r};var M=function(e,t){if(!(this instanceof M))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else t=o(16);this._lastPrecipher=s(t,!0),this._lastPrecipherIndex=16,this._aes=new P(e)};M.prototype.encrypt=function(e){for(var t=s(e,!0),r=0;r<t.length;r++)16===this._lastPrecipherIndex&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),t[r]^=this._lastPrecipher[this._lastPrecipherIndex++];return t},M.prototype.decrypt=M.prototype.encrypt;var B=function(e){if(!(this instanceof B))throw Error("Counter must be instanitated with `new`");0===e||e||(e=1),"number"==typeof e?(this._counter=o(16),this.setValue(e)):this.setBytes(e)};B.prototype.setValue=function(e){if("number"!=typeof e||parseInt(e)!=e)throw new Error("invalid counter value (must be an integer)");if(e>Number.MAX_SAFE_INTEGER)throw new Error("integer value out of safe range");for(var t=15;t>=0;--t)this._counter[t]=e%256,e=parseInt(e/256)},B.prototype.setBytes=function(e){if(16!=(e=s(e,!0)).length)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=e},B.prototype.increment=function(){for(var e=15;e>=0;e--){if(255!==this._counter[e]){this._counter[e]++;break}this._counter[e]=0}};var I=function(e,t){if(!(this instanceof I))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",t instanceof B||(t=new B(t)),this._counter=t,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new P(e)};I.prototype.encrypt=function(e){for(var t=s(e,!0),r=0;r<t.length;r++)16===this._remainingCounterIndex&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),t[r]^=this._remainingCounter[this._remainingCounterIndex++];return t},I.prototype.decrypt=I.prototype.encrypt;var R={AES:P,Counter:B,ModeOfOperation:{ecb:C,cbc:x,cfb:O,ofb:M,ctr:I},utils:{hex:u,utf8:c},padding:{pkcs7:{pad:function(e){var t=16-(e=s(e,!0)).length%16,r=o(e.length+t);a(e,r);for(var n=e.length;n<r.length;n++)r[n]=t;return r},strip:function(e){if((e=s(e,!0)).length<16)throw new Error("PKCS#7 invalid length");var t=e[e.length-1];if(t>16)throw new Error("PKCS#7 padding byte out of range");for(var r=e.length-t,n=0;n<t;n++)if(e[r+n]!==t)throw new Error("PKCS#7 invalid padding byte");var i=o(r);return a(e,i,0,0,r),i}}},_arrayTest:{coerceArray:s,createArray:o,copyArray:a}};void 0!==r?t.exports=R:"function"==typeof define&&define.amd?define([],(function(){return R})):(e.aesjs&&(R._aesjs=e.aesjs),e.aesjs=R)}(this)}}},{package:"eth-lattice-keyring>gridplus-sdk>aes-js",file:"node_modules/aes-js/index.js"}],[26,{"@noble/ciphers/aes":2038,"@noble/ciphers/webcrypto":2041,"@noble/hashes/pbkdf2":2055,"@noble/hashes/sha256":2057,"@noble/hashes/utils":2060,buffer:2744},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.createSHA256Hash=function(e){const t=(0,i.sha256)(e);return(0,s.bytesToHex)(t)},r.default=void 0;var n=e("@noble/hashes/pbkdf2"),i=e("@noble/hashes/sha256"),s=e("@noble/hashes/utils"),o=e("@noble/ciphers/aes"),a=e("@noble/ciphers/webcrypto");function l(e,t){u(e,t),t.add(e)}function c(e,t,r){u(e,t),t.set(e,r)}function u(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function d(e,t){var r=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}(e,t,"get");return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,r)}function h(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var f=new WeakMap,p=new WeakMap,m=new WeakMap,g=new WeakMap,v=new WeakSet,y=new WeakSet,b=new WeakSet,w=new WeakSet;function _(e,r){const o=(0,a.randomBytes)(d(this,m)),l=(0,n.pbkdf2)(i.sha256,r,o,{c:d(this,g),dkLen:d(this,p)}),c=(0,s.utf8ToBytes)(e),u=(0,s.concatBytes)(o,h(this,b,S).call(this,c,l));var f;const v={v:"1",d:(f=u,t.from(f).toString("base64")),iterations:d(this,g)};return JSON.stringify(v)}function k(e,r){const{iterations:s,d:o}=e,a=(l=o,new Uint8Array(t.from(l,"base64")));var l;const c=a.slice(0,d(this,m)),u=a.slice(d(this,m),a.length),f=(0,n.pbkdf2)(i.sha256,r,c,{c:s,dkLen:d(this,p)});return g=h(this,w,E).call(this,u,f),new TextDecoder("utf-8").decode(g);var g}function S(e,t){const r=(0,a.randomBytes)(d(this,f)),n=(0,o.gcm)(t,r).encrypt(e);return(0,s.concatBytes)(r,n)}function E(e,t){const r=e.slice(0,d(this,f)),n=e.slice(d(this,f),e.length);return(0,o.gcm)(t,r).decrypt(n)}const T=new class{constructor(){l(this,w),l(this,b),l(this,y),l(this,v),c(this,f,{writable:!0,value:12}),c(this,p,{writable:!0,value:16}),c(this,m,{writable:!0,value:16}),c(this,g,{writable:!0,value:9e5})}encryptString(e,t){try{return h(this,v,_).call(this,e,t)}catch(e){const t=e instanceof Error?e.message:e;throw new Error(`Unable to encrypt string - ${t}`)}}decryptString(e,t){try{const r=JSON.parse(e);if("1"===r.v)return h(this,y,k).call(this,r,t);throw new Error(`Unsupported encrypted data payload - ${r}`)}catch(e){const t=e instanceof Error?e.message:e;throw new Error(`Unable to decrypt string - ${t}`)}}};r.default=T}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"app/scripts/controllers/user-storage/encryption.ts"}],[262,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e,t){const r=BigInt(1)<<BigInt(e);if(t>=r)throw new Error(`index ${t} too large for depth ${e}`);return r|t}Object.defineProperty(r,"__esModule",{value:!0}),r.gindexChild=r.gindexParent=r.gindexSibling=r.concatGindices=r.getGindexBits=r.gindexIterator=r.getGindicesAtDepth=r.iterateAtDepth=r.countToDepth=r.convertGindexToBitstring=r.toGindexBitstring=r.toGindex=r.bitIndexBigInt=void 0,r.bitIndexBigInt=function(e){return e.toString(2).length-1},r.toGindex=n,r.toGindexBitstring=function(e,t){const r=t?Number(t).toString(2):"";if(r.length>e)throw new Error("index too large for depth");return"1"+r.padStart(e,"0")},r.convertGindexToBitstring=function(e){if("string"==typeof e){if(0===e.length)throw new Error(i);return e}if(e<1)throw new Error(i);return e.toString(2)},r.countToDepth=function(e){return e<=1?0:(e-BigInt(1)).toString(2).length},r.iterateAtDepth=function(e,t,r){if(t+r>BigInt(1)<<BigInt(e))throw new Error("Too large for depth");let i=n(e,t);const s=i+r;return{[Symbol.iterator]:()=>({next(){if(i<s){const e=i;return i++,{done:!1,value:e}}return{done:!0,value:undefined}}})}},r.getGindicesAtDepth=function(e,t,r){if(t+r>BigInt(1)<<BigInt(e))throw new Error("Too large for depth");let i=n(e,BigInt(t));const s=[];for(let e=0;e<r;e++)s.push(i++);return s};const i="Invalid gindex";r.gindexIterator=function(e){let t;if("string"==typeof e){if(!e.length)throw new Error(i);t=e}else{if(e<1)throw new Error(i);t=e.toString(2)}let r=1;const n=()=>{if(r===t.length)return{done:!0,value:undefined};const e=Number(t[r]);return r++,{done:!1,value:e}};return{[Symbol.iterator]:()=>({next:n}),remainingBitLength:()=>t.length-r}},r.getGindexBits=function(e){let t;if("string"==typeof e){if(!e.length)throw new Error(i);t=e}else{if(e<1)throw new Error(i);t=e.toString(2)}const r=[];for(let e=1;e<t.length;e++)r.push(Number(t[e]));return r},r.concatGindices=function(e){return BigInt(e.reduce(((e,t)=>e+t.toString(2).slice(1)),"0b1"))},r.gindexSibling=function(e){return e^BigInt(1)},r.gindexParent=function(e){return e/BigInt(2)},r.gindexChild=function(e,t){return e*BigInt(2)+BigInt(t)}}}},{package:"eth-lattice-keyring>@ethereumjs/tx>@chainsafe/ssz>@chainsafe/persistent-merkle-tree",file:"node_modules/@chainsafe/persistent-merkle-tree/lib/gindex.js"}],[263,{"@chainsafe/as-sha256":2739},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.isHashObject=r.uint8ArrayToHashObject=r.hashObjectToUint8Array=r.hashTwoObjects=r.hash=void 0;const n=e("@chainsafe/as-sha256"),i=new Uint8Array(64);r.hash=function(e,t){return i.set(e,0),i.set(t,32),n.digest64(i)},r.hashTwoObjects=function(e,t){return n.digest64HashObjects(e,t)},r.hashObjectToUint8Array=function(e){const t=new Uint8Array(32);return n.hashObjectToByteArray(e,t,0),t},r.uint8ArrayToHashObject=function(e){return n.byteArrayToHashObject(e)},r.isHashObject=function(e){return e.length===undefined}}}},{package:"eth-lattice-keyring>@ethereumjs/tx>@chainsafe/ssz>@chainsafe/persistent-merkle-tree",file:"node_modules/@chainsafe/persistent-merkle-tree/lib/hash.js"}],[2638,{_process:3738,timers:4149},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e,t){(function(){class n{constructor(e){this.tasks=[],this.count=e}sched(){if(this.count>0&&this.tasks.length>0){this.count--;let e=this.tasks.shift();if(e===undefined)throw"Unexpected undefined value in tasks list";e()}}acquire(){return new Promise(((r,n)=>{this.tasks.push((()=>{var e=!1;r((()=>{e||(e=!0,this.count++,this.sched())}))})),e&&e.nextTick?e.nextTick(this.sched.bind(this)):t(this.sched.bind(this))}))}use(e){return this.acquire().then((t=>e().then((e=>(t(),e))).catch((e=>{throw t(),e}))))}}r.Semaphore=n;r.Mutex=class extends n{constructor(){super(1)}}}).call(this)}).call(this,e("_process"),e("timers").setImmediate)}}},{package:"await-semaphore",file:"node_modules/await-semaphore/index.js"}],[2639,{"./lib/ascii":2640,"./lib/base64":2641,"./lib/hex":2642,"./lib/utf16le":2643,"./lib/utf8":2644},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("./lib/ascii"),i=e("./lib/base64"),s=e("./lib/hex"),o=e("./lib/utf8"),a=e("./lib/utf16le"),l=255===new Uint8Array(Uint16Array.of(255).buffer)[0];function c(e){switch(e){case"ascii":return n;case"base64":return i;case"hex":return s;case"utf8":case"utf-8":case undefined:return o;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a;default:throw new Error(`Unknown encoding: ${e}`)}}function u(e){return e instanceof Uint8Array}function d(e,t,r){return"string"==typeof e?function(e,t){const r=c(t),n=new Uint8Array(r.byteLength(e));return r.write(n,e,0,n.byteLength),n}(e,t):Array.isArray(e)?function(e){const t=new Uint8Array(e.length);return t.set(e),t}(e):ArrayBuffer.isView(e)?function(e){const t=new Uint8Array(e.byteLength);return t.set(e),t}(e):function(e,t,r){return new Uint8Array(e,t,r)}(e,t,r)}function h(e,t,r,n,i){if(0===e.byteLength)return-1;if("string"==typeof r?(n=r,r=0):r===undefined?r=i?0:e.length-1:r<0&&(r+=e.byteLength),r>=e.byteLength){if(i)return-1;r=e.byteLength-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t)t=d(t,n);else if("number"==typeof t)return t&=255,i?e.indexOf(t,r):e.lastIndexOf(t,r);if(0===t.byteLength)return-1;if(i){let n=-1;for(let i=r;i<e.byteLength;i++)if(e[i]===t[-1===n?0:i-n]){if(-1===n&&(n=i),i-n+1===t.byteLength)return n}else-1!==n&&(i-=i-n),n=-1}else{r+t.byteLength>e.byteLength&&(r=e.byteLength-t.byteLength);for(let n=r;n>=0;n--){let r=!0;for(let i=0;i<t.byteLength;i++)if(e[n+i]!==t[i]){r=!1;break}if(r)return n}}return-1}function f(e,t,r,n){return h(e,t,r,n,!0)}function p(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}t.exports=r={isBuffer:u,isEncoding:function(e){try{return c(e),!0}catch{return!1}},alloc:function(e,t,n){const i=new Uint8Array(e);return t!==undefined&&r.fill(i,t,0,i.byteLength,n),i},allocUnsafe:function(e){return new Uint8Array(e)},allocUnsafeSlow:function(e){return new Uint8Array(e)},byteLength:function(e,t){return c(t).byteLength(e)},compare:function(e,t){if(e===t)return 0;const r=Math.min(e.byteLength,t.byteLength);e=new DataView(e.buffer,e.byteOffset,e.byteLength),t=new DataView(t.buffer,t.byteOffset,t.byteLength);let n=0;for(let i=r-r%4;n<i;n+=4){if(e.getUint32(n,l)!==t.getUint32(n,l))break}for(;n<r;n++){const r=e.getUint8(n),i=t.getUint8(n);if(r<i)return-1;if(r>i)return 1}return e.byteLength>t.byteLength?1:e.byteLength<t.byteLength?-1:0},concat:function(e,t){t===undefined&&(t=e.reduce(((e,t)=>e+t.byteLength),0));const r=new Uint8Array(t);let n=0;for(const t of e){if(n+t.byteLength>r.byteLength){const e=t.subarray(0,r.byteLength-n);return r.set(e,n),r}r.set(t,n),n+=t.byteLength}return r},copy:function(e,t,r=0,n=0,i=e.byteLength){if(i>0&&i<n)return 0;if(i===n)return 0;if(0===e.byteLength||0===t.byteLength)return 0;if(r<0)throw new RangeError("targetStart is out of range");if(n<0||n>=e.byteLength)throw new RangeError("sourceStart is out of range");if(i<0)throw new RangeError("sourceEnd is out of range");r>=t.byteLength&&(r=t.byteLength),i>e.byteLength&&(i=e.byteLength),t.byteLength-r<i-n&&(i=t.length-r+n);const s=i-n;return e===t?t.copyWithin(r,n,i):t.set(e.subarray(n,i),r),s},equals:function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;const r=e.byteLength;e=new DataView(e.buffer,e.byteOffset,e.byteLength),t=new DataView(t.buffer,t.byteOffset,t.byteLength);let n=0;for(let i=r-r%4;n<i;n+=4)if(e.getUint32(n,l)!==t.getUint32(n,l))return!1;for(;n<r;n++)if(e.getUint8(n)!==t.getUint8(n))return!1;return!0},fill:function(e,t,r,n,i){if("string"==typeof t?"string"==typeof r?(i=r,r=0,n=e.byteLength):"string"==typeof n&&(i=n,n=e.byteLength):"number"==typeof t?t&=255:"boolean"==typeof t&&(t=+t),r<0||e.byteLength<r||e.byteLength<n)throw new RangeError("Out of range index");if(r===undefined&&(r=0),n===undefined&&(n=e.byteLength),n<=r)return e;if(t||(t=0),"number"==typeof t)for(let i=r;i<n;++i)e[i]=t;else{const s=(t=u(t)?t:d(t,i)).byteLength;for(let i=0;i<n-r;++i)e[i+r]=t[i%s]}return e},from:d,includes:function(e,t,r,n){return-1!==f(e,t,r,n)},indexOf:f,lastIndexOf:function(e,t,r,n){return h(e,t,r,n,!1)},swap16:function(e){const t=e.byteLength;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<t;r+=2)p(e,r,r+1);return e},swap32:function(e){const t=e.byteLength;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<t;r+=4)p(e,r,r+3),p(e,r+1,r+2);return e},swap64:function(e){const t=e.byteLength;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<t;r+=8)p(e,r,r+7),p(e,r+1,r+6),p(e,r+2,r+5),p(e,r+3,r+4);return e},toBuffer:function(e){return e},toString:function(e,t,r=0,n=e.byteLength){const i=e.byteLength;return r>=i||n<=r?"":(r<0&&(r=0),n>i&&(n=i),(0!==r||n<i)&&(e=e.subarray(r,n)),c(t).toString(e))},write:function(e,t,r,n,i){return r===undefined?i="utf8":n===undefined&&"string"==typeof r?(i=r,r=undefined):i===undefined&&"string"==typeof n&&(i=n,n=undefined),c(i).write(e,t,r,n)},writeDoubleLE:function(e,t,r){return r===undefined&&(r=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setFloat64(r,t,!0),r+8},writeFloatLE:function(e,t,r){return r===undefined&&(r=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setFloat32(r,t,!0),r+4},writeUInt32LE:function(e,t,r){return r===undefined&&(r=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setUint32(r,t,!0),r+4},writeInt32LE:function(e,t,r){return r===undefined&&(r=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setInt32(r,t,!0),r+4},readDoubleLE:function(e,t){return t===undefined&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t,!0)},readFloatLE:function(e,t){return t===undefined&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t,!0)},readUInt32LE:function(e,t){return t===undefined&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getUint32(t,!0)},readInt32LE:function(e,t){return t===undefined&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getInt32(t,!0)}}}}},{package:"@metamask/snaps-controllers>tar-stream>b4a",file:"node_modules/b4a/browser.js"}],[264,{"./gindex":262,"./hash":263,"./node":265,"./packedNode":266,"./proof":267,"./subtree":272,"./tree":273,"./zeroNode":274},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./gindex"),r),i(e("./hash"),r),i(e("./node"),r),i(e("./packedNode"),r),i(e("./proof"),r),i(e("./subtree"),r),i(e("./tree"),r),i(e("./zeroNode"),r)}}},{package:"eth-lattice-keyring>@ethereumjs/tx>@chainsafe/ssz>@chainsafe/persistent-merkle-tree",file:"node_modules/@chainsafe/persistent-merkle-tree/lib/index.js"}],[2640,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){return e.length}t.exports={byteLength:n,toString:function(e){const t=e.byteLength;let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r},write:function(e,t,r=0,i=n(t)){const s=Math.min(i,e.byteLength-r);for(let n=0;n<s;n++)e[r+n]=t.charCodeAt(n);return s}}}}},{package:"@metamask/snaps-controllers>tar-stream>b4a",file:"node_modules/b4a/lib/ascii.js"}],[2641,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=new Uint8Array(256);for(let e=0;e<64;e++)i[n.charCodeAt(e)]=e;function s(e){let t=e.length;return 61===e.charCodeAt(t-1)&&t--,t>1&&61===e.charCodeAt(t-1)&&t--,3*t>>>2}i[45]=62,i[95]=63,t.exports={byteLength:s,toString:function(e){const t=e.byteLength;let r="";for(let i=0;i<t;i+=3)r+=n[e[i]>>2]+n[(3&e[i])<<4|e[i+1]>>4]+n[(15&e[i+1])<<2|e[i+2]>>6]+n[63&e[i+2]];return t%3==2?r=r.substring(0,r.length-1)+"=":t%3==1&&(r=r.substring(0,r.length-2)+"=="),r},write:function(e,t,r=0,n=s(t)){const o=Math.min(n,e.byteLength-r);for(let r=0,n=0;n<o;r+=4){const s=i[t.charCodeAt(r)],o=i[t.charCodeAt(r+1)],a=i[t.charCodeAt(r+2)],l=i[t.charCodeAt(r+3)];e[n++]=s<<2|o>>4,e[n++]=(15&o)<<4|a>>2,e[n++]=(3&a)<<6|63&l}return o}}}}},{package:"@metamask/snaps-controllers>tar-stream>b4a",file:"node_modules/b4a/lib/base64.js"}],[2642,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){return e.length>>>1}function i(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-65+10:e>=97&&e<=102?e-97+10:void 0}t.exports={byteLength:n,toString:function(e){const t=e.byteLength;e=new DataView(e.buffer,e.byteOffset,t);let r="",n=0;for(let i=t-t%4;n<i;n+=4)r+=e.getUint32(n).toString(16).padStart(8,"0");for(;n<t;n++)r+=e.getUint8(n).toString(16).padStart(2,"0");return r},write:function(e,t,r=0,s=n(t)){const o=Math.min(s,e.byteLength-r);for(let n=0;n<o;n++){const s=i(t.charCodeAt(2*n)),o=i(t.charCodeAt(2*n+1));if(s===undefined||o===undefined)return e.subarray(0,n);e[r+n]=s<<4|o}return o}}}}},{package:"@metamask/snaps-controllers>tar-stream>b4a",file:"node_modules/b4a/lib/hex.js"}],[2643,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){return 2*e.length}t.exports={byteLength:n,toString:function(e){const t=e.byteLength;let r="";for(let n=0;n<t-1;n+=2)r+=String.fromCharCode(e[n]+256*e[n+1]);return r},write:function(e,t,r=0,i=n(t)){const s=Math.min(i,e.byteLength-r);let o=s;for(let n=0;n<t.length&&!((o-=2)<0);++n){const i=t.charCodeAt(n),s=i>>8,o=i%256;e[r+2*n]=o,e[r+2*n+1]=s}return s}}}}},{package:"@metamask/snaps-controllers>tar-stream>b4a",file:"node_modules/b4a/lib/utf16le.js"}],[2644,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){let t=0;for(let r=0,n=e.length;r<n;r++){const i=e.charCodeAt(r);if(i>=55296&&i<=56319&&r+1<n){const n=e.charCodeAt(r+1);if(n>=56320&&n<=57343){t+=4,r++;continue}}t+=i<=127?1:i<=2047?2:3}return t}let i,s;if("undefined"!=typeof TextDecoder){const e=new TextDecoder;i=function(t){return e.decode(t)}}else i=function(e){const t=e.byteLength;let r="",n=0;for(;n<t;){let i=e[n];if(i<=127){r+=String.fromCharCode(i),n++;continue}let s=0,o=0;if(i<=223?(s=1,o=31&i):i<=239?(s=2,o=15&i):i<=244&&(s=3,o=7&i),t-n-s>0){let t=0;for(;t<s;)i=e[n+t+1],o=o<<6|63&i,t+=1}else o=65533,s=t-n;r+=String.fromCodePoint(o),n+=s+1}return r};if("undefined"!=typeof TextEncoder){const e=new TextEncoder;s=function(t,r,i=0,s=n(r)){const o=Math.min(s,t.byteLength-i);return e.encodeInto(r,t.subarray(i,i+o)),o}}else s=function(e,t,r=0,i=n(t)){const s=Math.min(i,e.byteLength-r);e=e.subarray(r,r+s);let o=0,a=0;for(;o<t.length;){const r=t.codePointAt(o);if(r<=127){e[a++]=r,o++;continue}let n=0,i=0;for(r<=2047?(n=6,i=192):r<=65535?(n=12,i=224):r<=2097151&&(n=18,i=240),e[a++]=i|r>>n,n-=6;n>=0;)e[a++]=128|r>>n&63,n-=6;o+=r>=65536?2:1}return s};t.exports={byteLength:n,toString:i,write:s}}}},{package:"@metamask/snaps-controllers>tar-stream>b4a",file:"node_modules/b4a/lib/utf8.js"}],[2646,{"to-data-view":4152},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("to-data-view");t.exports=function(e,t,r){var i,s;switch(r=r||{},t){case"RFC3548":case"RFC4648":i="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",s=!0;break;case"RFC4648-HEX":i="0123456789ABCDEFGHIJKLMNOPQRSTUV",s=!0;break;case"Crockford":i="0123456789ABCDEFGHJKMNPQRSTVWXYZ",s=!1;break;default:throw new Error("Unknown base32 variant: "+t)}for(var o=r.padding!==undefined?r.padding:s,a=n(e),l=0,c=0,u="",d=0;d<a.byteLength;d++)for(c=c<<8|a.getUint8(d),l+=8;l>=5;)u+=i[c>>>l-5&31],l-=5;if(l>0&&(u+=i[c<<5-l&31]),o)for(;u.length%8!=0;)u+="=";return u}}}},{package:"base32-encode",file:"node_modules/base32-encode/index.js"}],[2648,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.bech32m=r.bech32=void 0;const n="qpzry9x8gf2tvdw0s3jn54khce6mua7l",i={};for(let e=0;e<32;e++){const t=n.charAt(e);i[t]=e}function s(e){const t=e>>25;return(33554431&e)<<5^996825010&-(1&t)^642813549&-(t>>1&1)^513874426&-(t>>2&1)^1027748829&-(t>>3&1)^705979059&-(t>>4&1)}function o(e){let t=1;for(let r=0;r<e.length;++r){const n=e.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+e+")";t=s(t)^n>>5}t=s(t);for(let r=0;r<e.length;++r){const n=e.charCodeAt(r);t=s(t)^31&n}return t}function a(e,t,r,n){let i=0,s=0;const o=(1<<r)-1,a=[];for(let n=0;n<e.length;++n)for(i=i<<t|e[n],s+=t;s>=r;)s-=r,a.push(i>>s&o);if(n)s>0&&a.push(i<<r-s&o);else{if(s>=t)return"Excess padding";if(i<<r-s&o)return"Non-zero padding"}return a}function l(e){return a(e,8,5,!0)}function c(e){const t=a(e,5,8,!1);if(Array.isArray(t))return t}function u(e){const t=a(e,5,8,!1);if(Array.isArray(t))return t;throw new Error(t)}function d(e){let t;function r(e,r){if(r=r||90,e.length<8)return e+" too short";if(e.length>r)return"Exceeds length limit";const n=e.toLowerCase(),a=e.toUpperCase();if(e!==n&&e!==a)return"Mixed-case string "+e;const l=(e=n).lastIndexOf("1");if(-1===l)return"No separator character for "+e;if(0===l)return"Missing prefix for "+e;const c=e.slice(0,l),u=e.slice(l+1);if(u.length<6)return"Data too short";let d=o(c);if("string"==typeof d)return d;const h=[];for(let e=0;e<u.length;++e){const t=u.charAt(e),r=i[t];if(r===undefined)return"Unknown character "+t;d=s(d)^r,e+6>=u.length||h.push(r)}return d!==t?"Invalid checksum for "+e:{prefix:c,words:h}}return t="bech32"===e?1:734539939,{decodeUnsafe:function(e,t){const n=r(e,t);if("object"==typeof n)return n},decode:function(e,t){const n=r(e,t);if("object"==typeof n)return n;throw new Error(n)},encode:function(e,r,i){if(i=i||90,e.length+7+r.length>i)throw new TypeError("Exceeds length limit");let a=o(e=e.toLowerCase());if("string"==typeof a)throw new Error(a);let l=e+"1";for(let e=0;e<r.length;++e){const t=r[e];if(t>>5)throw new Error("Non 5-bit word");a=s(a)^t,l+=n.charAt(t)}for(let e=0;e<6;++e)a=s(a);a^=t;for(let e=0;e<6;++e){l+=n.charAt(a>>5*(5-e)&31)}return l},toWords:l,fromWordsUnsafe:c,fromWords:u}}r.bech32=d("bech32"),r.bech32m=d("bech32m")}}},{package:"eth-lattice-keyring>gridplus-sdk>bech32",file:"node_modules/bech32/dist/index.js"}],[265,{"./hash":263},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.bitwiseOrNodeH=r.setNodeH=r.getNodeH=r.compose=r.identity=r.LeafNode=r.BranchNode=r.Node=void 0;const n=e("./hash"),i=2**32;class s{constructor(e,t,r,n,i,s,o,a){this.h0=e,this.h1=t,this.h2=r,this.h3=n,this.h4=i,this.h5=s,this.h6=o,this.h7=a}applyHash(e){this.h0=e.h0,this.h1=e.h1,this.h2=e.h2,this.h3=e.h3,this.h4=e.h4,this.h5=e.h5,this.h6=e.h6,this.h7=e.h7}}r.Node=s;r.BranchNode=class extends s{constructor(e,t){if(super(null,0,0,0,0,0,0,0),this._left=e,this._right=t,!e)throw new Error("Left node is undefined");if(!t)throw new Error("Right node is undefined")}get rootHashObject(){return null===this.h0&&super.applyHash(n.hashTwoObjects(this.left.rootHashObject,this.right.rootHashObject)),this}get root(){return n.hashObjectToUint8Array(this.rootHashObject)}isLeaf(){return!1}get left(){return this._left}get right(){return this._right}};class o extends s{static fromRoot(e){return this.fromHashObject(n.uint8ArrayToHashObject(e))}static fromHashObject(e){return new o(e.h0,e.h1,e.h2,e.h3,e.h4,e.h5,e.h6,e.h7)}static fromZero(){return new o(0,0,0,0,0,0,0,0)}static fromUint32(e){return new o(e,0,0,0,0,0,0,0)}clone(){return o.fromHashObject(this)}get rootHashObject(){return this}get root(){return n.hashObjectToUint8Array(this)}isLeaf(){return!0}get left(){throw Error("LeafNode has no left node")}get right(){throw Error("LeafNode has no right node")}writeToBytes(e,t,r){e.set(this.root.slice(0,r),t)}getUint(e,t,r){const n=Math.floor(t/4);if(e<4){const r=t%4*8,i=a(this,n);return 1===e?255&i>>r:65535&i>>r}if(4===e)return a(this,n)>>>0;if(8===e){const e=a(this,n),t=a(this,n+1);return 0===t?e>>>0:-1===t&&-1===e&&r?Infinity:(e>>>0)+(t>>>0)*i}throw Error("uintBytes > 8")}getUintBigint(e,t){const r=Math.floor(t/4);if(e<4){const n=t%4*8,i=a(this,r);return 1===e?BigInt(255&i>>n):BigInt(65535&i>>n)}if(4===e)return BigInt(a(this,r)>>>0);{const t=Math.ceil(e/4);let n=BigInt(0);for(let e=0;e<t;e++)n+=BigInt(a(this,r+e)>>>0)<<BigInt(32*e);return n}}setUint(e,t,r,n){const s=Math.floor(t/4);if(e<4){const n=t%4*8;let i=a(this,s);1===e?(i&=~(255<<n),i|=r<<n):(i&=~(65535<<n),i|=r<<n),l(this,s,i)}else if(4===e)l(this,s,r);else{if(8!==e)throw Error("uintBytes > 8");r===Infinity&&n?(l(this,s,-1),l(this,s+1,-1)):(l(this,s,4294967295&r),l(this,s+1,r/i&4294967295))}}setUintBigint(e,t,r){const n=Math.floor(t/4);if(e<4){const i=Number(r),s=t%4*8;let o=a(this,n);1===e?(o&=~(255<<s),o|=i<<s):(o&=~(65535<<s),o|=i<<s),l(this,n,o)}else if(4===e)l(this,n,Number(r));else{const t=n+Math.ceil(e/4);for(let e=n;e<t;e++)l(this,e,Number(r&BigInt(4294967295))),r>>=BigInt(32)}}bitwiseOrUint(e,t,r){const n=Math.floor(t/4);if(e<4){c(this,n,r<<t%4*8)}else if(4===e)c(this,n,r);else{const t=n+Math.ceil(e/4);for(let e=n;e<t;e++)c(this,e,4294967295&r),r>>=32}}}function a(e,t){if(0===t)return e.h0;if(1===t)return e.h1;if(2===t)return e.h2;if(3===t)return e.h3;if(4===t)return e.h4;if(5===t)return e.h5;if(6===t)return e.h6;if(7===t)return e.h7;throw Error("hIndex > 7")}function l(e,t,r){if(0===t)e.h0=r;else if(1===t)e.h1=r;else if(2===t)e.h2=r;else if(3===t)e.h3=r;else if(4===t)e.h4=r;else if(5===t)e.h5=r;else if(6===t)e.h6=r;else{if(7!==t)throw Error("hIndex > 7");e.h7=r}}function c(e,t,r){if(0===t)e.h0|=r;else if(1===t)e.h1|=r;else if(2===t)e.h2|=r;else if(3===t)e.h3|=r;else if(4===t)e.h4|=r;else if(5===t)e.h5|=r;else if(6===t)e.h6|=r;else{if(7!==t)throw Error("hIndex > 7");e.h7|=r}}r.LeafNode=o,r.identity=function(e){return e},r.compose=function(e,t){return function(r){return t(e(r))}},r.getNodeH=a,r.setNodeH=l,r.bitwiseOrNodeH=c}}},{package:"eth-lattice-keyring>@ethereumjs/tx>@chainsafe/ssz>@chainsafe/persistent-merkle-tree",file:"node_modules/@chainsafe/persistent-merkle-tree/lib/node.js"}],[2650,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){for(var r=[],n=0;n<e.length;n++)r[n]=e[n]&t[n];return r}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/bits/and.js"}],[2651,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){var r=[];if(t>e.length)throw new Error("shift amount can’t be larger than bits array length");for(var n=0;n<e.length;n++)r[(e.length+n-t)%e.length]=e[n];return r}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/bits/circular-shift-left.js"}],[2652,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){var r=[];if(t>e.length)throw new Error("shift amount can’t be larger than bits array length");for(var n=0;n<e.length;n++)r[(n+t)%e.length]=e[n];return r}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/bits/circular-shift-right.js"}],[2653,{"./and":2650,"./circular-shift-left":2651,"./circular-shift-right":2652,"./nand":2654,"./nor":2655,"./not":2656,"./or":2657,"./reduce-and":2658,"./reduce-nand":2659,"./reduce-nor":2660,"./reduce-or":2661,"./reduce-xnor":2662,"./reduce-xor":2663,"./to-boolean":2664,"./to-string":2665,"./xnor":2666,"./xor":2667},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.xor=r.xnor=r.toString=r.toBoolean=r.reduceXor=r.reduceXnor=r.reduceOr=r.reduceNor=r.reduceNand=r.reduceAnd=r.or=r.not=r.nor=r.nand=r.circularShiftRight=r.circularShiftLeft=r.and=void 0;var n=e("./and");r.and=n.default;var i=e("./circular-shift-left");r.circularShiftLeft=i.default;var s=e("./circular-shift-right");r.circularShiftRight=s.default;var o=e("./nand");r.nand=o.default;var a=e("./nor");r.nor=a.default;var l=e("./not");r.not=l.default;var c=e("./or");r.or=c.default;var u=e("./reduce-and");r.reduceAnd=u.default;var d=e("./reduce-nand");r.reduceNand=d.default;var h=e("./reduce-nor");r.reduceNor=h.default;var f=e("./reduce-or");r.reduceOr=f.default;var p=e("./reduce-xnor");r.reduceXnor=p.default;var m=e("./reduce-xor");r.reduceXor=m.default;var g=e("./to-boolean");r.toBoolean=g.default;var v=e("./to-string");r.toString=v.default;var y=e("./xnor");r.xnor=y.default;var b=e("./xor");r.xor=b.default,r.default={and:n.default,circularShiftLeft:i.default,circularShiftRight:s.default,nand:o.default,nor:a.default,not:l.default,or:c.default,reduceAnd:u.default,reduceNand:d.default,reduceNor:h.default,reduceOr:f.default,reduceXnor:p.default,reduceXor:m.default,toBoolean:g.default,toString:v.default,xnor:y.default,xor:b.default}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/bits/index.js"}],[2654,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){for(var r=[],n=0;n<e.length;n++)r[n]=e[n]&t[n]^1;return r}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/bits/nand.js"}],[2655,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){for(var r=[],n=0;n<e.length;n++)r[n]=1^(e[n]|t[n]);return r}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/bits/nor.js"}],[2656,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){for(var t=[],r=0;r<e.length;r++)t[r]=1^e[r];return t}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/bits/not.js"}],[2657,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){for(var r=[],n=0;n<e.length;n++)r[n]=e[n]|t[n];return r}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/bits/or.js"}],[2658,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){if(e.length<2)throw new RangeError("Not enough bits.");for(var t=e[0],r=1;r<e.length;r++)t&=e[r];return t}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/bits/reduce-and.js"}],[2659,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){if(e.length<2)throw new RangeError("Not enough bits.");for(var t=e[0],r=1;r<e.length;r++)t=t&e[r]^1;return t}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/bits/reduce-nand.js"}],[266,{"./node":265,"./subtree":272},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.packedNodeRootsToBytes=r.packedRootsBytesToLeafNodes=r.packedRootsBytesToNode=void 0;const n=e("./subtree"),i=e("./node");function s(e,t,r){const n=r-t,s=Math.floor(n/32),o=new Array(Math.ceil(n/32));for(let r=0;r<s;r++){const n=t+32*r;o[r]=new i.LeafNode(e.getInt32(n+0,!0),e.getInt32(n+4,!0),e.getInt32(n+8,!0),e.getInt32(n+12,!0),e.getInt32(n+16,!0),e.getInt32(n+20,!0),e.getInt32(n+24,!0),e.getInt32(n+28,!0))}const a=n%32;if(a>0){const r=new i.LeafNode(0,0,0,0,0,0,0,0);o[s]=r;const l=Math.floor(a/4);for(let n=0;n<l;n++)i.setNodeH(r,n,e.getInt32(t+32*s+4*n,!0));const c=n%4;if(c>0){let s=0;for(let r=0;r<c;r++)s|=e.getUint8(t+n-c+r)<<8*r;i.setNodeH(r,l,s)}}return o}r.packedRootsBytesToNode=function(e,t,r,i){const o=s(t,r,i);return n.subtreeFillToContents(o,e)},r.packedRootsBytesToLeafNodes=s,r.packedNodeRootsToBytes=function(e,t,r,n){const s=r%32,o=Math.floor(r/32);for(let r=0;r<o;r++){const i=n[r],s=t+32*r;e.setInt32(s+0,i.h0,!0),e.setInt32(s+4,i.h1,!0),e.setInt32(s+8,i.h2,!0),e.setInt32(s+12,i.h3,!0),e.setInt32(s+16,i.h4,!0),e.setInt32(s+20,i.h5,!0),e.setInt32(s+24,i.h6,!0),e.setInt32(s+28,i.h7,!0)}if(s>0){const a=n[o],l=Math.floor(s/4);for(let r=0;r<l;r++)e.setInt32(t+32*o+4*r,i.getNodeH(a,r),!0);const c=r%4;if(c>0){const n=i.getNodeH(a,l);for(let i=0;i<c;i++)e.setUint8(t+r-c+i,n>>8*i&255)}}}}}},{package:"eth-lattice-keyring>@ethereumjs/tx>@chainsafe/ssz>@chainsafe/persistent-merkle-tree",file:"node_modules/@chainsafe/persistent-merkle-tree/lib/packedNode.js"}],[2660,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){if(e.length<2)throw new RangeError("Not enough bits.");for(var t=e[0],r=1;r<e.length;r++)t=1^(t|e[r]);return t}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/bits/reduce-nor.js"}],[2661,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){if(e.length<2)throw new RangeError("Not enough bits.");for(var t=e[0],r=1;r<e.length;r++)t|=e[r];return t}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/bits/reduce-or.js"}],[2662,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){if(e.length<2)throw new RangeError("Not enough bits.");for(var t=e[0],r=1;r<e.length;r++)t^=1^e[r];return t}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/bits/reduce-xnor.js"}],[2663,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){if(e.length<2)throw new RangeError("Not enough bits.");for(var t=e[0],r=1;r<e.length;r++)t^=e[r];return t}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/bits/reduce-xor.js"}],[2664,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){for(var t=[],r=0;r<e.length;r++)t[r]=1===e[r];return t}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/bits/to-boolean.js"}],[2665,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t,r){if(void 0===t&&(t=0),void 0===r&&(r=" "),!t)return e.join("");for(var n="",i=0;i<e.length;i++)n+=""+e[i],i%t==t-1&&i!==e.length-1&&(n+=r);return n}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/bits/to-string.js"}],[2666,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){for(var r=[],n=0;n<e.length;n++)r[n]=e[n]^t[n]^1;return r}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/bits/xnor.js"}],[2667,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){for(var r=[],n=0;n<e.length;n++)r[n]=e[n]^t[n];return r}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/bits/xor.js"}],[2668,{buffer:2744},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,r,n){void 0===n&&(n=!1);for(var i=n?r.length:t.length,s=e.alloc(i),o=0;o<i;o++){var a=n?o%t.length:o;s[o]=t[a]&r[o]}return s}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/buffer/and.js"}],[2669,{"../byte/write":2683,buffer:2744},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0});var n=e("../byte/write");r.default=function(e){for(var r=[0,0,0,0,0,0,0,0],i=t.alloc(Math.ceil(e.length/8)),s=0;s<i.length;s++){for(var o=0;o<8;o++)e[8*s+o]?r[o]=e[8*s+o]:r[o]=0;i[s]=n.default(r)}return i}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/buffer/create.js"}],[267,{"./multi":268,"./single":269,"./treeOffset":270},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeProof=r.serializeProof=r.createNodeFromProof=r.createProof=r.ProofTypeSerialized=r.ProofType=void 0;const n=e("./multi"),i=e("./single"),s=e("./treeOffset");var o;!function(e){e.single="single",e.treeOffset="treeOffset",e.multi="multi"}(o=r.ProofType||(r.ProofType={})),r.ProofTypeSerialized=[o.single,o.treeOffset,o.multi],r.createProof=function(e,t){switch(t.type){case o.single:{const[r,n]=i.createSingleProof(e,t.gindex);return{type:o.single,gindex:t.gindex,leaf:r,witnesses:n}}case o.treeOffset:{const[r,n]=s.createTreeOffsetProof(e,t.gindices);return{type:o.treeOffset,offsets:r,leaves:n}}case o.multi:{const[r,i,s]=n.createMultiProof(e,t.gindices);return{type:o.multi,leaves:r,witnesses:i,gindices:s}}default:throw new Error("Invalid proof type")}},r.createNodeFromProof=function(e){switch(e.type){case o.single:return i.createNodeFromSingleProof(e.gindex,e.leaf,e.witnesses);case o.treeOffset:return s.createNodeFromTreeOffsetProof(e.offsets,e.leaves);case o.multi:return n.createNodeFromMultiProof(e.leaves,e.witnesses,e.gindices);default:throw new Error("Invalid proof type")}},r.serializeProof=function(e){switch(e.type){case o.single:case o.multi:throw new Error("Not implemented");case o.treeOffset:{const t=new Uint8Array(1+s.computeTreeOffsetProofSerializedLength(e.offsets,e.leaves));return t[0]=r.ProofTypeSerialized.indexOf(o.treeOffset),s.serializeTreeOffsetProof(t,1,e.offsets,e.leaves),t}default:throw new Error("Invalid proof type")}},r.deserializeProof=function(e){const t=r.ProofTypeSerialized[e[0]];if(!t)throw new Error("Invalid proof type");switch(t){case o.single:case o.multi:throw new Error("Not implemented");case o.treeOffset:{const[t,r]=s.deserializeTreeOffsetProof(e,1);return{type:o.treeOffset,offsets:t,leaves:r}}default:throw new Error("Invalid proof type")}}}}},{package:"eth-lattice-keyring>@ethereumjs/tx>@chainsafe/ssz>@chainsafe/persistent-merkle-tree",file:"node_modules/@chainsafe/persistent-merkle-tree/lib/proof/index.js"}],[2670,{"./and":2668,"./create":2669,"./modify":2671,"./nand":2672,"./nor":2673,"./not":2674,"./or":2675,"./read":2678,"./read-int":2676,"./read-u-int":2677,"./xnor":2679,"./xor":2680},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.xor=r.xnor=r.readUInt=r.readInt=r.read=r.or=r.not=r.nor=r.nand=r.modify=r.create=r.and=void 0;var n=e("./and");r.and=n.default;var i=e("./create");r.create=i.default;var s=e("./modify");r.modify=s.default;var o=e("./nand");r.nand=o.default;var a=e("./nor");r.nor=a.default;var l=e("./not");r.not=l.default;var c=e("./or");r.or=c.default;var u=e("./read");r.read=u.default;var d=e("./read-int");r.readInt=d.default;var h=e("./read-u-int");r.readUInt=h.default;var f=e("./xnor");r.xnor=f.default;var p=e("./xor");r.xor=p.default,r.default={and:n.default,create:i.default,modify:s.default,nand:o.default,nor:a.default,not:l.default,or:c.default,read:u.default,readInt:d.default,readUInt:h.default,xnor:f.default,xor:p.default}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/buffer/index.js"}],[2671,{"../byte/write":2683,"./read":2678},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("../byte/write"),i=e("./read");r.default=function(e,t,r){void 0===r&&(r=0);for(var s=Math.floor(r/8),o=Math.ceil((r+t.length)/8),a=e.slice(s,o),l=i.default(a),c=r%8,u=0;u<t.length;u++)l[c++]=t[u];for(var d=o-s,h=0;h<d;h++)a[h]=n.default(l.slice(8*h,8*(h+1)))}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/buffer/modify.js"}],[2672,{buffer:2744},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,r,n){void 0===n&&(n=!1);for(var i=n?r.length:t.length,s=e.alloc(i),o=0;o<i;o++){var a=n?o%t.length:o;s[o]=~(t[a]&r[o])}return s}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/buffer/nand.js"}],[2673,{buffer:2744},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,r,n){void 0===n&&(n=!1);for(var i=n?r.length:t.length,s=e.alloc(i),o=0;o<i;o++){var a=n?o%t.length:o;s[o]=~(t[a]|r[o])}return s}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/buffer/nor.js"}],[2674,{buffer:2744},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){for(var r=e.alloc(t.length),n=0;n<t.length;n++)r[n]=~t[n];return r}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/buffer/not.js"}],[2675,{buffer:2744},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,r,n){void 0===n&&(n=!1);for(var i=n?r.length:t.length,s=e.alloc(i),o=0;o<i;o++){var a=n?o%t.length:o;s[o]=t[a]|r[o]}return s}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/buffer/or.js"}],[2676,{"../bits/not":2656,"../utilities":2694,"./read":2678},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("../utilities"),i=e("../bits/not"),s=e("./read");r.default=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=8);var o=s.default(e,t,r);if(0===o[0]){for(var a=0,l=0;l<r;l++)o[l]&&(a+=n.p2[r-l-1]);return a}a=-1;var c=i.default(o);for(l=0;l<r;l++)c[l]&&(a-=n.p2[r-l-1]);return a}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/buffer/read-int.js"}],[2677,{"../utilities":2694,"./read":2678},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("../utilities"),i=e("./read");r.default=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=8);for(var s=i.default(e,t,r),o=0,a=0;a<r;a++)o+=s[a]*n.p2[r-a-1];return o}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/buffer/read-u-int.js"}],[2678,{"../byte/read":2682},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("../byte/read");r.default=function(e,t,r){void 0===t&&(t=0),r||(r=8*e.length-t);var i=Math.floor(t/8),s=Math.floor(r/8)+2,o=[];o.length=8*s;for(var a=0;a<s;a++){if(e[i+a]!==undefined){var l=n.default(e[i+a]);o[8*a]=l[0],o[8*a+1]=l[1],o[8*a+2]=l[2],o[8*a+3]=l[3],o[8*a+4]=l[4],o[8*a+5]=l[5],o[8*a+6]=l[6],o[8*a+7]=l[7]}}var c=t%8;return o.slice(c,c+r)}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/buffer/read.js"}],[2679,{buffer:2744},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,r,n){void 0===n&&(n=!1);for(var i=n?r.length:t.length,s=e.alloc(i),o=0;o<i;o++){var a=n?o%t.length:o;s[o]=t[a]^~r[o]}return s}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/buffer/xnor.js"}],[268,{"../node":265,"../tree":273,"./util":271},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createNodeFromMultiProof=r.createMultiProof=void 0;const n=e("../node"),i=e("../tree"),s=e("./util");r.createMultiProof=function(e,t){const r=new i.Tree(e),n=s.computeMultiProofBitstrings(t.map((e=>e.toString(2))),!1,s.SortOrder.Decreasing),o=t.slice().sort(((e,t)=>e<t?1:-1));return[o.map((e=>r.getRoot(e))),n.map((e=>r.getRoot(e))),o]},r.createNodeFromMultiProof=function(e,t,r){if(e.length!==r.length)throw new Error("Leaves length should equal gindices length");const i=r.map((e=>e.toString(2))),o=s.computeMultiProofBitstrings(i,!1,s.SortOrder.Decreasing);if(o.length!==t.length)throw new Error("Witnesses length should equal witnesses gindices length");const a=Math.max(i[0]?.length??0,o[0]?.length??0),l=Object.fromEntries(Array.from({length:a},((e,t)=>[t+1,{}])));for(let t=0;t<i.length;t++){const r=i[t],s=e[t];l[r.length][r]=n.LeafNode.fromRoot(s)}for(let e=0;e<o.length;e++){const r=o[e],i=t[e];l[r.length][r]=n.LeafNode.fromRoot(i)}for(let e=a;e>1;e--){const t=l[e],r=l[e-1];for(const e of Object.keys(t)){const i=t[e];if(!i)continue;const s="0"===e[e.length-1],o=e.substring(0,e.length-1),a=o+(s?"1":"0"),l=t[a];if(!l)throw new Error(`Sibling not found: ${a}`);const c=s?new n.BranchNode(i,l):new n.BranchNode(l,i);r[o]=c,delete t[e],delete t[a]}}const c=l[1][1];if(!c)throw new Error("Internal consistency error: no root found");return c}}}},{package:"eth-lattice-keyring>@ethereumjs/tx>@chainsafe/ssz>@chainsafe/persistent-merkle-tree",file:"node_modules/@chainsafe/persistent-merkle-tree/lib/proof/multi.js"}],[2680,{buffer:2744},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,r,n){void 0===n&&(n=!1);for(var i=n?r.length:t.length,s=e.alloc(i),o=0;o<i;o++){var a=n?o%t.length:o;s[o]=t[a]^r[o]}return s}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/buffer/xor.js"}],[2681,{"./read":2682,"./write":2683},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.write=r.read=void 0;var n=e("./read");r.read=n.default;var i=e("./write");r.write=i.default,r.default={read:n.default,write:i.default}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/byte/index.js"}],[2682,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){if(e>255||e<0||~~e!==e)throw new RangeError("invalid byte");for(var t=[0,0,0,0,0,0,0,0],r=0;r<8;r++)t[7-r]=e>>r&1;return t}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/byte/read.js"}],[2683,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){if(!Array.isArray(e)||8!==e.length)throw new RangeError("invalid array length");for(var t=0,r=0;r<8;r++)e[7-r]&&(t|=1<<r);return t}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/byte/write.js"}],[2684,{"./bits":2653,"./buffer":2670,"./byte":2681,"./integer":2686,"./nibble":2689,"./string":2692},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.string=r.nibble=r.integer=r.byte=r.buffer=r.bits=void 0;var n=e("./bits");r.bits=n.default;var i=e("./buffer");r.buffer=i.default;var s=e("./byte");r.byte=s.default;var o=e("./integer");r.integer=o.default;var a=e("./nibble");r.nibble=a.default;var l=e("./string");r.string=l.default;var c={bits:n.default,buffer:i.default,byte:s.default,integer:o.default,nibble:a.default,string:l.default};r.default=c}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/index.js"}],[2685,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){return e>>t&1}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/integer/get-bit.js"}],[2686,{"./get-bit":2685,"./set-bit":2687,"./toggle-bit":2688},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.toggleBit=r.setBit=r.getBit=void 0;var n=e("./get-bit");r.getBit=n.default;var i=e("./set-bit");r.setBit=i.default;var s=e("./toggle-bit");r.toggleBit=s.default,r.default={getBit:n.default,setBit:i.default,toggleBit:s.default}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/integer/index.js"}],[2687,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t,r){return 1===r?e|1<<t:e&~(1<<t)}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/integer/set-bit.js"}],[2688,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){return e^1<<t}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/integer/toggle-bit.js"}],[2689,{"./read":2690,"./write":2691},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.write=r.read=void 0;var n=e("./read");r.read=n.default;var i=e("./write");r.write=i.default,r.default={read:n.default,write:i.default}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/nibble/index.js"}],[269,{"../gindex":262,"../node":265},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createNodeFromSingleProof=r.createSingleProof=r.ERR_INVALID_NAV=void 0;const n=e("../node"),i=e("../gindex");r.ERR_INVALID_NAV="Invalid tree navigation",r.createSingleProof=function(e,t){const n=[];let s=e;for(const e of i.gindexIterator(t))if(e){if(s.isLeaf())throw new Error(r.ERR_INVALID_NAV);n.push(s.left.root),s=s.right}else{if(s.isLeaf())throw new Error(r.ERR_INVALID_NAV);n.push(s.right.root),s=s.left}return[s.root,n.reverse()]},r.createNodeFromSingleProof=function(e,t,r){let i=n.LeafNode.fromRoot(t);const s=r.slice().reverse();for(;e>1;){const t=n.LeafNode.fromRoot(s.pop());i=e%BigInt(2)===BigInt(0)?new n.BranchNode(i,t):new n.BranchNode(t,i),e/=BigInt(2)}return i}}}},{package:"eth-lattice-keyring>@ethereumjs/tx>@chainsafe/ssz>@chainsafe/persistent-merkle-tree",file:"node_modules/@chainsafe/persistent-merkle-tree/lib/proof/single.js"}],[2690,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){if(e<16&&e>=0&&Math.floor(e)===e){for(var t=[0,0,0,0],r=0;r<4;r++)t[3-r]=e>>r&1;return t}throw new RangeError("invalid array length")}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/nibble/read.js"}],[2691,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){if(!Array.isArray(e)||4!==e.length)throw new RangeError("invalid array length");for(var t=0,r=0;r<4;r++)e[3-r]&&(t|=1<<r);return t}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/nibble/write.js"}],[2692,{"./to-bits":2693},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.toBits=void 0;var n=e("./to-bits");r.toBits=n.default,r.default={toBits:n.default}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/string/index.js"}],[2693,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){for(var t=[],r=0;r<e.length;r++)"1"===e[r]?t.push(1):"0"===e[r]&&t.push(0);return t}}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/string/to-bits.js"}],[2694,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.p2=void 0,r.p2=[];for(var n=0;n<32;n++)r.p2[n]=Math.pow(2,n)}}},{package:"eth-lattice-keyring>gridplus-sdk>bitwise",file:"node_modules/bitwise/utilities.js"}]],[],{});